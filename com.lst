C51 COMPILER V9.00   COM                                                                   10/30/2015 17:38:15 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE COM
OBJECT MODULE PLACED IN com.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Receiver\com.c LARGE BROWSE INCDIR(.\Receiver) DEBUG OBJECTEXTEND PRINT(.\c
                    -om.lst) OBJECT(com.obj)

line level    source

   1          #include "com.h"
   2          #include "ds1302.h"
   3          #include "usart.h"
   4          
   5          void mcu_to_computer(unsigned char call_type, unsigned char* number,unsigned char key_type)
   6          {
   7   1              unsigned char temp1=0,temp2=0,key=0;
   8   1      
   9   1              unsigned char sec = 0, hour = 0, min = 0;
  10   1              Ds1302_Read_Time();
  11   1      
  12   1              Usart1_SendData(0xaa);
  13   1              Usart1_SendData(0x42);
  14   1              Usart1_SendData(0x01);
  15   1              Usart1_SendData(0x01);
  16   1              Usart1_SendData(0x01);
  17   1              Usart1_SendData(call_type);//呼叫或者取消  91 92
  18   1              Usart1_SendData(0xff);
  19   1      
  20   1              temp1 = *(number+1) << 4 | *(number + 2);
  21   1              temp2 = *(number+3) << 4 | *(number + 4);
  22   1              Usart1_SendData(temp1);//号码
  23   1              Usart1_SendData(temp2);//号码
  24   1      
  25   1              switch (key_type)
  26   1              {
  27   2              case 1:
  28   2                      key = 0x01;
  29   2                      Usart1_SendData(0x01);
  30   2                      break;
  31   2              case 2:
  32   2                      key = 0x0d; 
  33   2                      Usart1_SendData(0x0d);
  34   2                      break;
  35   2              case 4:
  36   2                      key = 0x0b; 
  37   2                      Usart1_SendData(0x0b); 
  38   2                      break;
  39   2              case 8:
  40   2                      key = 0x0c;
  41   2                      Usart1_SendData(0x0c); 
  42   2                      break;
  43   2              default:
  44   2                      key = 0x00;
  45   2                      Usart1_SendData(0x00);
  46   2                      break;
  47   2              }
  48   1              //Usart1_SendData(key_type);
  49   1              //键值
  50   1              
  51   1      
  52   1              Usart1_SendData(0);
  53   1              Usart1_SendData(0);
  54   1      
C51 COMPILER V9.00   COM                                                                   10/30/2015 17:38:15 PAGE 2   

  55   1              hour  =  ((time_buf1[4] / 10)*6) + time_buf1[4];
  56   1              min =    ((time_buf1[5] / 10)*6) + time_buf1[5];
  57   1              sec  =   ((time_buf1[6] / 10)*6) + time_buf1[6];
  58   1      
  59   1              Usart1_SendData(hour);
  60   1              Usart1_SendData(min);
  61   1              Usart1_SendData(sec);
  62   1      
  63   1              Usart1_SendData(0x1EE + call_type + temp1 + temp2 + key + hour + min + sec);//校验
  64   1      
  65   1      
  66   1              Usart1_SendData(0x55);
  67   1      }
  68          
  69          
  70          
  71          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    329    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----      11
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
