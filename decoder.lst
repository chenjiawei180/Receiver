C51 COMPILER V9.00   DECODER                                                               09/25/2015 11:42:24 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE DECODER
OBJECT MODULE PLACED IN decoder.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Receiver\decoder.c LARGE BROWSE INCDIR(.\Receiver) DEBUG OBJECTEXTEND PRINT
                    -(.\decoder.lst) TABS(2) OBJECT(decoder.obj)

line level    source

   1          #include "decoder.h"
   2          #include "ev1527.h"
   3          #include "usart.h"
   4          #include "at24c256.h"
   5          #include "key.h"
   6          #include "menu.h"
   7          #include "tm1629.h"
   8          #include "timer.h"
   9          #include "gd5800.h"
  10          
  11          unsigned char buf_eeprom[8] = { 0 };//Ğ´ÈëEEPROM_buf
  12          
  13          void DecoderProcess(void)
  14          { 
  15   1        unsigned char i, j ,l ,k;
  16   1        unsigned char temp_buff[8];//½âÂëÓÃÁÙÊ±Êı×é
  17   1        unsigned char temp_buff1[PAGE_LENGTH] = { 0 };//²éÑ¯AT24C256ÁÙÊ±Êı×é
  18   1      
  19   1        unsigned char func_index_temp = 0;    //´´½¨ÁÙÊ±±äÁ¿£¬ÓÃÓÚ·Å»ØÆäËûÍâ²¿±äÁ¿
  20   1        unsigned char Two_Menu_F8_E1_temp = 0;  //´´½¨ÁÙÊ±±äÁ¿£¬ÓÃÓÚ·Å»ØÆäËûÍâ²¿±äÁ¿
  21   1        unsigned char Two_Menu_F8_E2_temp = 0;  //´´½¨ÁÙÊ±±äÁ¿£¬ÓÃÓÚ·Å»ØÆäËûÍâ²¿±äÁ¿
  22   1        unsigned char Two_Menu_F3_E1_temp = 0;  //´´½¨ÁÙÊ±±äÁ¿£¬ÓÃÓÚ·Å»ØÆäËûÍâ²¿±äÁ¿  
  23   1        unsigned char Two_Menu_F3_E2_temp = 0;  //´´½¨ÁÙÊ±±äÁ¿£¬ÓÃÓÚ·Å»ØÆäËûÍâ²¿±äÁ¿
  24   1        unsigned char Two_Menu_F7_E1_temp = 0;  //´´½¨ÁÙÊ±±äÁ¿£¬ÓÃÓÚ·Å»ØÆäËûÍâ²¿±äÁ¿
  25   1        unsigned char Two_Menu_F6_E1_temp = 0;  //´´½¨ÁÙÊ±±äÁ¿£¬ÓÃÓÚ·Å»ØÆäËûÍâ²¿±äÁ¿
  26   1        unsigned char Two_Menu_F6_E2_temp = 0;  //´´½¨ÁÙÊ±±äÁ¿£¬ÓÃÓÚ·Å»ØÆäËûÍâ²¿±äÁ¿
  27   1      
  28   1        func_index_temp = return_func_index();  //·µ»ØËùĞèÒªµÄÍâ²¿±äÁ¿
  29   1        Two_Menu_F8_E1_temp = return_Two_Menu_F8_E1();  //·µ»ØËùĞèÒªµÄÍâ²¿±äÁ¿
  30   1        Two_Menu_F8_E2_temp = return_Two_Menu_F8_E2();  //·µ»ØËùĞèÒªµÄÍâ²¿±äÁ¿
  31   1        Two_Menu_F3_E1_temp = return_Two_Menu_F3_E1();  //·µ»ØËùĞèÒªµÄÍâ²¿±äÁ¿
  32   1        Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();  //·µ»ØËùĞèÒªµÄÍâ²¿±äÁ¿
  33   1        Two_Menu_F7_E1_temp = return_Two_Menu_F7_E1();  //·µ»ØËùĞèÒªµÄÍâ²¿±äÁ¿
  34   1        Two_Menu_F6_E1_temp = return_Two_Menu_F6_E1();  //·µ»ØËùĞèÒªµÄÍâ²¿±äÁ¿
  35   1        Two_Menu_F6_E2_temp = return_Two_Menu_F6_E2();  //·µ»ØËùĞèÒªµÄÍâ²¿±äÁ¿
  36   1      
  37   1        receive_rf_decoder(); //½âÂëº¯Êı
  38   1      
  39   1        if (return_again_receive_rf_decoder_finished() == 1) //±êÖ¾Î»µÈÓÚ1 ËµÃ÷ÔÚ2´Î¼ìÑéÏÂÍ¨¹ı,½ÓÊÕµ½ÓĞĞ§Âë
  40   1        {
  41   2      #ifdef DEBUG
                  uart_printf("decoder_val is %02x %02x %02x .\r\n", (unsigned int)old2_RF_RECE_REG[0], (unsigned int)old2
             -_RF_RECE_REG[1], (unsigned int)old2_RF_RECE_REG[2]); //²âÊÔ°´¼ü¼üÖµ
              #endif
  44   2          switch (func_index_temp)
  45   2          {
  46   3          case MENU_STANDBY://´ı»ú×´Ì¬ÏÂ
  47   3          {
  48   4            set_logout_cycle_table(0);//Ñ­»·¸úÏúºÅÖØĞÂ¼ÆÊı
  49   4            //¼üÅÌ¹æÔò
  50   4            if ((old2_RF_RECE_REG[2] & 0xf0) == 0x00 && (((old2_RF_RECE_REG[0] >> 4) == Two_Menu_F7_E1_temp) || (Tw
             -o_Menu_F7_E1_temp == 10)))//¼üÅÌ¹æÔò£¬³ÌĞò°´Ä¬ÈÏµÄÀ´±à
  51   4            {
  52   5              if (Two_Menu_F8_E1_temp == 1)  //Îª°´¼üÖµ
C51 COMPILER V9.00   DECODER                                                               09/25/2015 11:42:24 PAGE 2   

  53   5              {
  54   6                temp_buff[0] = single_key[old2_RF_RECE_REG[2] & 0x0f] ;
  55   6              }
  56   5              else
  57   5              {
  58   6                temp_buff[0] = multiple_key[old2_RF_RECE_REG[2] & 0x0f];
  59   6              }   
  60   5              temp_buff[1] = old2_RF_RECE_REG[0] >> 4;  //Îª·ÀÇøºÅ
  61   5              temp_buff[2] = old2_RF_RECE_REG[0] & 0x0f;  //Îª3Î»×éÂëµÚÒ»Î»
  62   5              temp_buff[3] = old2_RF_RECE_REG[1] >> 4;  //Îª3Î»×éÂëµÚ¶şÎ»
  63   5              temp_buff[4] = old2_RF_RECE_REG[1] & 0x0f;  //Îª3Î»×éÂëµÚÈıÎ»
  64   5              temp_buff[5] = old2_RF_RECE_REG[0];     //±¸ÓÃÏî,ÔİÇÒ´æµÚÒ»Î»IDÂë
  65   5      
  66   5              if (temp_buff[0] != QUXIAO_1 && temp_buff[0])
  67   5              {
  68   6                submenuf6_1(Two_Menu_F6_E1_temp, temp_buff, temp_buff[0], old2_RF_RECE_REG[2] & 0x0f);
  69   6              }
  70   5              else
  71   5              {
  72   6                Cancel_funtion(temp_buff,display_ram);//È¡Ïûº¯Êı
  73   6                tm1629_load();
  74   6                display();
  75   6                break;
  76   6              }   
  77   5      
  78   5              tm1629_clear();//ÇåÆÁ
  79   5              decoder_temp_to_mcuram(display_ram, temp_buff);//½«ÁÙÊ±Êı×éµÄÊı¾İÒÆÈëµ¥Æ¬»úÔİ´æÊı×é 8×Ö½Ú×ª6×Ö½Ú
  80   5              tm1629_load();//µ¥Æ¬»ú°ÑÊı×éÄÚÈİÔØÈëÊıÂë¹ÜÏÔ´æÊı×éÖĞ
  81   5              display();//ÏÔÊ¾ÊıÂë¹Ü
  82   5              set_func_index(DECODER_MENU);//´ËÊ±ÌøÈë½âÂë²Ëµ¥£¬ÎªÏÂÒ»´Î½âÂë×ö×¼±¸
  83   5              //clear_again_receive_rf_decoder_finished();//Çå³ı½âÂëÍê³É±êÖ¾Î»
  84   5      
  85   5              break;
  86   5            }
  87   4            //ºô½ĞÆ÷×¢²á,ËÑË÷ËùĞèÒªµÄºô½ĞÆ÷
  88   4             for (j = 0; j<(CALL_TABLE_NUMBER + CANCEL_TABLE_NUMBER + ALARM_TABLE_NUMBER); j++)//ËÑË÷±êÖ¾Î»
  89   4            {
  90   5              IRcvStr(I2C_ADDRESS, j*PAGE_LENGTH, temp_buff1, PAGE_LENGTH);//¶Á³ö32¸ö×Ö½Ú±êÖ¾Î»
  91   5              delay10ms();
  92   5              for (i = 0; i<PAGE_LENGTH; i++) //¶Ô¶Á³öµÄ32×Ö½Ú±êÖ¾Î»½øĞĞ²é¿´£¬¿´ÊÇ·ñÎª0
  93   5              {
  94   6                if (temp_buff1[i] == 0)//±êÖ¾Î»Îª0´ú±í¸Ã±êÖ¾Î»Ëù¶ÔÓ¦µÄÊı¾İÇøÓĞÊı¾İ
  95   6                { 
  96   7      #ifdef DEBUG
                          uart_printf("find a table!");
              #endif
  99   7                  IRcvStr(I2C_ADDRESS, CALL_DATA_START + (j * 32 + i) * 8, temp_buff, 8);//¶Á³ö¶ÔÓ¦µÄ8¸ö×Ö½ÚµÄÊı¾İ
 100   7                  delay10ms();
 101   7                  if (((Two_Menu_F8_E1_temp != 1) && temp_buff[5] == old2_RF_RECE_REG[0] && temp_buff[6] == old2_RF_RE
             -CE_REG[1] && ((temp_buff[7] >> 4) == (old2_RF_RECE_REG[2] >> 4))) || ((Two_Menu_F8_E1_temp == 1) && temp_buff[5] == old2
             -_RF_RECE_REG[0] && temp_buff[6] == old2_RF_RECE_REG[1] && temp_buff[7] == old2_RF_RECE_REG[2]))// ½øĞĞ¶Ô±È£¬¿´¿´Êı¾İÊÇ·ñ
             -·ûºÏ
 102   7                  {
 103   8                    if (j <= CALL_TABLE_NUMBER)
 104   8                    {
 105   9                      if (Two_Menu_F8_E1_temp == 1)  //Îª°´¼üÖµ
 106   9                      {
 107  10      
 108  10                        temp_buff[0] = single_key[old2_RF_RECE_REG[2] & 0x0f];
 109  10                      }
 110   9                      else
 111   9                      {
C51 COMPILER V9.00   DECODER                                                               09/25/2015 11:42:24 PAGE 3   

 112  10      
 113  10                        temp_buff[0] = multiple_key[old2_RF_RECE_REG[2] & 0x0f];
 114  10                      }
 115   9                    }
 116   8      
 117   8                    //ÓïÒôº¯Êı
 118   8                    if (temp_buff[0] != QUXIAO_1 && temp_buff[0])
 119   8                    {
 120   9                      submenuf6_1(Two_Menu_F6_E1_temp, temp_buff, temp_buff[0], old2_RF_RECE_REG[2] & 0x0f);
 121   9                    }
 122   8                    else
 123   8                    {
 124   9                      Cancel_funtion(temp_buff, display_ram);//È¡Ïûº¯Êı
 125   9                      tm1629_load();
 126   9                      display();
 127   9                      break;
 128   9                      break;
 129   9                    }
 130   8      
 131   8                      tm1629_clear();//ÇåÆÁ
 132   8                      decoder_temp_to_mcuram(display_ram, temp_buff);//Èç¹û·ûºÏµÄ»°  ½«ÁÙÊ±Êı×éµÄÊı¾İÒÆÈëµ¥Æ¬»úÔİ´æÊı×é 
             -8×Ö½Ú×ª6×Ö½Ú
 133   8                      tm1629_load();//µ¥Æ¬»ú°ÑÊı×éÄÚÈİÔØÈëÊıÂë¹ÜÏÔ´æÊı×éÖĞ
 134   8                      display();//ÏÔÊ¾ÊıÂë¹Ü
 135   8      #ifdef DEBUG
                              uart_printf("decoder success!"); 
              #endif
 138   8      
 139   8      #ifdef DEBUG
                              uart_printf("display_ram is %02x %02x %02x %02x.\r\n", (unsigned int)display_ram[0], (unsigned int
             -)display_ram[1], (unsigned int)display_ram[2], (unsigned int)display_ram[3]); //²âÊÔ°´¼ü¼üÖµ
              #endif
 142   8      
 143   8                      set_func_index(DECODER_MENU);;//´ËÊ±ÌøÈë½âÂë²Ëµ¥£¬ÎªÏÂÒ»´Î½âÂë×ö×¼±¸
 144   8                      clear_again_receive_rf_decoder_finished();//Çå³ı½âÂëÍê³É±êÖ¾Î»
 145   8                      break;
 146   8                      break;
 147   8                  }
 148   7                }
 149   6              }
 150   5            } 
 151   4             break;
 152   4          }
 153   3      
 154   3          case DECODER_MENU: //½âÂë²Ëµ¥ÏÂ
 155   3          {
 156   4            set_logout_cycle_table(0);//Ñ­»·¸úÏúºÅÖØĞÂ¼ÆÊı
 157   4             //¼üÅÌ¹æÔò
 158   4            if ((old2_RF_RECE_REG[2] & 0xf0) == 0x00 && (((old2_RF_RECE_REG[0] >> 4) == Two_Menu_F7_E1_temp) || (Tw
             -o_Menu_F7_E1_temp == 10)))//¼üÅÌ¹æÔò£¬³ÌĞò°´Ä¬ÈÏµÄÀ´±à
 159   4            {
 160   5              if (Two_Menu_F8_E1_temp == 1)  //Îª°´¼üÖµ
 161   5              {
 162   6                temp_buff[0] = single_key[old2_RF_RECE_REG[2] & 0x0f];
 163   6              }
 164   5              else
 165   5              {
 166   6                temp_buff[0] = multiple_key[old2_RF_RECE_REG[2] & 0x0f];
 167   6              }
 168   5              temp_buff[1] = old2_RF_RECE_REG[0] >> 4;  //Îª·ÀÇøºÅ
 169   5              temp_buff[2] = old2_RF_RECE_REG[0] & 0x0f;  //Îª3Î»×éÂëµÚÒ»Î»
 170   5              temp_buff[3] = old2_RF_RECE_REG[1] >> 4;  //Îª3Î»×éÂëµÚ¶şÎ»
C51 COMPILER V9.00   DECODER                                                               09/25/2015 11:42:24 PAGE 4   

 171   5              temp_buff[4] = old2_RF_RECE_REG[1] & 0x0f;  //Îª3Î»×éÂëµÚÈıÎ»
 172   5              temp_buff[5] = old2_RF_RECE_REG[0];     //±¸ÓÃÏî,ÔİÇÒ´æµÚÒ»Î»IDÂë
 173   5              if (Two_Menu_F3_E1_temp == 1)       //Îª¼´Ê±Ä£Ê½
 174   5              { 
 175   6                if (temp_buff[0] != QUXIAO_1 && temp_buff[0])
 176   6                {
 177   7                  submenuf6_1(Two_Menu_F6_E1_temp, temp_buff, temp_buff[0], old2_RF_RECE_REG[2] & 0x0f);
 178   7                }
 179   6                else
 180   6                {
 181   7                  Cancel_funtion(temp_buff, display_ram);//È¡Ïûº¯Êı
 182   7                  tm1629_load();
 183   7                  display();
 184   7                  break;
 185   7                }
 186   6      
 187   6                for (l = Two_Menu_F3_E2_temp; l>1; l--) //ÕûÌåÍùÏÂÒÆÒ»×éÊı¾İ
 188   6                {
 189   7                  mcuram_to_mcuram_down(display_ram + (l - 2) * 6);
 190   7                }
 191   6                for (l = 0; l<6; l++) //½²µÚÒ»×éÊı¾İÇå0
 192   6                {
 193   7                  display_ram[l] = 0;
 194   7                }
 195   6                decoder_temp_to_mcuram(display_ram, temp_buff); //Èç¹û·ûºÏµÄ»°  ½«ÁÙÊ±Êı×éµÄÊı¾İÒÆÈëµ¥Æ¬»úÔİ´æÊı×é 8×
             -Ö½Ú×ª6×Ö½Ú
 196   6                tm1629_load();//µ¥Æ¬»ú°ÑÊı×éÄÚÈİÔØÈëÊıÂë¹ÜÏÔ´æÊı×éÖĞ
 197   6                display();//ÏÔÊ¾ÊıÂë¹Ü
 198   6              }
 199   5              else if (Two_Menu_F3_E1_temp == 2)//ÎªÑ­»·Ä£Ê½
 200   5              {
 201   6                for (k = 0; k < Two_Menu_F3_E2_temp; k++)
 202   6                {
 203   7                  if (display_ram[k * 6] == 0)//ÕÒ³öÎ»ÓÚ¶ÓÁĞ×îºóµÄÄÇ¸öµã
 204   7                  {
 205   8                    decoder_temp_to_mcuram(display_ram + k * 6, temp_buff);//Èç¹û·ûºÏµÄ»°  ½«ÁÙÊ±Êı×éµÄÊı¾İÒÆÈëµ¥Æ¬»úÔİ
             -´æÊı×é 8×Ö½Ú×ª6×Ö½Ú
 206   8                    tm1629_load();//µ¥Æ¬»ú°ÑÊı×éÄÚÈİÔØÈëÊıÂë¹ÜÏÔ´æÊı×éÖĞ
 207   8                    display();//ÏÔÊ¾ÊıÂë¹Ü
 208   8                    break;
 209   8                  }
 210   7                }
 211   6      
 212   6              }
 213   5              //clear_again_receive_rf_decoder_finished();//Çå³ı½âÂëÍê³É±êÖ¾Î»
 214   5              break;
 215   5            }
 216   4            //ºô½ĞÆ÷×¢²á,ËÑË÷ËùĞèÒªµÄºô½ĞÆ÷
 217   4            for (j = 0; j<CALL_TABLE_NUMBER + ALARM_TABLE_NUMBER + CANCEL_TABLE_NUMBER; j++)//ËÑË÷±êÖ¾Î»
 218   4            {
 219   5              IRcvStr(I2C_ADDRESS, j*PAGE_LENGTH, temp_buff1, PAGE_LENGTH);//¶Á³ö32¸ö×Ö½Ú±êÖ¾Î»
 220   5              delay10ms();
 221   5              for (i = 0; i<PAGE_LENGTH; i++)
 222   5              {
 223   6                if (temp_buff1[i] == 0)//¶Ô¶Á³öµÄ32×Ö½Ú±êÖ¾Î»½øĞĞ²é¿´£¬¿´ÊÇ·ñÎª0
 224   6                {
 225   7                  IRcvStr(I2C_ADDRESS, CALL_DATA_START + (j * 32 + i) * 8, temp_buff, 8);//¶Á³ö¶ÔÓ¦µÄ8¸ö×Ö½ÚµÄÊı¾İ
 226   7                  delay10ms();
 227   7                  if (((Two_Menu_F8_E1_temp != 1) && temp_buff[5] == old2_RF_RECE_REG[0] && temp_buff[6] == old2_RF_RE
             -CE_REG[1] && ((temp_buff[7] >> 4) == (old2_RF_RECE_REG[2] >> 4))) || ((Two_Menu_F8_E1_temp == 1) && temp_buff[5] == old2
             -_RF_RECE_REG[0] && temp_buff[6] == old2_RF_RECE_REG[1] && temp_buff[7] == old2_RF_RECE_REG[2]))
 228   7                  {
C51 COMPILER V9.00   DECODER                                                               09/25/2015 11:42:24 PAGE 5   

 229   8                    if (j <= CALL_TABLE_NUMBER)
 230   8                    {
 231   9                      if (Two_Menu_F8_E1_temp == 1)  //Îª°´¼üÖµ
 232   9                      {
 233  10      
 234  10                        temp_buff[0] = single_key[old2_RF_RECE_REG[2] & 0x0f];
 235  10                      }
 236   9                      else
 237   9                      {
 238  10      
 239  10                        temp_buff[0] = multiple_key[old2_RF_RECE_REG[2] & 0x0f];
 240  10                      }
 241   9                    }
 242   8            
 243   8                    if (Two_Menu_F3_E1_temp == 1)//Îª¼´Ê±Ä£Ê½
 244   8                    {
 245   9      
 246   9                      if (temp_buff[0] != QUXIAO_1 && temp_buff[0])
 247   9                      {
 248  10                        submenuf6_1(Two_Menu_F6_E1_temp, temp_buff, temp_buff[0], old2_RF_RECE_REG[2] & 0x0f);
 249  10                      }
 250   9                      else
 251   9                      {
 252  10                        Cancel_funtion(temp_buff, display_ram);//È¡Ïûº¯Êı
 253  10                        tm1629_load();
 254  10                        display();
 255  10                        break;
 256  10                        break;
 257  10                      }
 258   9      
 259   9                      for (l = Two_Menu_F3_E2_temp; l>1; l--) //ÕûÌåÍùÏÂÒÆÒ»×éÊı¾İ
 260   9                      {
 261  10                        mcuram_to_mcuram_down(display_ram + (l - 2) * 6);
 262  10                      }
 263   9                      for (l = 0; l<6; l++)//½²µÚÒ»×éÊı¾İÇå0
 264   9                      {
 265  10                        display_ram[l] = 0;
 266  10                      }
 267   9                      decoder_temp_to_mcuram(display_ram, temp_buff);//Èç¹û·ûºÏµÄ»°  ½«ÁÙÊ±Êı×éµÄÊı¾İÒÆÈëµ¥Æ¬»úÔİ´æÊı×é 
             -8×Ö½Ú×ª6×Ö½Ú
 268   9                      tm1629_load();//µ¥Æ¬»ú°ÑÊı×éÄÚÈİÔØÈëÊıÂë¹ÜÏÔ´æÊı×éÖĞ
 269   9                      display();//ÏÔÊ¾ÊıÂë¹Ü
 270   9                    }
 271   8                  else if (Two_Menu_F3_E1_temp == 2)//ÎªÑ­»·Ä£Ê½
 272   8                  {
 273   9                    for (k = 0; k < Two_Menu_F3_E2_temp; k++)
 274   9                    {
 275  10                      if (display_ram[k * 6 ] == 0)//ÕÒ³öÎ»ÓÚ¶ÓÁĞ×îºóµÄÄÇ¸öµã
 276  10                      {
 277  11                        decoder_temp_to_mcuram(display_ram + k * 6, temp_buff);//  ½«ÁÙÊ±Êı×éµÄÊı¾İÒÆÈëµ¥Æ¬»úÔİ´æÊı×é 8×Ö
             -½Ú×ª6×Ö½Ú
 278  11                        tm1629_load();//µ¥Æ¬»ú°ÑÊı×éÄÚÈİÔØÈëÊıÂë¹ÜÏÔ´æÊı×éÖĞ
 279  11                        display();//ÏÔÊ¾ÊıÂë¹Ü
 280  11                        break;
 281  11                      }
 282  10                    }
 283   9                  }
 284   8      #ifdef DEBUG
                            uart_printf("decoder success!");
              #endif
 287   8      
 288   8      #ifdef DEBUG
C51 COMPILER V9.00   DECODER                                                               09/25/2015 11:42:24 PAGE 6   

                            uart_printf("display_ram is %02x %02x %02x %02x.\r\n", (unsigned int)display_ram[0], (unsigned int)
             -display_ram[1], (unsigned int)display_ram[2], (unsigned int)display_ram[3]); //²âÊÔ°´¼ü¼üÖµ
              #endif
 291   8                    clear_again_receive_rf_decoder_finished();
 292   8                    break;
 293   8                    break;
 294   8                  }
 295   7                }
 296   6              }
 297   5            }
 298   4            break;
 299   4          }
 300   3      
 301   3          case TWO_MENU_F1_E1_D1:
 302   3          case TWO_MENU_F1_E1_D2:
 303   3          case TWO_MENU_F1_E1_D3:
 304   3          case TWO_MENU_F1_E1_D4:
 305   3          {
 306   4            set_func_index(TWO_MENU_F1_E1_D4);
 307   4            buf_eeprom[0] = old2_RF_RECE_REG[2] & 0x0f;//°´¼üÖµ±£´æµ½0×Ö½Ú
 308   4            buf_eeprom[1] = Two_Menu_F1_E1[0];/*ÊıÖµ´æÈë1 2 3 4×Ö½Ú*/
 309   4            buf_eeprom[2] = Two_Menu_F1_E1[1];
 310   4            buf_eeprom[3] = Two_Menu_F1_E1[2];
 311   4            buf_eeprom[4] = Two_Menu_F1_E1[3];
 312   4            buf_eeprom[5] = old2_RF_RECE_REG[0];// IDÂë´æÈë 5 6 7 ×Ö½Ú
 313   4            buf_eeprom[6] = old2_RF_RECE_REG[1];
 314   4            if (Two_Menu_F8_E1_temp == 1)
 315   4            {
 316   5              buf_eeprom[7] = old2_RF_RECE_REG[2];
 317   5            }
 318   4            else
 319   4            {
 320   5              buf_eeprom[7] = old2_RF_RECE_REG[2] & 0xf0;
 321   5            }
 322   4      
 323   4            if (register_call_function(buf_eeprom))//ÊıÖµ×Ô¶¯¼Ó1
 324   4            {
 325   5      #ifdef DEBUG
                      uart_printf("call is %02x %02x %02x .\r\n", (unsigned int)buf_eeprom[5], (unsigned int)buf_eeprom[6], 
             -(unsigned int)buf_eeprom[7]); //²âÊÔ°´¼ü¼üÖµ
                      uart_printf("call is %02x %02x %02x %02x.\r\n", (unsigned int)Two_Menu_F1_E1[0], (unsigned int)Two_Men
             -u_F1_E1[1], (unsigned int)Two_Menu_F1_E1[2], (unsigned int)Two_Menu_F1_E1[3]);
                      uart_printf("caller is rigister success \r\n");
              #endif          
 330   5              delay10ms();
 331   5              if (Two_Menu_F1_E1[3] == 9)
 332   5              {
 333   6                if (Two_Menu_F1_E1[2] == 9)
 334   6                {
 335   7                  if (Two_Menu_F1_E1[1] == 9)
 336   7                  {
 337   8                    Two_Menu_F1_E1[0]++;
 338   8                    Two_Menu_F1_E1[1] = 0;
 339   8                    Two_Menu_F1_E1[2] = 0;
 340   8                    if (Two_Menu_F1_E1[0] == 21)
 341   8                    {
 342   9                      Two_Menu_F1_E1[0] = 0;
 343   9                      Two_Menu_F1_E1[3] = 1;
 344   9                    }
 345   8                    else
 346   8                    {
 347   9                      Two_Menu_F1_E1[3] = 1;
C51 COMPILER V9.00   DECODER                                                               09/25/2015 11:42:24 PAGE 7   

 348   9                    }
 349   8                  }
 350   7                  else
 351   7                  {
 352   8                    Two_Menu_F1_E1[1]++;
 353   8                    Two_Menu_F1_E1[2] = 0;
 354   8                    Two_Menu_F1_E1[3] = 0;
 355   8                  }
 356   7                }
 357   6                else
 358   6                {
 359   7                  Two_Menu_F1_E1[2]++;
 360   7                  Two_Menu_F1_E1[3] = 0;
 361   7                }
 362   6              }
 363   5              else
 364   5                Two_Menu_F1_E1[3]++;
 365   5            }
 366   4            break;
 367   4          }
 368   3      
 369   3          case TWO_MENU_F1_E2_D1:
 370   3          case TWO_MENU_F1_E2_D2:
 371   3          case TWO_MENU_F1_E2_D3:
 372   3          case TWO_MENU_F1_E2_D4:
 373   3          {
 374   4                        set_func_index(TWO_MENU_F1_E2_D4);
 375   4                        buf_eeprom[0] = old2_RF_RECE_REG[2] & 0x0f;//°´¼üÖµ±£´æµ½0×Ö½Ú
 376   4                        buf_eeprom[1] = Two_Menu_F1_E2[0];/*ÊıÖµ´æÈë1 2 3 4×Ö½Ú*/
 377   4                        buf_eeprom[2] = Two_Menu_F1_E2[1];
 378   4                        buf_eeprom[3] = Two_Menu_F1_E2[2];
 379   4                        buf_eeprom[4] = Two_Menu_F1_E2[3];
 380   4                        buf_eeprom[5] = old2_RF_RECE_REG[0];// IDÂë´æÈë 5 6 7 ×Ö½Ú
 381   4                        buf_eeprom[6] = old2_RF_RECE_REG[1];
 382   4                        buf_eeprom[7] = old2_RF_RECE_REG[2] & 0xf0;
 383   4      
 384   4                        if (register_host_function(buf_eeprom))//ÊıÖµ×Ô¶¯¼Ó1
 385   4                        {
 386   5      #ifdef DEBUG
                                  uart_printf("host is %02x %02x %02x .\r\n", (unsigned int)buf_eeprom[5], (unsigned int)buf_eepr
             -om[6], (unsigned int)buf_eeprom[7]); //²âÊÔ°´¼ü¼üÖµ
                                  uart_printf("host is %02x %02x %02x %02x.\r\n", (unsigned int)Two_Menu_F1_E2[0], (unsigned int)
             -Two_Menu_F1_E2[1], (unsigned int)Two_Menu_F1_E2[2], (unsigned int)Two_Menu_F1_E2[3]);
                                  uart_printf("host is rigister success \r\n");
              #endif          
 391   5                          delay10ms();
 392   5                          if (Two_Menu_F1_E2[3] == 9)
 393   5                          {
 394   6                            if (Two_Menu_F1_E2[2] == 9)
 395   6                            {
 396   7                              if (Two_Menu_F1_E2[1] == 9)
 397   7                              {
 398   8                                Two_Menu_F1_E2[0]++;
 399   8                                Two_Menu_F1_E2[1] = 0;
 400   8                                Two_Menu_F1_E2[2] = 0;
 401   8                                if (Two_Menu_F1_E2[0] == 21)
 402   8                                {
 403   9                                  Two_Menu_F1_E2[0] = 0;
 404   9                                  Two_Menu_F1_E2[3] = 1;
 405   9                                }
 406   8                                else
 407   8                                {
C51 COMPILER V9.00   DECODER                                                               09/25/2015 11:42:24 PAGE 8   

 408   9                                  Two_Menu_F1_E2[3] = 1;
 409   9                                }
 410   8      
 411   8      
 412   8                              }
 413   7                              else
 414   7                              {
 415   8                                Two_Menu_F1_E2[1]++;
 416   8                                Two_Menu_F1_E2[2] = 0;
 417   8                                Two_Menu_F1_E2[3] = 0;
 418   8                              }
 419   7                            }
 420   6                            else
 421   6                            {
 422   7                              Two_Menu_F1_E2[2]++;
 423   7                              Two_Menu_F1_E2[3] = 0;
 424   7                            }
 425   6                          }
 426   5                          else
 427   5                            Two_Menu_F1_E2[3]++;
 428   5                        }
 429   4                        break;
 430   4          }
 431   3      
 432   3          case TWO_MENU_F1_E3_D1:
 433   3          case TWO_MENU_F1_E3_D2:
 434   3          case TWO_MENU_F1_E3_D3:
 435   3          case TWO_MENU_F1_E3_D4:
 436   3          {
 437   4            set_func_index(TWO_MENU_F1_E3_D4);
 438   4            buf_eeprom[0] = BAOJING_1;//°´¼üÖµ±£´æµ½0×Ö½Ú
 439   4            buf_eeprom[1] = Two_Menu_F1_E3[0];/*ÊıÖµ´æÈë1 2 3 4×Ö½Ú*/
 440   4            buf_eeprom[2] = Two_Menu_F1_E3[1];
 441   4            buf_eeprom[3] = Two_Menu_F1_E3[2];
 442   4            buf_eeprom[4] = Two_Menu_F1_E3[3];
 443   4            buf_eeprom[5] = old2_RF_RECE_REG[0];// IDÂë´æÈë 5 6 7 ×Ö½Ú
 444   4            buf_eeprom[6] = old2_RF_RECE_REG[1];
 445   4            buf_eeprom[7] = old2_RF_RECE_REG[2] & 0xf0;
 446   4      
 447   4            if (register_alarm_function(buf_eeprom))//ÊıÖµ×Ô¶¯¼Ó1
 448   4            {
 449   5      #ifdef DEBUG
                      uart_printf("alarm is %02x %02x %02x .\r\n", (unsigned int)buf_eeprom[5], (unsigned int)buf_eeprom[6],
             - (unsigned int)buf_eeprom[7]); //²âÊÔ°´¼ü¼üÖµ
                      uart_printf("alarm is %02x %02x %02x %02x.\r\n", (unsigned int)Two_Menu_F1_E3[0], (unsigned int)Two_Me
             -nu_F1_E3[1], (unsigned int)Two_Menu_F1_E3[2], (unsigned int)Two_Menu_F1_E3[3]);
                      uart_printf("alarm is rigister success \r\n");
              #endif          
 454   5              delay10ms();
 455   5              if (Two_Menu_F1_E3[3] == 9)
 456   5              {
 457   6                if (Two_Menu_F1_E3[2] == 9)
 458   6                {
 459   7                  if (Two_Menu_F1_E3[1] == 9)
 460   7                  {
 461   8                    Two_Menu_F1_E3[0]++;
 462   8                    Two_Menu_F1_E3[1] = 0;
 463   8                    Two_Menu_F1_E3[2] = 0;
 464   8                    if (Two_Menu_F1_E3[0] == 21)
 465   8                    {
 466   9                      Two_Menu_F1_E3[0] = 0;
 467   9                      Two_Menu_F1_E3[3] = 1;
C51 COMPILER V9.00   DECODER                                                               09/25/2015 11:42:24 PAGE 9   

 468   9                    }
 469   8                    else
 470   8                    {
 471   9                      Two_Menu_F1_E3[3] = 1;
 472   9                    }
 473   8                  }
 474   7                  else
 475   7                  {
 476   8                    Two_Menu_F1_E3[1]++;
 477   8                    Two_Menu_F1_E3[2] = 0;
 478   8                    Two_Menu_F1_E3[3] = 0;
 479   8                  }
 480   7                }
 481   6                else
 482   6                {
 483   7                  Two_Menu_F1_E3[2]++;
 484   7                  Two_Menu_F1_E3[3] = 0;
 485   7                }
 486   6              }
 487   5              else
 488   5                Two_Menu_F1_E2[3]++;
 489   5            }
 490   4            break;
 491   4          }
 492   3          case TWO_MENU_F1_E4_D1:
 493   3          case TWO_MENU_F1_E4_D2:
 494   3          case TWO_MENU_F1_E4_D3:
 495   3          case TWO_MENU_F1_E4_D4:
 496   3          {
 497   4            set_func_index(TWO_MENU_F1_E4_D4);
 498   4            buf_eeprom[0] = QUXIAO_1;//°´¼üÖµ±£´æµ½0×Ö½Ú
 499   4            buf_eeprom[1] = Two_Menu_F1_E4[0];/*ÊıÖµ´æÈë1 2 3 4×Ö½Ú*/
 500   4            buf_eeprom[2] = Two_Menu_F1_E4[1];
 501   4            buf_eeprom[3] = Two_Menu_F1_E4[2];
 502   4            buf_eeprom[4] = Two_Menu_F1_E4[3];
 503   4            buf_eeprom[5] = old2_RF_RECE_REG[0];// IDÂë´æÈë 5 6 7 ×Ö½Ú
 504   4            buf_eeprom[6] = old2_RF_RECE_REG[1];
 505   4            buf_eeprom[7] = old2_RF_RECE_REG[2] & 0xf0;
 506   4      
 507   4            if (register_cancel_function(buf_eeprom))//ÊıÖµ×Ô¶¯¼Ó1
 508   4            {
 509   5      #ifdef DEBUG
                      uart_printf("cancel is %02x %02x %02x .\r\n", (unsigned int)buf_eeprom[5], (unsigned int)buf_eeprom[6]
             -, (unsigned int)buf_eeprom[7]); //²âÊÔ°´¼ü¼üÖµ
                      uart_printf("cancel is %02x %02x %02x %02x.\r\n", (unsigned int)Two_Menu_F1_E4[0], (unsigned int)Two_M
             -enu_F1_E4[1], (unsigned int)Two_Menu_F1_E4[2], (unsigned int)Two_Menu_F1_E4[3]);
                      uart_printf("cancel is rigister success \r\n");
              #endif          
 514   5              delay10ms();
 515   5              if (Two_Menu_F1_E4[3] == 9)
 516   5              {
 517   6                if (Two_Menu_F1_E4[2] == 9)
 518   6                {
 519   7                  if (Two_Menu_F1_E4[1] == 9)
 520   7                  {
 521   8                    Two_Menu_F1_E4[0]++;
 522   8                    Two_Menu_F1_E4[1] = 0;
 523   8                    Two_Menu_F1_E4[2] = 0;
 524   8                    if (Two_Menu_F1_E4[0] == 21)
 525   8                    {
 526   9                      Two_Menu_F1_E4[0] = 0;
 527   9                      Two_Menu_F1_E4[3] = 1;
C51 COMPILER V9.00   DECODER                                                               09/25/2015 11:42:24 PAGE 10  

 528   9                    }
 529   8                    else
 530   8                    {
 531   9                      Two_Menu_F1_E4[3] = 1;
 532   9                    }
 533   8                  }
 534   7                  else
 535   7                  {
 536   8                    Two_Menu_F1_E4[1]++;
 537   8                    Two_Menu_F1_E4[2] = 0;
 538   8                    Two_Menu_F1_E4[3] = 0;
 539   8                  }
 540   7                }
 541   6                else
 542   6                {
 543   7                  Two_Menu_F1_E4[2]++;
 544   7                  Two_Menu_F1_E4[3] = 0;
 545   7                }
 546   6              }
 547   5              else
 548   5                Two_Menu_F1_E4[3]++;
 549   5            }
 550   4            break;
 551   4          }
 552   3          case TWO_MENU_F8_E2_SET :
 553   3      
 554   3            if (Two_Menu_F8_E1_temp == 1)
 555   3            {
 556   4              single_key[old2_RF_RECE_REG[2] & 0x0f] = Two_Menu_F8_E2_temp;
 557   4            }
 558   3            else
 559   3            {
 560   4              multiple_key[old2_RF_RECE_REG[2] & 0x0f] = Two_Menu_F8_E2_temp;
 561   4            }
 562   3      #ifdef DEBUG
                    uart_printf("single_key£º  ");
                    for (i = 0; i < 16; i++)
                    {
                      
                      uart_printf("%02d ", (unsigned int)single_key[i]);
                    }
                    uart_printf(" \r\n");
              
                    uart_printf("multiple_key£º");
                    for (i = 0; i < 16; i++)
                    {
              
                      uart_printf("%2d ", (unsigned int)multiple_key[i]);
                    }
                    uart_printf(" \r\n");
              #endif  
 579   3      
 580   3            break;
 581   3      
 582   3      
 583   3          default:break;//Ä¬ÈÏµÄbreak
 584   3          }
 585   2          clear_again_receive_rf_decoder_finished();//Çå³ı±êÖ¾Î»
 586   2        }
 587   1        
 588   1        LogoutProcess();
 589   1        CycleProcess();
C51 COMPILER V9.00   DECODER                                                               09/25/2015 11:42:24 PAGE 11  

 590   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2548    ----
   CONSTANT SIZE    =     32    ----
   XDATA SIZE       =      8      52
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
