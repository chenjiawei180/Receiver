C51 COMPILER V9.00   DECODER                                                               10/30/2015 11:43:42 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE DECODER
OBJECT MODULE PLACED IN decoder.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Receiver\decoder.c LARGE BROWSE INCDIR(.\Receiver) DEBUG OBJECTEXTEND PRINT
                    -(.\decoder.lst) OBJECT(decoder.obj)

line level    source

   1          #include "decoder.h"
   2          #include "ev1527.h"
   3          #include "usart.h"
   4          #include "at24c256.h"
   5          #include "key.h"
   6          #include "menu.h"
   7          #include "tm1629.h"
   8          #include "timer.h"
   9          #include "gd5800.h"
  10          #include "com.h"
  11          
  12          unsigned char buf_eeprom[8] = { 0 };//–¥»ÎEEPROM_buf
  13          unsigned char Two_menu_set_success = 0;
  14          
  15          void DecoderProcess(void)
  16          {       
  17   1              RF_def tmp;
  18   1              RF_def RFtmp;
  19   1              uint32_t dat;
  20   1              unsigned char i, j ,l ,k ,index=0;
  21   1              unsigned char temp_buff[8];//Ω‚¬Î”√¡Ÿ ± ˝◊È
  22   1      
  23   1              unsigned char func_index_temp = 0;              //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø
  24   1              unsigned char Two_Menu_F8_E1_temp = 0;  //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø
  25   1              unsigned char Two_Menu_F8_E2_temp = 0;  //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø
  26   1              unsigned char Two_Menu_F3_E1_temp = 0;  //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø    
  27   1              unsigned char Two_Menu_F3_E2_temp = 0;  //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø
  28   1              unsigned char Two_Menu_F7_E1_temp = 0;  //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø
  29   1              unsigned char Two_Menu_F6_E1_temp = 0;  //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø
  30   1              unsigned char Two_Menu_F6_E2_temp = 0;  //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø
  31   1      
  32   1              func_index_temp = return_func_index();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  33   1              Two_Menu_F8_E1_temp = return_Two_Menu_F8_E1();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  34   1              Two_Menu_F8_E2_temp = return_Two_Menu_F8_E2();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  35   1              Two_Menu_F3_E1_temp = return_Two_Menu_F3_E1();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  36   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  37   1              index                       = return_Two_Menu_F3_E2();
  38   1              Two_Menu_F7_E1_temp = return_Two_Menu_F7_E1();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  39   1              Two_Menu_F6_E1_temp = return_Two_Menu_F6_E1();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  40   1              Two_Menu_F6_E2_temp = return_Two_Menu_F6_E2();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  41   1      
  42   1              receive_rf_decoder();   //Ω‚¬Î∫Ø ˝
  43   1      
  44   1              if (return_again_receive_rf_decoder_finished() == 1) //±Í÷æŒªµ»”⁄1 Àµ√˜‘⁄2¥ŒºÏ—Èœ¬Õ®π˝,Ω” ’µΩ”––ß¬Î
  45   1              {
  46   2      #ifdef DEBUG
                              uart_printf("decoder_val is %02x %02x %02x .\r\n", (unsigned int)old2_RF_RECE_REG[0], (unsigned int)old2
             -_RF_RECE_REG[1], (unsigned int)old2_RF_RECE_REG[2]); //≤‚ ‘∞¥º¸º¸÷µ
              #endif
  49   2                      dat = ((uint32_t)old2_RF_RECE_REG[0]) << 16 | ((uint32_t)old2_RF_RECE_REG[1]) << 8 | ((uint32_t)old2_RF_
             -RECE_REG[2]);
  50   2                      switch (func_index_temp)
  51   2                      {
  52   3                      case MENU_STANDBY://¥˝ª˙◊¥Ã¨œ¬
C51 COMPILER V9.00   DECODER                                                               10/30/2015 11:43:42 PAGE 2   

  53   3                      {
  54   4                              set_logout_cycle_table(0);//—≠ª∑∏˙œ˙∫≈÷ÿ–¬º∆ ˝
  55   4                              //º¸≈ÃπÊ‘Ú
  56   4                              if ((old2_RF_RECE_REG[2] & 0xf0) == 0x00 && ((((old2_RF_RECE_REG[0] >> 4) == Two_Menu_F7_E1_temp) && (o
             -ld2_RF_RECE_REG[0] >> 4) < 10) ||  ((Two_Menu_F7_E1_temp == 10) && (old2_RF_RECE_REG[0] >> 4) < 10)) )//º¸≈ÃπÊ‘Ú£¨≥Ã–Ú∞¥
             -ƒ¨»œµƒ¿¥±‡
  57   4                              {
  58   5                                      if (Two_Menu_F8_E1_temp == 1)  //Œ™∞¥º¸÷µ
  59   5                                      {
  60   6                                              temp_buff[0] = single_key[old2_RF_RECE_REG[2] & 0x0f] ;
  61   6                                      }
  62   5                                      else
  63   5                                      {
  64   6                                              temp_buff[0] = multiple_key[old2_RF_RECE_REG[2] & 0x0f];
  65   6                                      }   
  66   5                                      temp_buff[1] = old2_RF_RECE_REG[0] >> 4;        //Œ™∑¿«¯∫≈
  67   5                                      temp_buff[2] = old2_RF_RECE_REG[0] & 0x0f;      //Œ™3Œª◊È¬Îµ⁄“ªŒª
  68   5                                      temp_buff[3] = old2_RF_RECE_REG[1] >> 4;        //Œ™3Œª◊È¬Îµ⁄∂˛Œª
  69   5                                      temp_buff[4] = old2_RF_RECE_REG[1] & 0x0f;      //Œ™3Œª◊È¬Îµ⁄»˝Œª
  70   5                                      temp_buff[5] = old2_RF_RECE_REG[0];                     //±∏”√œÓ,‘›«“¥Êµ⁄1ŒªID¬Î
  71   5                                      temp_buff[6] = old2_RF_RECE_REG[1];                     //±∏”√œÓ,‘›«“¥Êµ⁄2ŒªID¬Î
  72   5                                      temp_buff[7] = old2_RF_RECE_REG[2];                     //±∏”√œÓ,‘›«“¥Êµ⁄3ŒªID¬Î
  73   5      
  74   5                                      if (temp_buff[0] != QUXIAO_1 && temp_buff[0])
  75   5                                      {
  76   6                                              for (l = 0; l < Two_Menu_F6_E2_temp; l++)
  77   6                                              {
  78   7                                                      submenuf6_1(Two_Menu_F6_E1_temp, temp_buff, temp_buff[0], old2_RF_RECE_REG[2] & 0x0f);
  79   7                                              }
  80   6                                      }
  81   5                                      else
  82   5                                      {
  83   6                                              Cancel_funtion(temp_buff,display_ram);//»°œ˚∫Ø ˝
  84   6                                              mcu_to_computer(0x92, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
  85   6                                              tm1629_load();
  86   6                                              display();
  87   6                                              break;
  88   6                                      }               
  89   5      
  90   5                                      tm1629_clear();//«Â∆¡
  91   5                                      mcu_to_computer(0x91, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
  92   5                                      decoder_temp_to_mcuram(display_ram, temp_buff);//Ω´¡Ÿ ± ˝◊Èµƒ ˝æ›“∆»Îµ•∆¨ª˙‘›¥Ê ˝◊È 8◊÷Ω⁄◊™6◊÷Ω⁄
  93   5                                      tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
  94   5                                      display();//œ‘ æ ˝¬Îπ‹
  95   5                                      set_func_index(DECODER_MENU);//¥À ±Ã¯»ÎΩ‚¬Î≤Àµ•£¨Œ™œ¬“ª¥ŒΩ‚¬Î◊ˆ◊º±∏
  96   5                                      //clear_again_receive_rf_decoder_finished();//«Â≥˝Ω‚¬ÎÕÍ≥…±Í÷æŒª
  97   5      
  98   5                                      break;
  99   5                              }
 100   4                              //∫ÙΩ–∆˜◊¢≤·,À—À˜À˘–Ë“™µƒ∫ÙΩ–∆˜
 101   4      #ifdef DEBUG
                                      uart_printf("dat is : %x %x \r\n", (unsigned int)(dat >> 16), (unsigned int)dat);
              #endif
 104   4                              if (Find_RF_EEPROM(&RFtmp, dat))
 105   4                              {
 106   5      #ifdef DEBUG
                                              uart_printf("Find_RF_EEPROM \r\n");
              #endif
 109   5                                      memcpy(temp_buff+1, RFtmp.region, 4);
 110   5                                      temp_buff[7] = old2_RF_RECE_REG[2];
 111   5      
 112   5                                      if (temp_buff[0] < 50)
C51 COMPILER V9.00   DECODER                                                               10/30/2015 11:43:42 PAGE 3   

 113   5                                      {
 114   6      #ifdef DEBUG
                                                      uart_printf("temp_buff[0] < 50 \r\n");
              #endif
 117   6                                              if (Two_Menu_F8_E1_temp == 1)  //Œ™∞¥º¸÷µ
 118   6                                              {
 119   7      
 120   7                                                      temp_buff[0] = single_key[old2_RF_RECE_REG[2] & 0x0f];
 121   7                                              }
 122   6                                              else
 123   6                                              {
 124   7      
 125   7                                                      temp_buff[0] = multiple_key[old2_RF_RECE_REG[2] & 0x0f];
 126   7                                              }
 127   6                                      }
 128   5      
 129   5      
 130   5      
 131   5      
 132   5      #ifdef DEBUG
                                              uart_printf("cancen funtion \r\n");
              #endif
 135   5                                      //”Ô“Ù∫Ø ˝
 136   5                                      if (temp_buff[0] != QUXIAO_1 && temp_buff[0])
 137   5                                      {
 138   6      #ifdef DEBUG
                                                      uart_printf("cancen funtion fault \r\n");
              #endif
 141   6                                              for (l = 0; l < Two_Menu_F6_E2_temp; l++)
 142   6                                              {
 143   7                                                      submenuf6_1(Two_Menu_F6_E1_temp, temp_buff, temp_buff[0], old2_RF_RECE_REG[2] & 0x0f);
 144   7                                              }
 145   6                                      }
 146   5                                      else
 147   5                                      {
 148   6      #ifdef DEBUG
                                                      uart_printf("cancen funtion success \r\n");
              #endif
 151   6                                              mcu_to_computer(0x92, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 152   6                                              Cancel_funtion(temp_buff, display_ram);//»°œ˚∫Ø ˝
 153   6                                              tm1629_load();
 154   6                                              display();
 155   6                                              goto standby;
 156   6                                      }
 157   5      
 158   5                                      tm1629_clear();//«Â∆¡
 159   5                                      mcu_to_computer(0x91, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 160   5                                      decoder_temp_to_mcuram(display_ram, temp_buff);//»Áπ˚∑˚∫œµƒª∞  Ω´¡Ÿ ± ˝◊Èµƒ ˝æ›“∆»Îµ•∆¨ª˙‘›¥Ê ˝◊È 8◊÷Ω
             -⁄◊™6◊÷Ω⁄
 161   5                                      tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
 162   5                                      display();//œ‘ æ ˝¬Îπ‹
 163   5      #ifdef DEBUG
                                              uart_printf("decoder success!");
              #endif
 166   5      
 167   5                                      set_func_index(DECODER_MENU);;//¥À ±Ã¯»ÎΩ‚¬Î≤Àµ•£¨Œ™œ¬“ª¥ŒΩ‚¬Î◊ˆ◊º±∏
 168   5                                      clear_again_receive_rf_decoder_finished();//«Â≥˝Ω‚¬ÎÕÍ≥…±Í÷æŒª
 169   5                                      goto standby;
 170   5      
 171   5                              }
 172   4      standby:
 173   4                               break;
C51 COMPILER V9.00   DECODER                                                               10/30/2015 11:43:42 PAGE 4   

 174   4                      }
 175   3      
 176   3                      case DECODER_MENU: //Ω‚¬Î≤Àµ•œ¬
 177   3                      {
 178   4                              set_logout_cycle_table(0);//—≠ª∑∏˙œ˙∫≈÷ÿ–¬º∆ ˝
 179   4                               //º¸≈ÃπÊ‘Ú
 180   4                              if ((old2_RF_RECE_REG[2] & 0xf0) == 0x00 && ((((old2_RF_RECE_REG[0] >> 4) == Two_Menu_F7_E1_temp) && (o
             -ld2_RF_RECE_REG[0] >> 4) < 10) || ((Two_Menu_F7_E1_temp == 10) && (old2_RF_RECE_REG[0] >> 4) < 10)))//º¸≈ÃπÊ‘Ú£¨≥Ã–Ú∞¥ƒ¨
             -»œµƒ¿¥±‡
 181   4                              {
 182   5                                      if (Two_Menu_F8_E1_temp == 1)  //Œ™∞¥º¸÷µ
 183   5                                      {
 184   6                                              temp_buff[0] = single_key[old2_RF_RECE_REG[2] & 0x0f];
 185   6                                      }
 186   5                                      else
 187   5                                      {
 188   6                                              temp_buff[0] = multiple_key[old2_RF_RECE_REG[2] & 0x0f];
 189   6                                      }
 190   5                                      temp_buff[1] = old2_RF_RECE_REG[0] >> 4;        //Œ™∑¿«¯∫≈
 191   5                                      temp_buff[2] = old2_RF_RECE_REG[0] & 0x0f;      //Œ™3Œª◊È¬Îµ⁄“ªŒª
 192   5                                      temp_buff[3] = old2_RF_RECE_REG[1] >> 4;        //Œ™3Œª◊È¬Îµ⁄∂˛Œª
 193   5                                      temp_buff[4] = old2_RF_RECE_REG[1] & 0x0f;      //Œ™3Œª◊È¬Îµ⁄»˝Œª
 194   5                                      temp_buff[5] = old2_RF_RECE_REG[0];                     //±∏”√œÓ,‘›«“¥Êµ⁄“ªŒªID¬Î
 195   5                                      temp_buff[6] = old2_RF_RECE_REG[1];                     //±∏”√œÓ,‘›«“¥Êµ⁄∂˛ŒªID¬Î
 196   5                                      temp_buff[7] = old2_RF_RECE_REG[2];                     //±∏”√œÓ,‘›«“¥Êµ⁄»˝ŒªID¬Î
 197   5                                      if (Two_Menu_F3_E1_temp == 1)                           //Œ™º¥ ±ƒ£ Ω
 198   5                                      {       
 199   6                                              if (temp_buff[0] != QUXIAO_1 && temp_buff[0])
 200   6                                              {
 201   7                                                      for (l = 0; l < Two_Menu_F6_E2_temp; l++)
 202   7                                                      {
 203   8                                                              submenuf6_1(Two_Menu_F6_E1_temp, temp_buff, temp_buff[0], old2_RF_RECE_REG[2] & 0x0f);
 204   8                                                      }
 205   7                                              }
 206   6                                              else
 207   6                                              {
 208   7                                                      mcu_to_computer(0x92, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 209   7                                                      Cancel_funtion(temp_buff, display_ram);//»°œ˚∫Ø ˝
 210   7                                                      tm1629_load();
 211   7                                                      display();
 212   7                                                      break;
 213   7                                              }
 214   6                                              mcu_to_computer(0x91, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 215   6                                              Search_funtion(temp_buff, display_ram);
 216   6      
 217   6                                              for (l = Two_Menu_F3_E2_temp; l>1; l--) //’˚ÃÂÕ˘œ¬“∆“ª◊È ˝æ›
 218   6                                              {
 219   7                                                      mcuram_to_mcuram_down(display_ram + ((l - 2)<<3));
 220   7                                              }
 221   6                                              for (l = 0; l<6; l++) //Ω≤µ⁄“ª◊È ˝æ›«Â0
 222   6                                              {
 223   7                                                      display_ram[l] = 0;
 224   7                                              }
 225   6                                                      
 226   6                                              decoder_temp_to_mcuram(display_ram, temp_buff); //»Áπ˚∑˚∫œµƒª∞  Ω´¡Ÿ ± ˝◊Èµƒ ˝æ›“∆»Îµ•∆¨ª˙‘›¥Ê ˝◊È 8◊
             -÷Ω⁄◊™6◊÷Ω⁄                        
 227   6                                              tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
 228   6                                              display();//œ‘ æ ˝¬Îπ‹
 229   6                                      }
 230   5                                      else if (Two_Menu_F3_E1_temp == 2)//Œ™—≠ª∑ƒ£ Ω
 231   5                                      {
 232   6                                              if (temp_buff[0] == QUXIAO_1 || temp_buff[0] == 0)
C51 COMPILER V9.00   DECODER                                                               10/30/2015 11:43:42 PAGE 5   

 233   6                                              {
 234   7                                                      mcu_to_computer(0x92, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 235   7                                                      Cancel_funtion(temp_buff, display_ram);//»°œ˚∫Ø ˝
 236   7                                                      tm1629_load();
 237   7                                                      display();
 238   7                                                      break;
 239   7                                              }
 240   6                                              for (k = 0; k < Two_Menu_F3_E2_temp; k++)
 241   6                                              {
 242   7                                                      if (display_ram[(k << 3) + 1] == temp_buff[1] && display_ram[(k << 3) + 2] == temp_buff[2] && displa
             -y_ram[(k << 3) + 3] == temp_buff[3] && display_ram[(k << 3) + 4] == temp_buff[4])
 243   7                                                      {
 244   8                                                              index = k;
 245   8                                                              decoder_temp_to_mcuram(display_ram + (k << 3), temp_buff);
 246   8                                                              tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
 247   8                                                              display();//œ‘ æ ˝¬Îπ‹
 248   8                                                              break;
 249   8                                                      }
 250   7                                              }
 251   6      
 252   6                                              if (index == Two_Menu_F3_E2_temp)
 253   6                                              {
 254   7                                                      for (k = 0; k < Two_Menu_F3_E2_temp; k++)
 255   7                                                      {
 256   8                                                              if (display_ram[(k << 3)] == 0)//’“≥ˆŒª”⁄∂”¡–◊Ó∫Ûµƒƒ«∏ˆµ„
 257   8                                                              {
 258   9                                                                      mcu_to_computer(0x91, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 259   9                                                                      decoder_temp_to_mcuram(display_ram + (k << 3), temp_buff);
 260   9                                                                      tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
 261   9                                                                      display();//œ‘ æ ˝¬Îπ‹
 262   9                                                                      break;
 263   9      
 264   9                                                              }
 265   8                                                      }
 266   7                                              }
 267   6                                      }
 268   5                                      //clear_again_receive_rf_decoder_finished();//«Â≥˝Ω‚¬ÎÕÍ≥…±Í÷æŒª
 269   5                                      break;
 270   5                              }
 271   4                              //∫ÙΩ–∆˜◊¢≤·,À—À˜À˘–Ë“™µƒ∫ÙΩ–∆˜
 272   4                              if (Find_RF_EEPROM(&RFtmp, dat))
 273   4                              {
 274   5      #ifdef DEBUG
                                              uart_printf("Find_RF_EEPROM \r\n");
              #endif
 277   5                                      memcpy(temp_buff + 1, RFtmp.region, 4);
 278   5      
 279   5                                      temp_buff[7] = old2_RF_RECE_REG[2];
 280   5                                      if (temp_buff[0] < 50)
 281   5                                      {
 282   6                                              if (Two_Menu_F8_E1_temp == 1)  //Œ™∞¥º¸÷µ
 283   6                                              {
 284   7      
 285   7                                                      temp_buff[0] = single_key[old2_RF_RECE_REG[2] & 0x0f];
 286   7                                              }
 287   6                                              else
 288   6                                              {
 289   7      
 290   7                                                      temp_buff[0] = multiple_key[old2_RF_RECE_REG[2] & 0x0f];
 291   7                                              }
 292   6                                      }
 293   5      
C51 COMPILER V9.00   DECODER                                                               10/30/2015 11:43:42 PAGE 6   

 294   5                                      if (Two_Menu_F3_E1_temp == 1)//Œ™º¥ ±ƒ£ Ω
 295   5                                      {
 296   6      
 297   6                                              if (temp_buff[0] != QUXIAO_1 && temp_buff[0])
 298   6                                              {
 299   7      #ifdef DEBUG
                                                              uart_printf("cancen funtion fault \r\n");
              #endif
 302   7                                                      for (l = 0; l < Two_Menu_F6_E2_temp; l++)
 303   7                                                      {
 304   8                                                              submenuf6_1(Two_Menu_F6_E1_temp, temp_buff, temp_buff[0], old2_RF_RECE_REG[2] & 0x0f);
 305   8                                                      }
 306   7                                              }
 307   6                                              else
 308   6                                              {
 309   7      #ifdef DEBUG
                                                              uart_printf("cancen funtion success \r\n");
              #endif
 312   7                                                      mcu_to_computer(0x92, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 313   7                                                      Cancel_funtion(temp_buff, display_ram);//»°œ˚∫Ø ˝
 314   7                                                      tm1629_load();
 315   7                                                      display();
 316   7                                                      goto decoder;
 317   7                                              }
 318   6      
 319   6                                              mcu_to_computer(0x91, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 320   6                                              Search_funtion(temp_buff, display_ram);
 321   6      
 322   6                                              for (l = Two_Menu_F3_E2_temp; l > 1; l--) //’˚ÃÂÕ˘œ¬“∆“ª◊È ˝æ›
 323   6                                              {
 324   7                                                      mcuram_to_mcuram_down(display_ram + ((l - 2) << 3));
 325   7                                              }
 326   6                                              for (l = 0; l < 6; l++) //Ω≤µ⁄“ª◊È ˝æ›«Â0
 327   6                                              {
 328   7                                                      display_ram[l] = 0;
 329   7                                              }
 330   6      
 331   6                                              decoder_temp_to_mcuram(display_ram, temp_buff); //»Áπ˚∑˚∫œµƒª∞  Ω´¡Ÿ ± ˝◊Èµƒ ˝æ›“∆»Îµ•∆¨ª˙‘›¥Ê ˝◊È 8◊
             -÷Ω⁄◊™6◊÷Ω⁄
 332   6                                              tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
 333   6                                              display();//œ‘ æ ˝¬Îπ‹
 334   6                                      }
 335   5                                      else if (Two_Menu_F3_E1_temp == 2)//Œ™—≠ª∑ƒ£ Ω
 336   5                                      {
 337   6                                              if (temp_buff[0] == QUXIAO_1 || temp_buff[0] == 0)
 338   6                                              {
 339   7                                                      mcu_to_computer(0x92, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 340   7                                                      Cancel_funtion(temp_buff, display_ram);//»°œ˚∫Ø ˝
 341   7                                                      tm1629_load();
 342   7                                                      display();
 343   7                                                      break;
 344   7                                              }
 345   6      
 346   6                                              for (k = 0; k < Two_Menu_F3_E2_temp; k++)
 347   6                                              {
 348   7                                                      if (display_ram[(k << 3) + 1] == temp_buff[1] && display_ram[(k << 3) + 2] == temp_buff[2] && displa
             -y_ram[(k << 3) + 3] == temp_buff[3] && display_ram[(k << 3) + 4] == temp_buff[4])
 349   7                                                      {
 350   8                                                              index = k;
 351   8                                                              decoder_temp_to_mcuram(display_ram + (k << 3), temp_buff);
 352   8                                                              tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
 353   8                                                              display();//œ‘ æ ˝¬Îπ‹
C51 COMPILER V9.00   DECODER                                                               10/30/2015 11:43:42 PAGE 7   

 354   8                                                              break;
 355   8                                                      }
 356   7                                              }
 357   6      
 358   6                                              if (index == Two_Menu_F3_E2_temp)
 359   6                                              {
 360   7                                                      for (k = 0; k < Two_Menu_F3_E2_temp; k++)
 361   7                                                      {
 362   8                                                              if (display_ram[(k << 3)] == 0)//’“≥ˆŒª”⁄∂”¡–◊Ó∫Ûµƒƒ«∏ˆµ„
 363   8                                                              {
 364   9                                                                      mcu_to_computer(0x91, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 365   9                                                                      decoder_temp_to_mcuram(display_ram + (k << 3), temp_buff);
 366   9                                                                      tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
 367   9                                                                      display();//œ‘ æ ˝¬Îπ‹
 368   9                                                                      break;
 369   9      
 370   9                                                              }
 371   8                                                      }
 372   7                                              }
 373   6                                      }
 374   5      #ifdef DEBUG
                                              uart_printf("decoder success!");
              #endif
 377   5      
 378   5      #ifdef DEBUG
                                              uart_printf("display_ram is %02x %02x %02x %02x.\r\n", (unsigned int)display_ram[0], (unsigned int)dis
             -play_ram[1], (unsigned int)display_ram[2], (unsigned int)display_ram[3]); //≤‚ ‘∞¥º¸º¸÷µ
              #endif
 381   5                                      clear_again_receive_rf_decoder_finished();
 382   5                                      goto decoder;
 383   5      
 384   5                              }
 385   4                                      
 386   4                              
 387   4      decoder:
 388   4                              break;
 389   4                      }
 390   3      
 391   3                      case TWO_MENU_F1_E1_D1:
 392   3                      case TWO_MENU_F1_E1_D2:
 393   3                      case TWO_MENU_F1_E1_D3:
 394   3                      case TWO_MENU_F1_E1_D4:
 395   3                      {
 396   4                              set_func_index(TWO_MENU_F1_E1_D4);
 397   4      
 398   4                              memcpy(tmp.region, Two_Menu_F1_E1, 4);
 399   4                              tmp.rf = ((uint32_t)old2_RF_RECE_REG[0]) << 16 | ((uint32_t)old2_RF_RECE_REG[1]) << 8 | ((uint32_t)old2
             -_RF_RECE_REG[2]);
 400   4                              if (!(register_call_function(&tmp)))// ˝÷µ◊‘∂Øº”1
 401   4                              {
 402   5      #ifdef DEBUG
                                              uart_printf("dat is : %x %x \r\n", (unsigned int)(tmp.rf >> 16), (unsigned int)tmp.rf);
                                              uart_printf("call is %02x %02x %02x %02x.\r\n", (unsigned int)Two_Menu_F1_E1[0], (unsigned int)Two_Men
             -u_F1_E1[1], (unsigned int)Two_Menu_F1_E1[2], (unsigned int)Two_Menu_F1_E1[3]);
                                              uart_printf("caller is rigister success \r\n");
              #endif                                  
 407   5                                      delay10ms();
 408   5                                      if (Two_Menu_F1_E1[3] == 9)
 409   5                                      {
 410   6                                              if (Two_Menu_F1_E1[2] == 9)
 411   6                                              {
 412   7                                                      if (Two_Menu_F1_E1[1] == 9)
C51 COMPILER V9.00   DECODER                                                               10/30/2015 11:43:42 PAGE 8   

 413   7                                                      {
 414   8                                                              Two_Menu_F1_E1[0]++;
 415   8                                                              Two_Menu_F1_E1[1] = 0;
 416   8                                                              Two_Menu_F1_E1[2] = 0;
 417   8                                                              if (Two_Menu_F1_E1[0] == 21)
 418   8                                                              {
 419   9                                                                      Two_Menu_F1_E1[0] = 0;
 420   9                                                                      Two_Menu_F1_E1[3] = 1;
 421   9                                                              }
 422   8                                                              else
 423   8                                                              {
 424   9                                                                      Two_Menu_F1_E1[3] = 1;
 425   9                                                              }
 426   8                                                      }
 427   7                                                      else
 428   7                                                      {
 429   8                                                              Two_Menu_F1_E1[1]++;
 430   8                                                              Two_Menu_F1_E1[2] = 0;
 431   8                                                              Two_Menu_F1_E1[3] = 0;
 432   8                                                      }
 433   7                                              }
 434   6                                              else
 435   6                                              {
 436   7                                                      Two_Menu_F1_E1[2]++;
 437   7                                                      Two_Menu_F1_E1[3] = 0;
 438   7                                              }
 439   6                                      }
 440   5                                      else
 441   5                                              Two_Menu_F1_E1[3]++;
 442   5                              }
 443   4                              break;
 444   4                      }
 445   3      
 446   3                      case TWO_MENU_F1_E2_D1:
 447   3                      case TWO_MENU_F1_E2_D2:
 448   3                      case TWO_MENU_F1_E2_D3:
 449   3                      case TWO_MENU_F1_E2_D4:
 450   3                      {
 451   4                                                                        set_func_index(TWO_MENU_F1_E2_D4);
 452   4                                                                        memcpy(tmp.region, Two_Menu_F1_E2, 4);
 453   4                                                                        tmp.rf = ((uint32_t)old2_RF_RECE_REG[0]) << 16 | ((uint32_t)old2_RF_RECE_REG[1]) << 8 | ((uint32
             -_t)old2_RF_RECE_REG[2]);
 454   4      
 455   4                                                                        if (!register_host_function(&tmp))// ˝÷µ◊‘∂Øº”1
 456   4                                                                        {
 457   5      #ifdef DEBUG
                                                                                        uart_printf("host is %02x %02x %02x .\r\n", (unsigned int)buf_eeprom[5], (unsigned int)buf_eepr
             -om[6], (unsigned int)buf_eeprom[7]); //≤‚ ‘∞¥º¸º¸÷µ
                                                                                        uart_printf("host is %02x %02x %02x %02x.\r\n", (unsigned int)Two_Menu_F1_E2[0], (unsigned int)
             -Two_Menu_F1_E2[1], (unsigned int)Two_Menu_F1_E2[2], (unsigned int)Two_Menu_F1_E2[3]);
                                                                                        uart_printf("host is rigister success \r\n");
              #endif                                  
 462   5                                                                                delay10ms();
 463   5                                                                                if (Two_Menu_F1_E2[3] == 9)
 464   5                                                                                {
 465   6                                                                                        if (Two_Menu_F1_E2[2] == 9)
 466   6                                                                                        {
 467   7                                                                                                if (Two_Menu_F1_E2[1] == 9)
 468   7                                                                                                {
 469   8                                                                                                        Two_Menu_F1_E2[0]++;
 470   8                                                                                                        Two_Menu_F1_E2[1] = 0;
 471   8                                                                                                        Two_Menu_F1_E2[2] = 0;
C51 COMPILER V9.00   DECODER                                                               10/30/2015 11:43:42 PAGE 9   

 472   8                                                                                                        if (Two_Menu_F1_E2[0] == 21)
 473   8                                                                                                        {
 474   9                                                                                                                Two_Menu_F1_E2[0] = 0;
 475   9                                                                                                                Two_Menu_F1_E2[3] = 1;
 476   9                                                                                                        }
 477   8                                                                                                        else
 478   8                                                                                                        {
 479   9                                                                                                                Two_Menu_F1_E2[3] = 1;
 480   9                                                                                                        }
 481   8      
 482   8      
 483   8                                                                                                }
 484   7                                                                                                else
 485   7                                                                                                {
 486   8                                                                                                        Two_Menu_F1_E2[1]++;
 487   8                                                                                                        Two_Menu_F1_E2[2] = 0;
 488   8                                                                                                        Two_Menu_F1_E2[3] = 0;
 489   8                                                                                                }
 490   7                                                                                        }
 491   6                                                                                        else
 492   6                                                                                        {
 493   7                                                                                                Two_Menu_F1_E2[2]++;
 494   7                                                                                                Two_Menu_F1_E2[3] = 0;
 495   7                                                                                        }
 496   6                                                                                }
 497   5                                                                                else
 498   5                                                                                        Two_Menu_F1_E2[3]++;
 499   5                                                                        }
 500   4                                                                        break;
 501   4                      }
 502   3      
 503   3                      case TWO_MENU_F1_E3_D1:
 504   3                      case TWO_MENU_F1_E3_D2:
 505   3                      case TWO_MENU_F1_E3_D3:
 506   3                      case TWO_MENU_F1_E3_D4:
 507   3                      {
 508   4                              set_func_index(TWO_MENU_F1_E3_D4);
 509   4      
 510   4                              memcpy(tmp.region, Two_Menu_F1_E3, 4);
 511   4                              tmp.rf = ((uint32_t)old2_RF_RECE_REG[0]) << 16 | ((uint32_t)old2_RF_RECE_REG[1]) << 8 | ((uint32_t)old2
             -_RF_RECE_REG[2]);
 512   4      
 513   4                              if (!register_alarm_function(&tmp))// ˝÷µ◊‘∂Øº”1
 514   4                              {
 515   5      #ifdef DEBUG
                                              uart_printf("alarm is %02x %02x %02x .\r\n", (unsigned int)buf_eeprom[5], (unsigned int)buf_eeprom[6],
             - (unsigned int)buf_eeprom[7]); //≤‚ ‘∞¥º¸º¸÷µ
                                              uart_printf("alarm is %02x %02x %02x %02x.\r\n", (unsigned int)Two_Menu_F1_E3[0], (unsigned int)Two_Me
             -nu_F1_E3[1], (unsigned int)Two_Menu_F1_E3[2], (unsigned int)Two_Menu_F1_E3[3]);
                                              uart_printf("alarm is rigister success \r\n");
              #endif                                  
 520   5                                      delay10ms();
 521   5                                      if (Two_Menu_F1_E3[3] == 9)
 522   5                                      {
 523   6                                              if (Two_Menu_F1_E3[2] == 9)
 524   6                                              {
 525   7                                                      if (Two_Menu_F1_E3[1] == 9)
 526   7                                                      {
 527   8                                                              Two_Menu_F1_E3[0]++;
 528   8                                                              Two_Menu_F1_E3[1] = 0;
 529   8                                                              Two_Menu_F1_E3[2] = 0;
 530   8                                                              if (Two_Menu_F1_E3[0] == 21)
C51 COMPILER V9.00   DECODER                                                               10/30/2015 11:43:42 PAGE 10  

 531   8                                                              {
 532   9                                                                      Two_Menu_F1_E3[0] = 0;
 533   9                                                                      Two_Menu_F1_E3[3] = 1;
 534   9                                                              }
 535   8                                                              else
 536   8                                                              {
 537   9                                                                      Two_Menu_F1_E3[3] = 1;
 538   9                                                              }
 539   8                                                      }
 540   7                                                      else
 541   7                                                      {
 542   8                                                              Two_Menu_F1_E3[1]++;
 543   8                                                              Two_Menu_F1_E3[2] = 0;
 544   8                                                              Two_Menu_F1_E3[3] = 0;
 545   8                                                      }
 546   7                                              }
 547   6                                              else
 548   6                                              {
 549   7                                                      Two_Menu_F1_E3[2]++;
 550   7                                                      Two_Menu_F1_E3[3] = 0;
 551   7                                              }
 552   6                                      }
 553   5                                      else
 554   5                                              Two_Menu_F1_E3[3]++;
 555   5                              }
 556   4                              break;
 557   4                      }
 558   3                      case TWO_MENU_F1_E4_D1:
 559   3                      case TWO_MENU_F1_E4_D2:
 560   3                      case TWO_MENU_F1_E4_D3:
 561   3                      case TWO_MENU_F1_E4_D4:
 562   3                      {
 563   4                              set_func_index(TWO_MENU_F1_E4_D4);
 564   4      
 565   4                              memcpy(tmp.region, Two_Menu_F1_E4, 4);
 566   4                              tmp.rf = ((uint32_t)old2_RF_RECE_REG[0]) << 16 | ((uint32_t)old2_RF_RECE_REG[1]) << 8 | ((uint32_t)old2
             -_RF_RECE_REG[2]);
 567   4      
 568   4      
 569   4                              if (!register_cancel_function(&tmp))// ˝÷µ◊‘∂Øº”1
 570   4                              {
 571   5      #ifdef DEBUG
                                              uart_printf("cancel is %02x %02x %02x .\r\n", (unsigned int)buf_eeprom[5], (unsigned int)buf_eeprom[6]
             -, (unsigned int)buf_eeprom[7]); //≤‚ ‘∞¥º¸º¸÷µ
                                              uart_printf("cancel is %02x %02x %02x %02x.\r\n", (unsigned int)Two_Menu_F1_E4[0], (unsigned int)Two_M
             -enu_F1_E4[1], (unsigned int)Two_Menu_F1_E4[2], (unsigned int)Two_Menu_F1_E4[3]);
                                              uart_printf("cancel is rigister success \r\n");
              #endif                                  
 576   5                                      delay10ms();
 577   5                                      if (Two_Menu_F1_E4[3] == 9)
 578   5                                      {
 579   6                                              if (Two_Menu_F1_E4[2] == 9)
 580   6                                              {
 581   7                                                      if (Two_Menu_F1_E4[1] == 9)
 582   7                                                      {
 583   8                                                              Two_Menu_F1_E4[0]++;
 584   8                                                              Two_Menu_F1_E4[1] = 0;
 585   8                                                              Two_Menu_F1_E4[2] = 0;
 586   8                                                              if (Two_Menu_F1_E4[0] == 21)
 587   8                                                              {
 588   9                                                                      Two_Menu_F1_E4[0] = 0;
 589   9                                                                      Two_Menu_F1_E4[3] = 1;
C51 COMPILER V9.00   DECODER                                                               10/30/2015 11:43:42 PAGE 11  

 590   9                                                              }
 591   8                                                              else
 592   8                                                              {
 593   9                                                                      Two_Menu_F1_E4[3] = 1;
 594   9                                                              }
 595   8                                                      }
 596   7                                                      else
 597   7                                                      {
 598   8                                                              Two_Menu_F1_E4[1]++;
 599   8                                                              Two_Menu_F1_E4[2] = 0;
 600   8                                                              Two_Menu_F1_E4[3] = 0;
 601   8                                                      }
 602   7                                              }
 603   6                                              else
 604   6                                              {
 605   7                                                      Two_Menu_F1_E4[2]++;
 606   7                                                      Two_Menu_F1_E4[3] = 0;
 607   7                                              }
 608   6                                      }
 609   5                                      else
 610   5                                              Two_Menu_F1_E4[3]++;
 611   5                              }
 612   4                              break;
 613   4                      }
 614   3                      case TWO_MENU_F8_E2_SET :
 615   3                              set_sound_table(0);
 616   3                              Two_menu_set_success = 1;
 617   3                              if (Two_Menu_F8_E1_temp == 1)
 618   3                              {
 619   4                                      single_key[old2_RF_RECE_REG[2] & 0x0f] = Two_Menu_F8_E2_temp;
 620   4                                      ISendStr(I2C_ADDRESS, SIN_KEY, single_key, 16);
 621   4                              }
 622   3                              else
 623   3                              {
 624   4                                      multiple_key[old2_RF_RECE_REG[2] & 0x0f] = Two_Menu_F8_E2_temp;
 625   4                                      ISendStr(I2C_ADDRESS, MUL_KEY, multiple_key, 16);
 626   4                              }
 627   3      #ifdef DEBUG
                                      uart_printf("single_key£∫  ");
                                      for (i = 0; i < 16; i++)
                                      {
                                              
                                              uart_printf("%02d ", (unsigned int)single_key[i]);
                                      }
                                      uart_printf(" \r\n");
              
                                      uart_printf("multiple_key£∫");
                                      for (i = 0; i < 16; i++)
                                      {
              
                                              uart_printf("%2d ", (unsigned int)multiple_key[i]);
                                      }
                                      uart_printf(" \r\n");
              #endif  
 644   3      
 645   3                              break;
 646   3      
 647   3      
 648   3                      default:break;//ƒ¨»œµƒbreak
 649   3                      }
 650   2                      clear_again_receive_rf_decoder_finished();//«Â≥˝±Í÷æŒª
 651   2              }
C51 COMPILER V9.00   DECODER                                                               10/30/2015 11:43:42 PAGE 12  

 652   1              
 653   1              LogoutProcess();
 654   1              CycleProcess();
 655   1      }
*** WARNING C280 IN LINE 20 OF RECEIVER\DECODER.C: 'i': unreferenced local variable
*** WARNING C280 IN LINE 20 OF RECEIVER\DECODER.C: 'j': unreferenced local variable
 656          
 657          unsigned char return_Two_menu_set_success(void)
 658          {
 659   1              unsigned char temp = 0;
 660   1              temp = Two_menu_set_success;
 661   1              return temp;
 662   1      }
 663          
 664          void set_Two_menu_set_success(unsigned char temp)
 665          {
 666   1              Two_menu_set_success = temp;
 667   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   3365    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      9      41
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
