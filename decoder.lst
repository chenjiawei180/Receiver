C51 COMPILER V9.00   DECODER                                                               10/30/2015 17:38:15 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE DECODER
OBJECT MODULE PLACED IN decoder.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Receiver\decoder.c LARGE BROWSE INCDIR(.\Receiver) DEBUG OBJECTEXTEND PRINT
                    -(.\decoder.lst) OBJECT(decoder.obj)

line level    source

   1          #include "decoder.h"
   2          #include "ev1527.h"
   3          #include "usart.h"
   4          #include "at24c256.h"
   5          #include "key.h"
   6          #include "menu.h"
   7          #include "tm1629.h"
   8          #include "timer.h"
   9          #include "gd5800.h"
  10          #include "com.h"
  11          
  12          unsigned char buf_eeprom[8] = { 0 };//–¥»ÎEEPROM_buf
  13          unsigned char Two_menu_set_success = 0;
  14          
  15          void DecoderProcess(void)
  16          {       
  17   1              RF_def tmp;
  18   1              RF_def RFtmp;
  19   1              uint32_t dat;
  20   1              int state = 0;
  21   1              unsigned char i, j ,l ,k ,index=0;
  22   1              unsigned char temp_buff[8];//Ω‚¬Î”√¡Ÿ ± ˝◊È
  23   1      
  24   1              unsigned char func_index_temp = 0;              //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø
  25   1              unsigned char Two_Menu_F8_E1_temp = 0;  //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø
  26   1              unsigned char Two_Menu_F8_E2_temp = 0;  //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø
  27   1              unsigned char Two_Menu_F3_E1_temp = 0;  //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø    
  28   1              unsigned char Two_Menu_F3_E2_temp = 0;  //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø
  29   1              unsigned char Two_Menu_F7_E1_temp = 0;  //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø
  30   1              unsigned char Two_Menu_F6_E1_temp = 0;  //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø
  31   1              unsigned char Two_Menu_F6_E2_temp = 0;  //¥¥Ω®¡Ÿ ±±‰¡ø£¨”√”⁄∑≈ªÿ∆‰À˚Õ‚≤ø±‰¡ø
  32   1      
  33   1              func_index_temp = return_func_index();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  34   1              Two_Menu_F8_E1_temp = return_Two_Menu_F8_E1();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  35   1              Two_Menu_F8_E2_temp = return_Two_Menu_F8_E2();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  36   1              Two_Menu_F3_E1_temp = return_Two_Menu_F3_E1();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  37   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  38   1              index                       = return_Two_Menu_F3_E2();
  39   1              Two_Menu_F7_E1_temp = return_Two_Menu_F7_E1();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  40   1              Two_Menu_F6_E1_temp = return_Two_Menu_F6_E1();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  41   1              Two_Menu_F6_E2_temp = return_Two_Menu_F6_E2();  //∑µªÿÀ˘–Ë“™µƒÕ‚≤ø±‰¡ø
  42   1      
  43   1              receive_rf_decoder();   //Ω‚¬Î∫Ø ˝
  44   1      
  45   1              if (return_again_receive_rf_decoder_finished() == 1) //±Í÷æŒªµ»”⁄1 Àµ√˜‘⁄2¥ŒºÏ—Èœ¬Õ®π˝,Ω” ’µΩ”––ß¬Î
  46   1              {
  47   2      #ifdef DEBUG
                              uart_printf("decoder_val is %02x %02x %02x .\r\n", (unsigned int)old2_RF_RECE_REG[0], (unsigned int)old2
             -_RF_RECE_REG[1], (unsigned int)old2_RF_RECE_REG[2]); //≤‚ ‘∞¥º¸º¸÷µ
              #endif
  50   2                      dat = ((uint32_t)old2_RF_RECE_REG[0]) << 16 | ((uint32_t)old2_RF_RECE_REG[1]) << 8 | ((uint32_t)old2_RF_
             -RECE_REG[2]);
  51   2                      switch (func_index_temp)
  52   2                      {
C51 COMPILER V9.00   DECODER                                                               10/30/2015 17:38:15 PAGE 2   

  53   3                      case MENU_STANDBY://¥˝ª˙◊¥Ã¨œ¬
  54   3                      {
  55   4                              set_logout_cycle_table(0);//—≠ª∑∏˙œ˙∫≈÷ÿ–¬º∆ ˝
  56   4                              //º¸≈ÃπÊ‘Ú
  57   4                              if ((old2_RF_RECE_REG[2] & 0xf0) == 0x00 && ((((old2_RF_RECE_REG[0] >> 4) == Two_Menu_F7_E1_temp) && (o
             -ld2_RF_RECE_REG[0] >> 4) < 10) ||  ((Two_Menu_F7_E1_temp == 10) && (old2_RF_RECE_REG[0] >> 4) < 10)) )//º¸≈ÃπÊ‘Ú£¨≥Ã–Ú∞¥
             -ƒ¨»œµƒ¿¥±‡
  58   4                              {
  59   5                                      if (Two_Menu_F8_E1_temp == 1)  //Œ™∞¥º¸÷µ
  60   5                                      {
  61   6                                              temp_buff[0] = single_key[old2_RF_RECE_REG[2] & 0x0f] ;
  62   6                                      }
  63   5                                      else
  64   5                                      {
  65   6                                              temp_buff[0] = multiple_key[old2_RF_RECE_REG[2] & 0x0f];
  66   6                                      }   
  67   5                                      temp_buff[1] = old2_RF_RECE_REG[0] >> 4;        //Œ™∑¿«¯∫≈
  68   5                                      temp_buff[2] = old2_RF_RECE_REG[0] & 0x0f;      //Œ™3Œª◊È¬Îµ⁄“ªŒª
  69   5                                      temp_buff[3] = old2_RF_RECE_REG[1] >> 4;        //Œ™3Œª◊È¬Îµ⁄∂˛Œª
  70   5                                      temp_buff[4] = old2_RF_RECE_REG[1] & 0x0f;      //Œ™3Œª◊È¬Îµ⁄»˝Œª
  71   5                                      temp_buff[5] = old2_RF_RECE_REG[0];                     //±∏”√œÓ,‘›«“¥Êµ⁄1ŒªID¬Î
  72   5                                      temp_buff[6] = old2_RF_RECE_REG[1];                     //±∏”√œÓ,‘›«“¥Êµ⁄2ŒªID¬Î
  73   5                                      temp_buff[7] = old2_RF_RECE_REG[2];                     //±∏”√œÓ,‘›«“¥Êµ⁄3ŒªID¬Î
  74   5      
  75   5                                      if (temp_buff[0] != QUXIAO_1 && temp_buff[0])
  76   5                                      {
  77   6                                              for (l = 0; l < Two_Menu_F6_E2_temp; l++)
  78   6                                              {
  79   7                                                      submenuf6_1(Two_Menu_F6_E1_temp, temp_buff, temp_buff[0], old2_RF_RECE_REG[2] & 0x0f);
  80   7                                              }
  81   6                                      }
  82   5                                      else
  83   5                                      {
  84   6                                              Cancel_funtion(temp_buff,display_ram);//»°œ˚∫Ø ˝
  85   6                                              mcu_to_computer(0x92, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
  86   6                                              tm1629_load();
  87   6                                              display();
  88   6                                              break;
  89   6                                      }               
  90   5      
  91   5                                      tm1629_clear();//«Â∆¡
  92   5                                      mcu_to_computer(0x91, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
  93   5                                      decoder_temp_to_mcuram(display_ram, temp_buff);//Ω´¡Ÿ ± ˝◊Èµƒ ˝æ›“∆»Îµ•∆¨ª˙‘›¥Ê ˝◊È 8◊÷Ω⁄◊™6◊÷Ω⁄
  94   5                                      tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
  95   5                                      display();//œ‘ æ ˝¬Îπ‹
  96   5                                      set_func_index(DECODER_MENU);//¥À ±Ã¯»ÎΩ‚¬Î≤Àµ•£¨Œ™œ¬“ª¥ŒΩ‚¬Î◊ˆ◊º±∏
  97   5                                      //clear_again_receive_rf_decoder_finished();//«Â≥˝Ω‚¬ÎÕÍ≥…±Í÷æŒª
  98   5      
  99   5                                      break;
 100   5                              }
 101   4                              //∫ÙΩ–∆˜◊¢≤·,À—À˜À˘–Ë“™µƒ∫ÙΩ–∆˜
 102   4      #ifdef DEBUG
                                      uart_printf("dat is : %x %x \r\n", (unsigned int)(dat >> 16), (unsigned int)dat);
              #endif
 105   4                              if (state = Find_RF_EEPROM(&RFtmp, dat))
 106   4                              {
 107   5      #ifdef DEBUG
                                              uart_printf("Find_RF_EEPROM \r\n");
                                              uart_printf("state is : %x \r\n", (unsigned int)state);
              #endif
 111   5                                      if (state == 1)
 112   5                                      {
C51 COMPILER V9.00   DECODER                                                               10/30/2015 17:38:15 PAGE 3   

 113   6                                              temp_buff[0] = QUXIAO_1;
 114   6                                      }
 115   5                                      else if (state == 2)
 116   5                                      {
 117   6                                              temp_buff[0] = BAOJING_1;
 118   6                                      }
 119   5                                      else
 120   5                                      {
 121   6                                              temp_buff[0] = old2_RF_RECE_REG[2] & 0x0f;
 122   6                                      }
 123   5      
 124   5      #ifdef DEBUG
                                              uart_printf("temp[0] is : %x \r\n", (unsigned int)temp_buff[0]);
              #endif
 127   5                                      memcpy(temp_buff+1, RFtmp.region, 4);
 128   5                                      temp_buff[7] = old2_RF_RECE_REG[2];
 129   5      
 130   5                                      if (temp_buff[0] < 50)
 131   5                                      {
 132   6      #ifdef DEBUG
                                                      uart_printf("temp_buff[0] < 50 \r\n");
              #endif
 135   6                                              if (Two_Menu_F8_E1_temp == 1)  //Œ™∞¥º¸÷µ
 136   6                                              {
 137   7      
 138   7                                                      temp_buff[0] = single_key[old2_RF_RECE_REG[2] & 0x0f];
 139   7                                              }
 140   6                                              else
 141   6                                              {
 142   7      
 143   7                                                      temp_buff[0] = multiple_key[old2_RF_RECE_REG[2] & 0x0f];
 144   7                                              }
 145   6                                      }
 146   5      
 147   5      #ifdef DEBUG
                                              uart_printf("temp[0] is : %x \r\n", (unsigned int)temp_buff[0]);
              #endif
 150   5      
 151   5      
 152   5      #ifdef DEBUG
                                              uart_printf("cancen funtion \r\n");
              #endif
 155   5                                      //”Ô“Ù∫Ø ˝
 156   5                                      if (temp_buff[0] != QUXIAO_1 && temp_buff[0])
 157   5                                      {
 158   6      #ifdef DEBUG
                                                      uart_printf("cancen funtion fault \r\n");
              #endif
 161   6                                              for (l = 0; l < Two_Menu_F6_E2_temp; l++)
 162   6                                              {
 163   7                                                      submenuf6_1(Two_Menu_F6_E1_temp, temp_buff, temp_buff[0], old2_RF_RECE_REG[2] & 0x0f);
 164   7                                              }
 165   6                                      }
 166   5                                      else
 167   5                                      {
 168   6      #ifdef DEBUG
                                                      uart_printf("cancen funtion success \r\n");
              #endif
 171   6                                              mcu_to_computer(0x92, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 172   6                                              Cancel_funtion(temp_buff, display_ram);//»°œ˚∫Ø ˝
 173   6                                              tm1629_load();
 174   6                                              display();
C51 COMPILER V9.00   DECODER                                                               10/30/2015 17:38:15 PAGE 4   

 175   6                                              goto standby;
 176   6                                      }
 177   5      
 178   5                                      tm1629_clear();//«Â∆¡
 179   5                                      mcu_to_computer(0x91, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 180   5                                      decoder_temp_to_mcuram(display_ram, temp_buff);//»Áπ˚∑˚∫œµƒª∞  Ω´¡Ÿ ± ˝◊Èµƒ ˝æ›“∆»Îµ•∆¨ª˙‘›¥Ê ˝◊È 8◊÷Ω
             -⁄◊™6◊÷Ω⁄
 181   5                                      tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
 182   5                                      display();//œ‘ æ ˝¬Îπ‹
 183   5      #ifdef DEBUG
                                              uart_printf("decoder success!");
              #endif
 186   5      
 187   5                                      set_func_index(DECODER_MENU);;//¥À ±Ã¯»ÎΩ‚¬Î≤Àµ•£¨Œ™œ¬“ª¥ŒΩ‚¬Î◊ˆ◊º±∏
 188   5                                      clear_again_receive_rf_decoder_finished();//«Â≥˝Ω‚¬ÎÕÍ≥…±Í÷æŒª
 189   5                                      goto standby;
 190   5      
 191   5                              }
 192   4      standby:
 193   4                               break;
 194   4                      }
 195   3      
 196   3                      case DECODER_MENU: //Ω‚¬Î≤Àµ•œ¬
 197   3                      {
 198   4                              set_logout_cycle_table(0);//—≠ª∑∏˙œ˙∫≈÷ÿ–¬º∆ ˝
 199   4                               //º¸≈ÃπÊ‘Ú
 200   4                              if ((old2_RF_RECE_REG[2] & 0xf0) == 0x00 && ((((old2_RF_RECE_REG[0] >> 4) == Two_Menu_F7_E1_temp) && (o
             -ld2_RF_RECE_REG[0] >> 4) < 10) || ((Two_Menu_F7_E1_temp == 10) && (old2_RF_RECE_REG[0] >> 4) < 10)))//º¸≈ÃπÊ‘Ú£¨≥Ã–Ú∞¥ƒ¨
             -»œµƒ¿¥±‡
 201   4                              {
 202   5                                      if (Two_Menu_F8_E1_temp == 1)  //Œ™∞¥º¸÷µ
 203   5                                      {
 204   6                                              temp_buff[0] = single_key[old2_RF_RECE_REG[2] & 0x0f];
 205   6                                      }
 206   5                                      else
 207   5                                      {
 208   6                                              temp_buff[0] = multiple_key[old2_RF_RECE_REG[2] & 0x0f];
 209   6                                      }
 210   5                                      temp_buff[1] = old2_RF_RECE_REG[0] >> 4;        //Œ™∑¿«¯∫≈
 211   5                                      temp_buff[2] = old2_RF_RECE_REG[0] & 0x0f;      //Œ™3Œª◊È¬Îµ⁄“ªŒª
 212   5                                      temp_buff[3] = old2_RF_RECE_REG[1] >> 4;        //Œ™3Œª◊È¬Îµ⁄∂˛Œª
 213   5                                      temp_buff[4] = old2_RF_RECE_REG[1] & 0x0f;      //Œ™3Œª◊È¬Îµ⁄»˝Œª
 214   5                                      temp_buff[5] = old2_RF_RECE_REG[0];                     //±∏”√œÓ,‘›«“¥Êµ⁄“ªŒªID¬Î
 215   5                                      temp_buff[6] = old2_RF_RECE_REG[1];                     //±∏”√œÓ,‘›«“¥Êµ⁄∂˛ŒªID¬Î
 216   5                                      temp_buff[7] = old2_RF_RECE_REG[2];                     //±∏”√œÓ,‘›«“¥Êµ⁄»˝ŒªID¬Î
 217   5                                      if (Two_Menu_F3_E1_temp == 1)                           //Œ™º¥ ±ƒ£ Ω
 218   5                                      {       
 219   6                                              if (temp_buff[0] != QUXIAO_1 && temp_buff[0])
 220   6                                              {
 221   7                                                      for (l = 0; l < Two_Menu_F6_E2_temp; l++)
 222   7                                                      {
 223   8                                                              submenuf6_1(Two_Menu_F6_E1_temp, temp_buff, temp_buff[0], old2_RF_RECE_REG[2] & 0x0f);
 224   8                                                      }
 225   7                                              }
 226   6                                              else
 227   6                                              {
 228   7                                                      mcu_to_computer(0x92, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 229   7                                                      Cancel_funtion(temp_buff, display_ram);//»°œ˚∫Ø ˝
 230   7                                                      tm1629_load();
 231   7                                                      display();
 232   7                                                      break;
 233   7                                              }
C51 COMPILER V9.00   DECODER                                                               10/30/2015 17:38:15 PAGE 5   

 234   6                                              mcu_to_computer(0x91, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 235   6                                              Search_funtion(temp_buff, display_ram);
 236   6      
 237   6                                              for (l = Two_Menu_F3_E2_temp; l>1; l--) //’˚ÃÂÕ˘œ¬“∆“ª◊È ˝æ›
 238   6                                              {
 239   7                                                      mcuram_to_mcuram_down(display_ram + ((l - 2)<<3));
 240   7                                              }
 241   6                                              for (l = 0; l<6; l++) //Ω≤µ⁄“ª◊È ˝æ›«Â0
 242   6                                              {
 243   7                                                      display_ram[l] = 0;
 244   7                                              }
 245   6                                                      
 246   6                                              decoder_temp_to_mcuram(display_ram, temp_buff); //»Áπ˚∑˚∫œµƒª∞  Ω´¡Ÿ ± ˝◊Èµƒ ˝æ›“∆»Îµ•∆¨ª˙‘›¥Ê ˝◊È 8◊
             -÷Ω⁄◊™6◊÷Ω⁄                        
 247   6                                              tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
 248   6                                              display();//œ‘ æ ˝¬Îπ‹
 249   6                                      }
 250   5                                      else if (Two_Menu_F3_E1_temp == 2)//Œ™—≠ª∑ƒ£ Ω
 251   5                                      {
 252   6                                              if (temp_buff[0] == QUXIAO_1 || temp_buff[0] == 0)
 253   6                                              {
 254   7                                                      mcu_to_computer(0x92, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 255   7                                                      Cancel_funtion(temp_buff, display_ram);//»°œ˚∫Ø ˝
 256   7                                                      tm1629_load();
 257   7                                                      display();
 258   7                                                      break;
 259   7                                              }
 260   6                                              for (k = 0; k < Two_Menu_F3_E2_temp; k++)
 261   6                                              {
 262   7                                                      if (display_ram[(k << 3) + 1] == temp_buff[1] && display_ram[(k << 3) + 2] == temp_buff[2] && displa
             -y_ram[(k << 3) + 3] == temp_buff[3] && display_ram[(k << 3) + 4] == temp_buff[4])
 263   7                                                      {
 264   8                                                              index = k;
 265   8                                                              decoder_temp_to_mcuram(display_ram + (k << 3), temp_buff);
 266   8                                                              tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
 267   8                                                              display();//œ‘ æ ˝¬Îπ‹
 268   8                                                              break;
 269   8                                                      }
 270   7                                              }
 271   6      
 272   6                                              if (index == Two_Menu_F3_E2_temp)
 273   6                                              {
 274   7                                                      for (k = 0; k < Two_Menu_F3_E2_temp; k++)
 275   7                                                      {
 276   8                                                              if (display_ram[(k << 3)] == 0)//’“≥ˆŒª”⁄∂”¡–◊Ó∫Ûµƒƒ«∏ˆµ„
 277   8                                                              {
 278   9                                                                      mcu_to_computer(0x91, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 279   9                                                                      decoder_temp_to_mcuram(display_ram + (k << 3), temp_buff);
 280   9                                                                      tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
 281   9                                                                      display();//œ‘ æ ˝¬Îπ‹
 282   9                                                                      break;
 283   9      
 284   9                                                              }
 285   8                                                      }
 286   7                                              }
 287   6                                      }
 288   5                                      //clear_again_receive_rf_decoder_finished();//«Â≥˝Ω‚¬ÎÕÍ≥…±Í÷æŒª
 289   5                                      break;
 290   5                              }
 291   4                              //∫ÙΩ–∆˜◊¢≤·,À—À˜À˘–Ë“™µƒ∫ÙΩ–∆˜
 292   4                              if (state = Find_RF_EEPROM(&RFtmp, dat))
 293   4                              {
C51 COMPILER V9.00   DECODER                                                               10/30/2015 17:38:15 PAGE 6   

 294   5      #ifdef DEBUG
                                              uart_printf("Find_RF_EEPROM \r\n");
              #endif
 297   5                                      if (state == 1)
 298   5                                      {
 299   6                                              temp_buff[0] = QUXIAO_1;
 300   6                                      }
 301   5                                      else if (state == 2)
 302   5                                      {
 303   6                                              temp_buff[0] = BAOJING_1;
 304   6                                      }
 305   5                                      else
 306   5                                      {
 307   6                                              temp_buff[0] = old2_RF_RECE_REG[2] & 0x0f;
 308   6                                      }
 309   5      
 310   5                                      memcpy(temp_buff + 1, RFtmp.region, 4);
 311   5                                      temp_buff[7] = old2_RF_RECE_REG[2];
 312   5      
 313   5                                      if (temp_buff[0] < 50)
 314   5                                      {
 315   6                                              if (Two_Menu_F8_E1_temp == 1)  //Œ™∞¥º¸÷µ
 316   6                                              {
 317   7      
 318   7                                                      temp_buff[0] = single_key[old2_RF_RECE_REG[2] & 0x0f];
 319   7                                              }
 320   6                                              else
 321   6                                              {
 322   7      
 323   7                                                      temp_buff[0] = multiple_key[old2_RF_RECE_REG[2] & 0x0f];
 324   7                                              }
 325   6                                      }
 326   5      
 327   5                                      if (Two_Menu_F3_E1_temp == 1)//Œ™º¥ ±ƒ£ Ω
 328   5                                      {
 329   6      
 330   6                                              if (temp_buff[0] != QUXIAO_1 && temp_buff[0])
 331   6                                              {
 332   7      #ifdef DEBUG
                                                              uart_printf("cancen funtion fault \r\n");
              #endif
 335   7                                                      for (l = 0; l < Two_Menu_F6_E2_temp; l++)
 336   7                                                      {
 337   8                                                              submenuf6_1(Two_Menu_F6_E1_temp, temp_buff, temp_buff[0], old2_RF_RECE_REG[2] & 0x0f);
 338   8                                                      }
 339   7                                              }
 340   6                                              else
 341   6                                              {
 342   7      #ifdef DEBUG
                                                              uart_printf("cancen funtion success \r\n");
              #endif
 345   7                                                      mcu_to_computer(0x92, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 346   7                                                      Cancel_funtion(temp_buff, display_ram);//»°œ˚∫Ø ˝
 347   7                                                      tm1629_load();
 348   7                                                      display();
 349   7                                                      goto decoder;
 350   7                                              }
 351   6      
 352   6                                              mcu_to_computer(0x91, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 353   6                                              Search_funtion(temp_buff, display_ram);
 354   6      
 355   6                                              for (l = Two_Menu_F3_E2_temp; l > 1; l--) //’˚ÃÂÕ˘œ¬“∆“ª◊È ˝æ›
C51 COMPILER V9.00   DECODER                                                               10/30/2015 17:38:15 PAGE 7   

 356   6                                              {
 357   7                                                      mcuram_to_mcuram_down(display_ram + ((l - 2) << 3));
 358   7                                              }
 359   6                                              for (l = 0; l < 6; l++) //Ω≤µ⁄“ª◊È ˝æ›«Â0
 360   6                                              {
 361   7                                                      display_ram[l] = 0;
 362   7                                              }
 363   6      
 364   6                                              decoder_temp_to_mcuram(display_ram, temp_buff); //»Áπ˚∑˚∫œµƒª∞  Ω´¡Ÿ ± ˝◊Èµƒ ˝æ›“∆»Îµ•∆¨ª˙‘›¥Ê ˝◊È 8◊
             -÷Ω⁄◊™6◊÷Ω⁄
 365   6                                              tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
 366   6                                              display();//œ‘ æ ˝¬Îπ‹
 367   6                                      }
 368   5                                      else if (Two_Menu_F3_E1_temp == 2)//Œ™—≠ª∑ƒ£ Ω
 369   5                                      {
 370   6                                              if (temp_buff[0] == QUXIAO_1 || temp_buff[0] == 0)
 371   6                                              {
 372   7                                                      mcu_to_computer(0x92, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 373   7                                                      Cancel_funtion(temp_buff, display_ram);//»°œ˚∫Ø ˝
 374   7                                                      tm1629_load();
 375   7                                                      display();
 376   7                                                      break;
 377   7                                              }
 378   6      
 379   6                                              for (k = 0; k < Two_Menu_F3_E2_temp; k++)
 380   6                                              {
 381   7                                                      if (display_ram[(k << 3) + 1] == temp_buff[1] && display_ram[(k << 3) + 2] == temp_buff[2] && displa
             -y_ram[(k << 3) + 3] == temp_buff[3] && display_ram[(k << 3) + 4] == temp_buff[4])
 382   7                                                      {
 383   8                                                              index = k;
 384   8                                                              decoder_temp_to_mcuram(display_ram + (k << 3), temp_buff);
 385   8                                                              tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
 386   8                                                              display();//œ‘ æ ˝¬Îπ‹
 387   8                                                              break;
 388   8                                                      }
 389   7                                              }
 390   6      
 391   6                                              if (index == Two_Menu_F3_E2_temp)
 392   6                                              {
 393   7                                                      for (k = 0; k < Two_Menu_F3_E2_temp; k++)
 394   7                                                      {
 395   8                                                              if (display_ram[(k << 3)] == 0)//’“≥ˆŒª”⁄∂”¡–◊Ó∫Ûµƒƒ«∏ˆµ„
 396   8                                                              {
 397   9                                                                      mcu_to_computer(0x91, temp_buff, old2_RF_RECE_REG[2] & 0x0f);//…œŒªª˙
 398   9                                                                      decoder_temp_to_mcuram(display_ram + (k << 3), temp_buff);
 399   9                                                                      tm1629_load();//µ•∆¨ª˙∞— ˝◊Èƒ⁄»›‘ÿ»Î ˝¬Îπ‹œ‘¥Ê ˝◊È÷–
 400   9                                                                      display();//œ‘ æ ˝¬Îπ‹
 401   9                                                                      break;
 402   9      
 403   9                                                              }
 404   8                                                      }
 405   7                                              }
 406   6                                      }
 407   5      #ifdef DEBUG
                                              uart_printf("decoder success!");
              #endif
 410   5                                      clear_again_receive_rf_decoder_finished();
 411   5                                      goto decoder;
 412   5      
 413   5                              }
 414   4                                      
 415   4                              
C51 COMPILER V9.00   DECODER                                                               10/30/2015 17:38:15 PAGE 8   

 416   4      decoder:
 417   4                              break;
 418   4                      }
 419   3      
 420   3                      case TWO_MENU_F1_E1_D1:
 421   3                      case TWO_MENU_F1_E1_D2:
 422   3                      case TWO_MENU_F1_E1_D3:
 423   3                      case TWO_MENU_F1_E1_D4:
 424   3                      {
 425   4                              set_func_index(TWO_MENU_F1_E1_D4);
 426   4      
 427   4                              memcpy(tmp.region, Two_Menu_F1_E1, 4);
 428   4                              tmp.rf = ((uint32_t)old2_RF_RECE_REG[0]) << 16 | ((uint32_t)old2_RF_RECE_REG[1]) << 8 | ((uint32_t)old2
             -_RF_RECE_REG[2]);
 429   4                              if (!(register_call_function(&tmp)))// ˝÷µ◊‘∂Øº”1
 430   4                              {
 431   5      #ifdef DEBUG
                                              uart_printf("dat is : %x %x \r\n", (unsigned int)(tmp.rf >> 16), (unsigned int)tmp.rf);
                                              uart_printf("call is %02x %02x %02x %02x.\r\n", (unsigned int)Two_Menu_F1_E1[0], (unsigned int)Two_Men
             -u_F1_E1[1], (unsigned int)Two_Menu_F1_E1[2], (unsigned int)Two_Menu_F1_E1[3]);
                                              uart_printf("caller is rigister success \r\n");
              #endif                                  
 436   5                                      delay10ms();
 437   5                                      if (Two_Menu_F1_E1[3] == 9)
 438   5                                      {
 439   6                                              if (Two_Menu_F1_E1[2] == 9)
 440   6                                              {
 441   7                                                      if (Two_Menu_F1_E1[1] == 9)
 442   7                                                      {
 443   8                                                              Two_Menu_F1_E1[0]++;
 444   8                                                              Two_Menu_F1_E1[1] = 0;
 445   8                                                              Two_Menu_F1_E1[2] = 0;
 446   8                                                              if (Two_Menu_F1_E1[0] == 21)
 447   8                                                              {
 448   9                                                                      Two_Menu_F1_E1[0] = 0;
 449   9                                                                      Two_Menu_F1_E1[3] = 1;
 450   9                                                              }
 451   8                                                              else
 452   8                                                              {
 453   9                                                                      Two_Menu_F1_E1[3] = 1;
 454   9                                                              }
 455   8                                                      }
 456   7                                                      else
 457   7                                                      {
 458   8                                                              Two_Menu_F1_E1[1]++;
 459   8                                                              Two_Menu_F1_E1[2] = 0;
 460   8                                                              Two_Menu_F1_E1[3] = 0;
 461   8                                                      }
 462   7                                              }
 463   6                                              else
 464   6                                              {
 465   7                                                      Two_Menu_F1_E1[2]++;
 466   7                                                      Two_Menu_F1_E1[3] = 0;
 467   7                                              }
 468   6                                      }
 469   5                                      else
 470   5                                              Two_Menu_F1_E1[3]++;
 471   5                              }
 472   4                              break;
 473   4                      }
 474   3      
 475   3                      case TWO_MENU_F1_E2_D1:
C51 COMPILER V9.00   DECODER                                                               10/30/2015 17:38:15 PAGE 9   

 476   3                      case TWO_MENU_F1_E2_D2:
 477   3                      case TWO_MENU_F1_E2_D3:
 478   3                      case TWO_MENU_F1_E2_D4:
 479   3                      {
 480   4                                                                        set_func_index(TWO_MENU_F1_E2_D4);
 481   4                                                                        memcpy(tmp.region, Two_Menu_F1_E2, 4);
 482   4                                                                        tmp.rf = ((uint32_t)old2_RF_RECE_REG[0]) << 16 | ((uint32_t)old2_RF_RECE_REG[1]) << 8 | ((uint32
             -_t)old2_RF_RECE_REG[2]);
 483   4      
 484   4                                                                        if (!register_host_function(&tmp))// ˝÷µ◊‘∂Øº”1
 485   4                                                                        {
 486   5      #ifdef DEBUG
                                                                                        uart_printf("host is %02x %02x %02x .\r\n", (unsigned int)buf_eeprom[5], (unsigned int)buf_eepr
             -om[6], (unsigned int)buf_eeprom[7]); //≤‚ ‘∞¥º¸º¸÷µ
                                                                                        uart_printf("host is %02x %02x %02x %02x.\r\n", (unsigned int)Two_Menu_F1_E2[0], (unsigned int)
             -Two_Menu_F1_E2[1], (unsigned int)Two_Menu_F1_E2[2], (unsigned int)Two_Menu_F1_E2[3]);
                                                                                        uart_printf("host is rigister success \r\n");
              #endif                                  
 491   5                                                                                delay10ms();
 492   5                                                                                if (Two_Menu_F1_E2[3] == 9)
 493   5                                                                                {
 494   6                                                                                        if (Two_Menu_F1_E2[2] == 9)
 495   6                                                                                        {
 496   7                                                                                                if (Two_Menu_F1_E2[1] == 9)
 497   7                                                                                                {
 498   8                                                                                                        Two_Menu_F1_E2[0]++;
 499   8                                                                                                        Two_Menu_F1_E2[1] = 0;
 500   8                                                                                                        Two_Menu_F1_E2[2] = 0;
 501   8                                                                                                        if (Two_Menu_F1_E2[0] == 21)
 502   8                                                                                                        {
 503   9                                                                                                                Two_Menu_F1_E2[0] = 0;
 504   9                                                                                                                Two_Menu_F1_E2[3] = 1;
 505   9                                                                                                        }
 506   8                                                                                                        else
 507   8                                                                                                        {
 508   9                                                                                                                Two_Menu_F1_E2[3] = 1;
 509   9                                                                                                        }
 510   8      
 511   8      
 512   8                                                                                                }
 513   7                                                                                                else
 514   7                                                                                                {
 515   8                                                                                                        Two_Menu_F1_E2[1]++;
 516   8                                                                                                        Two_Menu_F1_E2[2] = 0;
 517   8                                                                                                        Two_Menu_F1_E2[3] = 0;
 518   8                                                                                                }
 519   7                                                                                        }
 520   6                                                                                        else
 521   6                                                                                        {
 522   7                                                                                                Two_Menu_F1_E2[2]++;
 523   7                                                                                                Two_Menu_F1_E2[3] = 0;
 524   7                                                                                        }
 525   6                                                                                }
 526   5                                                                                else
 527   5                                                                                        Two_Menu_F1_E2[3]++;
 528   5                                                                        }
 529   4                                                                        break;
 530   4                      }
 531   3      
 532   3                      case TWO_MENU_F1_E3_D1:
 533   3                      case TWO_MENU_F1_E3_D2:
 534   3                      case TWO_MENU_F1_E3_D3:
C51 COMPILER V9.00   DECODER                                                               10/30/2015 17:38:15 PAGE 10  

 535   3                      case TWO_MENU_F1_E3_D4:
 536   3                      {
 537   4                              set_func_index(TWO_MENU_F1_E3_D4);
 538   4      
 539   4                              memcpy(tmp.region, Two_Menu_F1_E3, 4);
 540   4                              tmp.rf = ((uint32_t)old2_RF_RECE_REG[0]) << 16 | ((uint32_t)old2_RF_RECE_REG[1]) << 8 | ((uint32_t)old2
             -_RF_RECE_REG[2]);
 541   4      
 542   4                              if (!register_alarm_function(&tmp))// ˝÷µ◊‘∂Øº”1
 543   4                              {
 544   5      #ifdef DEBUG
                                              uart_printf("alarm is %02x %02x %02x .\r\n", (unsigned int)buf_eeprom[5], (unsigned int)buf_eeprom[6],
             - (unsigned int)buf_eeprom[7]); //≤‚ ‘∞¥º¸º¸÷µ
                                              uart_printf("alarm is %02x %02x %02x %02x.\r\n", (unsigned int)Two_Menu_F1_E3[0], (unsigned int)Two_Me
             -nu_F1_E3[1], (unsigned int)Two_Menu_F1_E3[2], (unsigned int)Two_Menu_F1_E3[3]);
                                              uart_printf("alarm is rigister success \r\n");
              #endif                                  
 549   5                                      delay10ms();
 550   5                                      if (Two_Menu_F1_E3[3] == 9)
 551   5                                      {
 552   6                                              if (Two_Menu_F1_E3[2] == 9)
 553   6                                              {
 554   7                                                      if (Two_Menu_F1_E3[1] == 9)
 555   7                                                      {
 556   8                                                              Two_Menu_F1_E3[0]++;
 557   8                                                              Two_Menu_F1_E3[1] = 0;
 558   8                                                              Two_Menu_F1_E3[2] = 0;
 559   8                                                              if (Two_Menu_F1_E3[0] == 21)
 560   8                                                              {
 561   9                                                                      Two_Menu_F1_E3[0] = 0;
 562   9                                                                      Two_Menu_F1_E3[3] = 1;
 563   9                                                              }
 564   8                                                              else
 565   8                                                              {
 566   9                                                                      Two_Menu_F1_E3[3] = 1;
 567   9                                                              }
 568   8                                                      }
 569   7                                                      else
 570   7                                                      {
 571   8                                                              Two_Menu_F1_E3[1]++;
 572   8                                                              Two_Menu_F1_E3[2] = 0;
 573   8                                                              Two_Menu_F1_E3[3] = 0;
 574   8                                                      }
 575   7                                              }
 576   6                                              else
 577   6                                              {
 578   7                                                      Two_Menu_F1_E3[2]++;
 579   7                                                      Two_Menu_F1_E3[3] = 0;
 580   7                                              }
 581   6                                      }
 582   5                                      else
 583   5                                              Two_Menu_F1_E3[3]++;
 584   5                              }
 585   4                              break;
 586   4                      }
 587   3                      case TWO_MENU_F1_E4_D1:
 588   3                      case TWO_MENU_F1_E4_D2:
 589   3                      case TWO_MENU_F1_E4_D3:
 590   3                      case TWO_MENU_F1_E4_D4:
 591   3                      {
 592   4                              set_func_index(TWO_MENU_F1_E4_D4);
 593   4      
C51 COMPILER V9.00   DECODER                                                               10/30/2015 17:38:15 PAGE 11  

 594   4                              memcpy(tmp.region, Two_Menu_F1_E4, 4);
 595   4                              tmp.rf = ((uint32_t)old2_RF_RECE_REG[0]) << 16 | ((uint32_t)old2_RF_RECE_REG[1]) << 8 | ((uint32_t)old2
             -_RF_RECE_REG[2]);
 596   4      
 597   4      
 598   4                              if (!register_cancel_function(&tmp))// ˝÷µ◊‘∂Øº”1
 599   4                              {
 600   5      #ifdef DEBUG
                                              uart_printf("cancel is %02x %02x %02x .\r\n", (unsigned int)buf_eeprom[5], (unsigned int)buf_eeprom[6]
             -, (unsigned int)buf_eeprom[7]); //≤‚ ‘∞¥º¸º¸÷µ
                                              uart_printf("cancel is %02x %02x %02x %02x.\r\n", (unsigned int)Two_Menu_F1_E4[0], (unsigned int)Two_M
             -enu_F1_E4[1], (unsigned int)Two_Menu_F1_E4[2], (unsigned int)Two_Menu_F1_E4[3]);
                                              uart_printf("cancel is rigister success \r\n");
              #endif                                  
 605   5                                      delay10ms();
 606   5                                      if (Two_Menu_F1_E4[3] == 9)
 607   5                                      {
 608   6                                              if (Two_Menu_F1_E4[2] == 9)
 609   6                                              {
 610   7                                                      if (Two_Menu_F1_E4[1] == 9)
 611   7                                                      {
 612   8                                                              Two_Menu_F1_E4[0]++;
 613   8                                                              Two_Menu_F1_E4[1] = 0;
 614   8                                                              Two_Menu_F1_E4[2] = 0;
 615   8                                                              if (Two_Menu_F1_E4[0] == 21)
 616   8                                                              {
 617   9                                                                      Two_Menu_F1_E4[0] = 0;
 618   9                                                                      Two_Menu_F1_E4[3] = 1;
 619   9                                                              }
 620   8                                                              else
 621   8                                                              {
 622   9                                                                      Two_Menu_F1_E4[3] = 1;
 623   9                                                              }
 624   8                                                      }
 625   7                                                      else
 626   7                                                      {
 627   8                                                              Two_Menu_F1_E4[1]++;
 628   8                                                              Two_Menu_F1_E4[2] = 0;
 629   8                                                              Two_Menu_F1_E4[3] = 0;
 630   8                                                      }
 631   7                                              }
 632   6                                              else
 633   6                                              {
 634   7                                                      Two_Menu_F1_E4[2]++;
 635   7                                                      Two_Menu_F1_E4[3] = 0;
 636   7                                              }
 637   6                                      }
 638   5                                      else
 639   5                                              Two_Menu_F1_E4[3]++;
 640   5                              }
 641   4                              break;
 642   4                      }
 643   3                      case TWO_MENU_F8_E2_SET :
 644   3                              set_sound_table(0);
 645   3                              Two_menu_set_success = 1;
 646   3                              if (Two_Menu_F8_E1_temp == 1)
 647   3                              {
 648   4                                      single_key[old2_RF_RECE_REG[2] & 0x0f] = Two_Menu_F8_E2_temp;
 649   4                                      ISendStr(I2C_ADDRESS, SIN_KEY, single_key, 16);
 650   4                              }
 651   3                              else
 652   3                              {
C51 COMPILER V9.00   DECODER                                                               10/30/2015 17:38:15 PAGE 12  

 653   4                                      multiple_key[old2_RF_RECE_REG[2] & 0x0f] = Two_Menu_F8_E2_temp;
 654   4                                      ISendStr(I2C_ADDRESS, MUL_KEY, multiple_key, 16);
 655   4                              }
 656   3      #ifdef DEBUG
                                      uart_printf("single_key£∫  ");
                                      for (i = 0; i < 16; i++)
                                      {
                                              
                                              uart_printf("%02d ", (unsigned int)single_key[i]);
                                      }
                                      uart_printf(" \r\n");
              
                                      uart_printf("multiple_key£∫");
                                      for (i = 0; i < 16; i++)
                                      {
              
                                              uart_printf("%2d ", (unsigned int)multiple_key[i]);
                                      }
                                      uart_printf(" \r\n");
              #endif  
 673   3      
 674   3                              break;
 675   3      
 676   3      
 677   3                      default:break;//ƒ¨»œµƒbreak
 678   3                      }
 679   2                      clear_again_receive_rf_decoder_finished();//«Â≥˝±Í÷æŒª
 680   2              }
 681   1              
 682   1              LogoutProcess();
 683   1              CycleProcess();
 684   1      }
*** WARNING C280 IN LINE 21 OF RECEIVER\DECODER.C: 'i': unreferenced local variable
*** WARNING C280 IN LINE 21 OF RECEIVER\DECODER.C: 'j': unreferenced local variable
 685          
 686          unsigned char return_Two_menu_set_success(void)
 687          {
 688   1              unsigned char temp = 0;
 689   1              temp = Two_menu_set_success;
 690   1              return temp;
 691   1      }
 692          
 693          void set_Two_menu_set_success(unsigned char temp)
 694          {
 695   1              Two_menu_set_success = temp;
 696   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   3485    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      9      43
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
