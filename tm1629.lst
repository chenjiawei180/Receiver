C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE TM1629
OBJECT MODULE PLACED IN tm1629.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Receiver\tm1629.c LARGE BROWSE INCDIR(.\Receiver) DEBUG OBJECTEXTEND PRINT(
                    -.\tm1629.lst) OBJECT(tm1629.obj)

line level    source

   1          #include "tm1629.h"
   2          #include "timer.h"
   3          #include "usart.h"
   4          #include "ds1302.h"
   5          #include "key.h"
   6          #include "menu.h"
   7          #include "gd5800.h"
   8          #include "at24c256.h"
   9          #include "ev1527.h"
  10          #include "decoder.h"
  11          
  12          unsigned char const CODE[] = { 0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07, 0x7F, 0x6F, 0x77, 0x7C, 0x3
             -9, 0x5E, 0x79, 0x71, 0x76, 0x38, 0x5c, 0x73, 0x3e };//0-9 abcdef ÏÔÊ¾Æ÷ÂëÊý×é
  13          unsigned char const INIT_CODE[] = { 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80 };//Öð¶ÎµãÁÁÊýÂë¹ÜÊý×é
  14          unsigned char const SHANGSHUO[] = { 0x40, 0x00 }; // µãÁÁÊýÂë¹ÜÖÐ¼ä¶ÎÒÔ¼°Ãð
  15          unsigned char buf_display[6][8] = { 0 }; //3¸öTM1629ÏÔ´æÊý×é
  16          unsigned char display_ram[240] = { 0 }; //³ÌÐòÔËÐÐÊ±¼ÇÂ¼ÏÔÊ¾Êý¾ÝµÄÄÚ´æ 
  17          unsigned char await_time_table= 0 ;//ÓÃÓÚ¼ÇÂ¼´ý»úÏÔÊ¾ºá¸ÜÊýÂë¹Ü´ÎÊý 
  18          unsigned char Two_Menu_F8_E1_save =0;
  19          
  20          unsigned char single_key[16]   = { 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
             - 0x01, 0x01, 0x01, 0x01 };//µ¥¼üÎ»ÉèÖÃ´æ´¢Êý×é
  21          unsigned char multiple_key[16] = { 0x01, QUXIAO-QUXIAO, JIEZHANG-QUXIAO, 0x01, JIUSHUI-QUXIAO, 0X01, 0x01,
             - 0x01, HUJIAO - QUXIAO, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01 };//¶à¼üÎ»ÉèÖÃ´æ´¢Êý×é
  22          
  23          void writeDataTo1629(unsigned char p) //Ð´Êý¾Ý¸øµÚÒ»¸öTM1629
  24          {
  25   1              unsigned int i;
  26   1              TM1629_STB = 0;
  27   1              for (i = 0; i<8; i++)
  28   1              {
  29   2                      TM1629_CLK = 0;
  30   2                      if (p & 0x01)
  31   2                              TM1629_DIO = 1;
  32   2                      else
  33   2                              TM1629_DIO = 0;
  34   2                      _nop_();
  35   2                      _nop_();
  36   2                      _nop_();
  37   2                      _nop_();
  38   2                      TM1629_CLK = 1;
  39   2                      p = p >> 1;
  40   2              }
  41   1              TM1629_CLK = 0;
  42   1              TM1629_DIO = 0;
  43   1      }
  44          
  45          void writeDataTo1629_2(unsigned char p) //Ð´Êý¾Ý¸øµÚ¶þ¸öTM1629
  46          {
  47   1              unsigned int i;
  48   1              TM1629_STB2 = 0;
  49   1              for (i = 0; i<8; i++)
  50   1              {
  51   2                      TM1629_CLK = 0;
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 2   

  52   2                      if (p & 0x01)
  53   2                              TM1629_DIO = 1;
  54   2                      else
  55   2                              TM1629_DIO = 0;
  56   2                      _nop_();
  57   2                      _nop_();
  58   2                      _nop_();
  59   2                      _nop_();
  60   2                      TM1629_CLK = 1;
  61   2                      p = p >> 1;
  62   2              }
  63   1              TM1629_CLK = 0;
  64   1              TM1629_DIO = 0;
  65   1      }
  66          
  67          void writeDataTo1629_3(unsigned char p) //Ð´Êý¾Ý¸øµÚÈý¸öTM1629
  68          {
  69   1              unsigned int i;
  70   1              TM1629_STB3 = 0;
  71   1              for (i = 0; i<8; i++)
  72   1              {
  73   2                      TM1629_CLK = 0;
  74   2                      if (p & 0x01)
  75   2                              TM1629_DIO = 1;
  76   2                      else
  77   2                              TM1629_DIO = 0;
  78   2                      _nop_();
  79   2                      _nop_();
  80   2                      _nop_();
  81   2                      _nop_();
  82   2                      TM1629_CLK = 1;
  83   2                      p = p >> 1;
  84   2              }
  85   1              TM1629_CLK = 0;
  86   1              TM1629_DIO = 0;
  87   1      }
  88          
  89          void send_command(unsigned char word) //Ð´ÃüÁî¸øµÚÒ»¸öTM1629
  90          {
  91   1              TM1629_STB = 1;
  92   1              nop;
  93   1              TM1629_STB = 0;
  94   1              writeDataTo1629(word);
  95   1      }
  96          
  97          void send_command_2(unsigned char word) //Ð´ÃüÁî¸øµÚ¶þ¸öTM1629
  98          {
  99   1              TM1629_STB2 = 1;
 100   1              nop;
 101   1              TM1629_STB2 = 0;
 102   1              writeDataTo1629_2(word);
 103   1      }
 104          
 105          void send_command_3(unsigned char word) //Ð´ÃüÁî¸øµÚÈý¸öTM1629
 106          {
 107   1              TM1629_STB3 = 1;
 108   1              nop;
 109   1              TM1629_STB3 = 0;
 110   1              writeDataTo1629_3(word);
 111   1      }
 112          
 113          void display(void) //3¸öTM1629ÏÔÊ¾º¯Êý
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 3   

 114          {
 115   1              unsigned char i,temp;
 116   1              temp = return_Two_Menu_F6_E5();
 117   1              send_command(0x40);     //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 118   1              send_command(0xc0);     //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 119   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 120   1              {
 121   2                      writeDataTo1629(buf_display[0][i]);
 122   2                      writeDataTo1629(buf_display[1][i]);
 123   2              }
 124   1              send_command(0x88 + temp);      //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 125   1              TM1629_STB = 1;
 126   1      
 127   1              send_command_2(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 128   1              send_command_2(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 129   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 130   1              {
 131   2                      writeDataTo1629_2(buf_display[2][i]);
 132   2                      writeDataTo1629_2(buf_display[3][i]);
 133   2              }
 134   1              send_command_2(0x88 + temp);    //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 135   1              TM1629_STB2 = 1;
 136   1      
 137   1              send_command_3(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 138   1              send_command_3(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 139   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 140   1              {
 141   2                      writeDataTo1629_3(buf_display[4][i]);
 142   2                      writeDataTo1629_3(buf_display[5][i]);
 143   2              }
 144   1              send_command_3(0x88 + temp);    //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 145   1              TM1629_STB3 = 1;
 146   1      }
 147          
 148          void display_light(void) //3¸öTM1629ÏÔÊ¾º¯Êý
 149          {
 150   1              unsigned char i;
 151   1              send_command(0x40);     //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 152   1              send_command(0xc0);     //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 153   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 154   1              {
 155   2                      writeDataTo1629(0xff);
 156   2                      writeDataTo1629(0xff);
 157   2              }
 158   1              send_command(0x8f);     //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 159   1              TM1629_STB = 1;
 160   1      
 161   1              send_command_2(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 162   1              send_command_2(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 163   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 164   1              {
 165   2                      writeDataTo1629_2(0xff);
 166   2                      writeDataTo1629_2(0xff);
 167   2              }
 168   1              send_command_2(0x8f);   //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 169   1              TM1629_STB2 = 1;
 170   1      
 171   1              send_command_3(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 172   1              send_command_3(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 173   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 174   1              {
 175   2                      writeDataTo1629_3(0xff);
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 4   

 176   2                      writeDataTo1629_3(0xff);
 177   2              }
 178   1              send_command_3(0x8f);   //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 179   1              TM1629_STB3 = 1;
 180   1      }
 181          
 182          void tm1629_init(void) //TM1629¿ª»ú³õÊ¼»¯º¯Êý
 183          {
 184   1              unsigned char i, j, k;          //k¿ØÖÆÏÔÊ¾µÄ¾ßÌåÊý×Ö£¬iºÍj¿ØÖÆbuf_displayµÄË¢ÐÂ
 185   1              for (k = 0; k<8; k++)
 186   1              {
 187   2                      for (i = 0; i<6; i++)
 188   2                      {
 189   3                              for (j = 0; j<8; j++)
 190   3                              {
 191   4                                      buf_display[i][j] = INIT_CODE[k];
 192   4                              }
 193   3                      }
 194   2                      display();
 195   2                      Tm1629_delay(30);
 196   2              }
 197   1      }
 198          
 199          
 200          void Tm1629_delay(unsigned char k) //ÑÓÊ±º¯Êý
 201          {
 202   1              unsigned char i, j;
 203   1              for (; k>0; k--)
 204   1              {
 205   2                      for (i = 255; i>0; i--)
 206   2                      {
 207   3                              for (j = 255; j>0; j--)
 208   3                              {
 209   4                                      ;
 210   4      
 211   4                              }
 212   3                      }
 213   2              }
 214   1      }
 215          
 216          void tm1629_clear(void)//È«²¿¹éÁã
 217          {
 218   1              unsigned char i, j;
 219   1              for (i = 0; i<6; i++)
 220   1              {
 221   2                      for (j = 0; j<8; j++)
 222   2                      {
 223   3                              buf_display[i][j] = 0x00;
 224   3                      }
 225   2              }
 226   1      }
 227          
 228          void tm1629_display_buff_clear(void)//Çå³ý¶ÓÁÐ»º´æ
 229          {
 230   1              unsigned char i;
 231   1              for (i = 0; i<120; i++)
 232   1                      display_ram[i] = 0;
 233   1      }
 234          
 235          void tm1629_await(void)
 236          {
 237   1              unsigned char i;        //k¿ØÖÆÏÔÊ¾µÄ¾ßÌåÊý×Ö£¬iºÍj¿ØÖÆbuf_displayµÄË¢ÐÂ
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 5   

 238   1              unsigned char await_number_table_temp = 0;
 239   1              await_number_table_temp = return_await_number_table();
 240   1              if (await_number_table_temp == 1)
 241   1              {
 242   2                      //GD5800_select_chapter(0x0008) ;
 243   2                      tm1629_clear();
 244   2                      i = await_time_table & 0x03;
 245   2                      buf_display[0][i] = 0x40;
 246   2                      display();
 247   2                      set_await_number_table(0);
 248   2                      await_time_table++;
 249   2                      if (await_time_table == 4)
 250   2                              await_time_table = 0;
 251   2              }
 252   1      }
 253          
 254          void Display_time(void)
 255          {
 256   1              tm1629_clear();
 257   1              Ds1302_Read_Time(); 
 258   1              buf_display[1][7] = CODE[2];                            //Äê
 259   1              buf_display[1][6] = CODE[0];
 260   1              buf_display[1][5] = CODE[time_buf1[1] / 10];
 261   1              buf_display[1][4] = CODE[time_buf1[1] % 10];
 262   1      
 263   1              buf_display[1][3] = 0x40;                                        // -
 264   1              
 265   1              buf_display[1][2] = CODE[time_buf1[2] / 10]; //ÔÂ
 266   1              buf_display[1][1] = CODE[time_buf1[2] % 10];
 267   1      
 268   1              buf_display[1][0] = 0x40;                                        // -
 269   1      
 270   1              buf_display[0][7] = CODE[time_buf1[3] / 10];
 271   1              buf_display[0][6] = CODE[time_buf1[3] % 10];//ÈÕ
 272   1      
 273   1              buf_display[0][5] = CODE[time_buf1[7]];         //ÐÇÆÚ
 274   1      
 275   1              buf_display[0][3] = CODE[time_buf1[4] / 10]; //Ð¡Ê±
 276   1              buf_display[0][2] = CODE[time_buf1[4] % 10];
 277   1              buf_display[0][1] = CODE[time_buf1[5] / 10]; //Ð¡Ê±
 278   1              buf_display[0][0] = CODE[time_buf1[5] % 10];
 279   1      
 280   1              display();
 281   1      
 282   1      }
 283          
 284          void tm1629_f(unsigned char f_number) //µÚÒ»ÐÐµ¹Êý¶þ¸öÏÔÊ¾F,µ¹ÊýµÚÒ»¸öÏÔÊ¾f_number
 285          {
 286   1              tm1629_clear();
 287   1              buf_display[0][1] = CODE[0x0f];
 288   1              buf_display[0][0] = CODE[f_number];
 289   1              display();
 290   1      }
 291          
 292          void tm1629_E(unsigned char f_number) //µÚÒ»ÐÐµ¹Êý¶þ¸öÏÔÊ¾F,µ¹ÊýµÚÒ»¸öÏÔÊ¾f_number
 293          {
 294   1              tm1629_clear();
 295   1              buf_display[0][1] = CODE[0x0E];
 296   1              buf_display[0][0] = CODE[f_number];
 297   1              display();
 298   1      }
 299          void Show_on(void)
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 6   

 300          {
 301   1              tm1629_clear();
 302   1              buf_display[0][1] = CODE[0];
 303   1              buf_display[0][0] = 0x37;
 304   1              display();
 305   1      }
 306          
 307          void Show_off(void)
 308          {
 309   1              tm1629_clear();
 310   1              buf_display[0][1] = CODE[0x00];
 311   1              buf_display[0][0] = CODE[0x0f];
 312   1              display();
 313   1      }
 314          
 315          void Show_one_number(unsigned char f_number) //ÏÔÊ¾Ò»¸öÊý×Ö
 316          {
 317   1              tm1629_clear();
 318   1              //buf_display[0][1] = CODE[0x0E];
 319   1              buf_display[0][0] = CODE[f_number];
 320   1              display();
 321   1      }
 322          
 323          void Show_two_number(unsigned char f_number) //ÏÔÊ¾Á½¸öÊý×Ö
 324          {
 325   1              tm1629_clear();
 326   1              buf_display[0][1] = CODE[f_number / 10];
 327   1              buf_display[0][0] = CODE[f_number % 10];
 328   1              display();
 329   1      }
 330          
 331          
 332          void Show_three_number(unsigned int f_number) //ÏÔÊ¾Èý¸öÊý×Ö
 333          {
 334   1              tm1629_clear();
 335   1              buf_display[0][2] = CODE[f_number / 100];
 336   1              buf_display[0][1] = CODE[(f_number / 10) %10];
 337   1              buf_display[0][0] = CODE[f_number % 10];
 338   1              display();
 339   1      }
 340          
 341          void Show_four_number(unsigned char* temp)
 342          {
 343   1              tm1629_clear();
 344   1              buf_display[0][3] = CODE[*(temp)];
 345   1              buf_display[0][2] = CODE[*(temp+1)];
 346   1              buf_display[0][1] = CODE[*(temp+2)];
 347   1              buf_display[0][0] = CODE[*(temp+3)];
 348   1              display();
 349   1      }
 350          
 351          void tm1629_load(void)
 352          {
 353   1              tm1629_clear();
 354   1              if (*(display_ram + 66) != 0)
 355   1                      mcuram_to_displayram(buf_display[5] + 7, display_ram + 66);
 356   1              if (*(display_ram + 60) != 0)
 357   1                      mcuram_to_displayram(buf_display[5] + 3, display_ram + 60);
 358   1              if (*(display_ram + 54) != 0)
 359   1                      mcuram_to_displayram(buf_display[4] + 7, display_ram + 54);
 360   1              if (*(display_ram + 48) != 0)
 361   1                      mcuram_to_displayram(buf_display[4] + 3, display_ram + 48);
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 7   

 362   1              if (*(display_ram + 42) != 0)
 363   1                      mcuram_to_displayram(buf_display[3] + 7, display_ram + 42);
 364   1              if (*(display_ram + 36) != 0)
 365   1                      mcuram_to_displayram(buf_display[3] + 3, display_ram + 36);
 366   1              if (*(display_ram + 30) != 0)
 367   1                      mcuram_to_displayram(buf_display[2] + 7, display_ram + 30);
 368   1              if (*(display_ram + 24) != 0)
 369   1                      mcuram_to_displayram(buf_display[2] + 3, display_ram + 24);
 370   1              if (*(display_ram + 18) != 0)
 371   1                      mcuram_to_displayram(buf_display[1] + 7, display_ram + 18);
 372   1              if (*(display_ram + 12) != 0)
 373   1                      mcuram_to_displayram(buf_display[1] + 3, display_ram + 12);
 374   1              if (*(display_ram + 6) != 0)
 375   1                      mcuram_to_displayram(buf_display[0] + 7, display_ram + 6);
 376   1              if (*(display_ram + 0) != 0)
 377   1                      mcuram_to_displayram(buf_display[0] + 3, display_ram);
 378   1      }
 379          
 380          void mcuram_to_displayram(unsigned char a[48], unsigned char* b)  //´ÓRAMÇøÓòÒÆµ½ÏÔ´æÇøÓò,Ë³´ø·­Òë³ÉÊýÂë¹Ü
             -ÏÔÊ¾µÄÂë
 381          {
 382   1              /*
 383   1              A// Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 384   1              B// Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 385   1              */
 386   1              *(a) = CODE[*(b + 1)];
 387   1              *(a - 1) = CODE[*(b + 2)];
 388   1              *(a - 2) = CODE[*(b + 3)];
 389   1              *(a - 3) = CODE[*(b + 4)];
 390   1      }
 391          
 392          void decoder_temp_to_mcuram(unsigned char* a, unsigned char* index)//aÎªMCU»º´æÇø   indexÎª½âÂëºóÈ¡³öµÄ8×Ö
             -½ÚÁÙÊ±Êý×é
 393          {
 394   1              *(a + 0) = *(index);
 395   1              *(a + 1) = *(index + 1);
 396   1              *(a + 2) = *(index + 2);
 397   1              *(a + 3) = *(index + 3);
 398   1              *(a + 4) = *(index + 4);
 399   1              *(a + 5) = *(index + 7);//±£´æ°´¼üµÄ¼üÖµ
 400   1      }
 401          
 402          void mcuram_to_mcuram_down(unsigned char* a) //aÎªMCURAM»º´æÇøÇø   ÏòÏÂÑ¹Ò»×éÊý¾Ý
 403          {
 404   1              *(a + 6) = *(a);                //ramÇøÔªËØÏÂÒÆ6¸ö
 405   1              *(a + 7) = *(a + 1);
 406   1              *(a + 8) = *(a + 2);
 407   1              *(a + 9) = *(a + 3);
 408   1              *(a + 10) = *(a + 4);
 409   1              *(a + 11) = *(a + 5);
 410   1      
 411   1      }
 412          
 413          void mcuram_to_mcuram_up(unsigned char* a) //aÎªMCURAM»º´æÇøÇø   ÏòÉÏÑ¹Ò»×éÊý¾Ý
 414          {
 415   1              *(a) = *(a + 6);   //ramÇøÔªËØÉÏÒÆ6¸ö
 416   1              *(a + 1) = *(a + 7);
 417   1              *(a + 2) = *(a + 8);
 418   1              *(a + 3) = *(a + 9);
 419   1              *(a + 4) = *(a + 10);
 420   1              *(a + 5) = *(a + 11);
 421   1      }
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 8   

 422          
 423          void CycleProcess(void)
 424          {
 425   1              unsigned char i, index;
 426   1              unsigned char f5_xunhuan, f4_xiaohao, logout_cycle_table_temp;
 427   1              unsigned char temp[6] = { 0 };
 428   1              unsigned char Two_Menu_F6_E3_temp = 0;
 429   1              unsigned char Two_Menu_F6_E1_temp = 0;
 430   1      
 431   1              Two_Menu_F6_E3_temp = return_Two_Menu_F6_E3();
 432   1              Two_Menu_F6_E1_temp = return_Two_Menu_F6_E1();
 433   1      
 434   1              f5_xunhuan = return_Two_Menu_F5_E1();
 435   1              f4_xiaohao = return_Two_Menu_F4_E1();
 436   1              logout_cycle_table_temp = return_logout_cycle_table();
 437   1              /*Ñ­»·´¦Àíº¯Êý*/
 438   1              if ((f5_xunhuan<f4_xiaohao && logout_cycle_table_temp>f5_xunhuan && f4_xiaohao && f5_xunhuan) || (f4_xiao
             -hao == 0 && f5_xunhuan &&logout_cycle_table_temp>f5_xunhuan))
 439   1              {
 440   2                      for (i = 0; i<10; i++)
 441   2                      {
 442   3                              if (display_ram[i * 6 ] == 0)
 443   3                              {
 444   4                                      index = i;
 445   4                                      break;
 446   4                              }
 447   3                      }
 448   2      
 449   2                      for (i = 0; i<6; i++)
 450   2                      {
 451   3                              temp[i] = display_ram[(index - 1) * 6 + i];
 452   3                      }
 453   2      
 454   2                      for (i = index; i>1; i--)
 455   2                      {
 456   3                              mcuram_to_mcuram_down(display_ram + (i - 2) * 6);
 457   3                      }
 458   2                      for (i = 0; i<6; i++)
 459   2                      {
 460   3                              display_ram[i] = temp[i];
 461   3                      }
 462   2                      tm1629_load();
 463   2                      display();
 464   2                      set_logout_cycle_table(0);
 465   2                      if (Two_Menu_F6_E3_temp == 1)
 466   2                      {
 467   3                                      submenuf6_1(Two_Menu_F6_E1_temp, display_ram, display_ram[0], display_ram[5] & 0x0f);
 468   3                      }
 469   2              }
 470   1      }
 471          
 472          void LogoutProcess(void)
 473          {
 474   1              unsigned char i;
 475   1              unsigned char f5_xunhuan, f4_xiaohao, logout_cycle_table_temp, Two_Menu_F3_E2_temp, Two_Menu_F3_E1_temp;
 476   1              unsigned char Two_Menu_F6_E1_temp = 0;
 477   1              unsigned char Two_Menu_F6_E2_temp = 0;
 478   1      
 479   1              f5_xunhuan = return_Two_Menu_F5_E1();
 480   1              f4_xiaohao = return_Two_Menu_F4_E1();
 481   1              logout_cycle_table_temp = return_logout_cycle_table();
 482   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 9   

 483   1              Two_Menu_F3_E1_temp = return_Two_Menu_F3_E1();
 484   1              Two_Menu_F6_E2_temp = return_Two_Menu_F6_E2();
 485   1              /*ÏúºÅ´¦Àíº¯Êý*/
 486   1              if ((f4_xiaohao<f5_xunhuan&& logout_cycle_table_temp>f4_xiaohao && f5_xunhuan && f4_xiaohao) || (f5_xunhu
             -an == 0 && f4_xiaohao && logout_cycle_table_temp>f4_xiaohao))
 487   1              {
 488   2                      for (i = 0; i<(Two_Menu_F3_E2_temp - 1); i++)
 489   2                      {
 490   3                              mcuram_to_mcuram_up(display_ram + i * 6);
 491   3                      }
 492   2                      for (i = (Two_Menu_F3_E2_temp - 1) * 6; i<Two_Menu_F3_E2_temp * 6; i++)
 493   2                      {
 494   3                              display_ram[i] = 0;
 495   3                      }
 496   2                      tm1629_load();
 497   2                      display();
 498   2                      set_logout_cycle_table(0);
 499   2                      if (display_ram[0] == 0)
 500   2                      {
 501   3                              set_func_index(MENU_STANDBY);
 502   3                      }
 503   2                      else if (Two_Menu_F3_E1_temp == 2)
 504   2                      {
 505   3                              for (i = 0; i < Two_Menu_F6_E2_temp; i++)
 506   3                              {
 507   4                                      submenuf6_1(Two_Menu_F6_E1_temp, display_ram, display_ram[0], display_ram[5] & 0x0f);
 508   4                              }
 509   3                      }
 510   2              }
 511   1      }
 512          
 513          
 514          
 515          
 516          
 517          void Logout(void)
 518          {
 519   1              unsigned char i;
 520   1              unsigned char Two_Menu_F3_E2_temp= 0;
 521   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 522   1              /*ÏúºÅ´¦Àíº¯Êý*/
 523   1              for (i = 0; i<(Two_Menu_F3_E2_temp - 1); i++)
 524   1              {
 525   2                      mcuram_to_mcuram_up(display_ram + i * 6);
 526   2              }
 527   1              for (i = (Two_Menu_F3_E2_temp - 1) * 6; i<Two_Menu_F3_E2_temp * 6; i++)
 528   1              {
 529   2                      display_ram[i] = 0;
 530   2              }
 531   1              tm1629_load();
 532   1              display();
 533   1              if (display_ram[0] == 0)
 534   1              {
 535   2                      set_func_index(MENU_STANDBY);
 536   2              }
 537   1      }
 538          
 539          void CycleUp(void)
 540          {
 541   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 542   1              unsigned char temp[6] = { 0 };
 543   1              index = return_Two_Menu_F3_E2();
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 10  

 544   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 545   1              /*Ñ­»·´¦Àíº¯Êý*/
 546   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 547   1              {
 548   2                      if (display_ram[i * 6 ] == 0)
 549   2                      {
 550   3                              index = i;
 551   3                              break;
 552   3                      }
 553   2              }
 554   1              for (i = 0; i<6; i++)
 555   1              {
 556   2                      temp[i] = display_ram[i];
 557   2              }
 558   1              for (i = 0; i<index; i++)
 559   1              {
 560   2                      mcuram_to_mcuram_up(display_ram + i * 6);
 561   2              }
 562   1              for (i = 0; i<6; i++)
 563   1              {
 564   2                      display_ram[(index - 1) * 6 + i] = temp[i];
 565   2              }
 566   1              tm1629_load();
 567   1              display();
 568   1      }
 569          
 570          void CycleDown(void)
 571          {
 572   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 573   1              unsigned char temp[6] = { 0 };
 574   1              index = return_Two_Menu_F3_E2();
 575   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 576   1              /*Ñ­»·´¦Àíº¯Êý*/
 577   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 578   1              {
 579   2                      if (display_ram[i * 6 ] == 0)
 580   2                      {
 581   3                              index = i;
 582   3                              break;
 583   3                      }
 584   2              }
 585   1      
 586   1              for (i = 0; i<6; i++)
 587   1              {
 588   2                      temp[i] = display_ram[(index - 1) * 6 + i];
 589   2              }
 590   1      
 591   1              for (i = index; i>1; i--)
 592   1              {
 593   2                      mcuram_to_mcuram_down(display_ram + (i - 2) * 6);
 594   2              }
 595   1              for (i = 0; i<6; i++)
 596   1              {
 597   2                      display_ram[i] = temp[i];
 598   2              }
 599   1              tm1629_load();
 600   1              display();
 601   1      }
 602          
 603          void Cancel_funtion(unsigned char* id_number, unsigned char* buff)//id_numberÎª½âÂëµÄtempÊý×é£¬buffÎªÏÔÊ¾»
             -º´æ
 604          {
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 11  

 605   1              /*
 606   1              id_number  //  ÐòºÅ¡¢½ÓÊÕºÅ*3¡¢ID*3¡¢ÇøºÅ
 607   1              buff    //                ÐòºÅ¡¢Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 608   1              */
 609   1      
 610   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 611   1              unsigned char temp[6] = { 0 };
 612   1              index = return_Two_Menu_F3_E2();
 613   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 614   1      
 615   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 616   1              {
 617   2                      if (*(id_number + 1) == *(buff + i * 6 + 1) && *(id_number + 2) == *(buff + i * 6 + 2) && *(id_number + 
             -3) == *(buff + i * 6 + 3) && *(id_number + 4) == *(buff + i * 6 + 4))
 618   2                      {
 619   3                              index = i;
 620   3                              break;
 621   3                      }
 622   2              }
 623   1              if (index == 0)
 624   1              {
 625   2                      GD5800_stop_music();
 626   2              }
 627   1              for (i = index; i<Two_Menu_F3_E2_temp; i++)
 628   1              {
 629   2                      mcuram_to_mcuram_up(buff + i * 6);
 630   2              }
 631   1              if (index != Two_Menu_F3_E2_temp)
 632   1              {
 633   2                      for (i = 0; i<6; i++)
 634   2                      {
 635   3                              *(buff + (Two_Menu_F3_E2_temp - 1) * 6 + i) = 0;
 636   3                      }
 637   2              }
 638   1              if (*(buff) == 0)
 639   1              {
 640   2                      set_func_index(MENU_STANDBY);
 641   2              }
 642   1      }
 643          
 644          
 645          void fun0(void) //´ý»úÏÔÊ¾º¯Êý
 646          {
 647   1              unsigned char temp = 0;
 648   1              temp = return_Two_Menu_FC_E1();
 649   1              if (temp == 1)
 650   1              {
 651   2                      tm1629_await();
 652   2              }
 653   1              else
 654   1              {
 655   2                      Display_time();
 656   2              }
 657   1              tm1629_display_buff_clear();
 658   1      }
 659          
 660          void fun1(void) //Ò»¼¶²Ëµ¥F0
 661          {
 662   1              tm1629_f(0x00);
 663   1      }
 664          
 665          void fun2(void) //Ò»¼¶²Ëµ¥F1
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 12  

 666          {
 667   1              tm1629_f(0x01);
 668   1      }
 669          
 670          void fun3(void) //Ò»¼¶²Ëµ¥F2
 671          {
 672   1              tm1629_f(0x02);
 673   1      }
 674          
 675          void fun4(void) //Ò»¼¶²Ëµ¥F3
 676          {
 677   1              tm1629_f(0x03);
 678   1      }
 679          
 680          void fun5(void) //Ò»¼¶²Ëµ¥F4
 681          {
 682   1              tm1629_f(0x04);
 683   1      }
 684          
 685          void fun6(void) //Ò»¼¶²Ëµ¥F5
 686          {
 687   1              tm1629_f(0x05);
 688   1      }
 689          
 690          void fun7(void) //Ò»¼¶²Ëµ¥F6
 691          {
 692   1              tm1629_f(0x06);
 693   1      }
 694          
 695          void fun8(void) //Ò»¼¶²Ëµ¥F7
 696          {
 697   1              tm1629_f(0x07);
 698   1      }
 699          
 700          void fun9(void) //Ò»¼¶²Ëµ¥F8
 701          {
 702   1              tm1629_f(0x08);
 703   1      }
 704          
 705          void fun10(void) //Ò»¼¶²Ëµ¥F9
 706          {
 707   1              tm1629_f(0x09);
 708   1      }
 709          
 710          void fun11(void) //Ò»¼¶²Ëµ¥FA
 711          {
 712   1              tm1629_f(0x0a);
 713   1      }
 714          
 715          void fun12(void) //Ò»¼¶²Ëµ¥Fb
 716          {
 717   1              tm1629_f(0x0b);
 718   1      }
 719          
 720          void fun13(void) //Ò»¼¶²Ëµ¥FC
 721          {
 722   1              tm1629_f(0x0c);
 723   1      }
 724          
 725          void fun14(void) //Ò»¼¶²Ëµ¥Fd
 726          {
 727   1              tm1629_f(0x0d);
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 13  

 728   1      }
 729          
 730          void fun15(void) //ÉèÖÃÄê·Ý
 731          {
 732   1              unsigned char temp;
 733   1              temp = return_Two_Menu_FC_E1();
 734   1              if (temp == 1)//Èç¹ûÎª----  Ôò²»ÈÃ½øÈëF0
 735   1              {
 736   2                      set_func_index(ONE_MENU_F0);
 737   2              }
 738   1              else
 739   1              {
 740   2                      if (return_await_number_table() == 1)
 741   2                      {
 742   3                              Display_time();
 743   3                              set_await_number_table(2);
 744   3                      }
 745   2                      if (return_await_number_table() == 3)
 746   2                      {
 747   3                              buf_display[1][7] = 0;
 748   3                              buf_display[1][6] = 0;
 749   3                              buf_display[1][5] = 0;
 750   3                              buf_display[1][4] = 0;
 751   3                              display();
 752   3                              set_await_number_table(0);
 753   3                      }
 754   2                      Ds1302_Write_Time();
 755   2              }
 756   1      }
 757          
 758          void fun16(void) //ÉèÖÃÔÂ·Ý
 759          {
 760   1              if (return_await_number_table() == 1)
 761   1              {
 762   2                      Display_time();
 763   2                      set_await_number_table(2);
 764   2              }
 765   1              if (return_await_number_table() == 3)
 766   1              {
 767   2                      buf_display[1][2] = 0;
 768   2                      buf_display[1][1] = 0;
 769   2                      display();
 770   2                      set_await_number_table(0);
 771   2              }
 772   1              Ds1302_Write_Time();
 773   1      }
 774          
 775          void fun17(void) //ÉèÖÃÈÕÆÚ
 776          {
 777   1              if (return_await_number_table() == 1)
 778   1              {
 779   2                      Display_time();
 780   2                      set_await_number_table(2);
 781   2              }
 782   1              if (return_await_number_table() == 3)
 783   1              {
 784   2                      buf_display[0][7] = 0;
 785   2                      buf_display[0][6] = 0;
 786   2                      display();
 787   2                      set_await_number_table(0);
 788   2              }
 789   1              Ds1302_Write_Time();
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 14  

 790   1      }
 791          
 792          void fun18(void) //ÉèÖÃÐÇÆÚ
 793          {
 794   1              if (return_await_number_table() == 1)
 795   1              {
 796   2                      Display_time();
 797   2                      set_await_number_table(2);
 798   2              }
 799   1              if (return_await_number_table() == 3)
 800   1              {
 801   2                      buf_display[0][5] = 0;
 802   2                      display();
 803   2                      set_await_number_table(0);
 804   2              }
 805   1              Ds1302_Write_Time();
 806   1      }
 807          
 808          void fun19(void) //ÉèÖÃÐ¡Ê±
 809          {
 810   1              if (return_await_number_table() == 1)
 811   1              {
 812   2                      Display_time();
 813   2                      set_await_number_table(2);
 814   2              }
 815   1              if (return_await_number_table() == 3)
 816   1              {
 817   2                      buf_display[0][3] = 0;
 818   2                      buf_display[0][2] = 0;
 819   2                      display();
 820   2                      set_await_number_table(0);
 821   2              }
 822   1              Ds1302_Write_Time();
 823   1      }
 824          
 825          void fun20(void) //ÉèÖÃ·ÖÖÓ
 826          {
 827   1              if (return_await_number_table() == 1)
 828   1              {
 829   2                      Display_time();
 830   2                      set_await_number_table(2);
 831   2              }
 832   1              if (return_await_number_table() == 3)
 833   1              {
 834   2                      buf_display[0][1] = 0;
 835   2                      buf_display[0][0] = 0;
 836   2                      display();
 837   2                      set_await_number_table(0);
 838   2              }
 839   1              Ds1302_Write_Time();
 840   1      }
 841          
 842          void fun21(void) //¶þ¼¶²Ëµ¥F1-E1
 843          {
 844   1              tm1629_E(0x01);
 845   1              Two_Menu_F1_E1[0] = 0;
 846   1              Two_Menu_F1_E1[1] = 0;
 847   1              Two_Menu_F1_E1[2] = 0;
 848   1              Two_Menu_F1_E1[3] = 1;
 849   1      }
 850          
 851          void fun22(void) //¶þ¼¶²Ëµ¥F1-E2
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 15  

 852          {
 853   1              tm1629_E(0x02);
 854   1              Two_Menu_F1_E2[0] = 0;
 855   1              Two_Menu_F1_E2[1] = 0;
 856   1              Two_Menu_F1_E2[2] = 0;
 857   1              Two_Menu_F1_E2[3] = 1;
 858   1      }
 859          
 860          void fun23(void) //¶þ¼¶²Ëµ¥F1-E3
 861          {
 862   1              tm1629_E(0x03);
 863   1              Two_Menu_F1_E3[0] = 0;
 864   1              Two_Menu_F1_E3[1] = 0;
 865   1              Two_Menu_F1_E3[2] = 0;
 866   1              Two_Menu_F1_E3[3] = 1;
 867   1      }
 868          
 869          void fun24(void) //¶þ¼¶²Ëµ¥F1-E4
 870          {
 871   1              tm1629_E(0x04);
 872   1              Two_Menu_F1_E4[0] = 0;
 873   1              Two_Menu_F1_E4[1] = 0;
 874   1              Two_Menu_F1_E4[2] = 0;
 875   1              Two_Menu_F1_E4[3] = 1;
 876   1      }
 877          
 878          void fun25(void) //¶þ¼¶²Ëµ¥F2-E1
 879          {
 880   1              tm1629_E(0x01);
 881   1              Two_Menu_F2_E1[0] = 0;
 882   1              Two_Menu_F2_E1[1] = 0;
 883   1              Two_Menu_F2_E1[2] = 0;
 884   1              Two_Menu_F2_E1[3] = 1;
 885   1      }
 886          
 887          void fun26(void) //¶þ¼¶²Ëµ¥F2-E2
 888          {
 889   1              tm1629_E(0x02);
 890   1              Two_Menu_F2_E2[0] = 0;
 891   1              Two_Menu_F2_E2[1] = 0;
 892   1              Two_Menu_F2_E2[2] = 0;
 893   1              Two_Menu_F2_E2[3] = 1;
 894   1      }
 895          
 896          void fun27(void) //¶þ¼¶²Ëµ¥F2-E3
 897          {
 898   1              tm1629_E(0x03);
 899   1              Two_Menu_F2_E3[0] = 0;
 900   1              Two_Menu_F2_E3[1] = 0;
 901   1              Two_Menu_F2_E3[2] = 0;
 902   1              Two_Menu_F2_E3[3] = 1;
 903   1      }
 904          
 905          void fun28(void) //¶þ¼¶²Ëµ¥F2-E4
 906          {
 907   1              tm1629_E(0x04);
 908   1              Two_Menu_F2_E4[0] = 0;
 909   1              Two_Menu_F2_E4[1] = 0;
 910   1              Two_Menu_F2_E4[2] = 0;
 911   1              Two_Menu_F2_E4[3] = 1;
 912   1      }
 913          
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 16  

 914          void fun29(void) //¶þ¼¶²Ëµ¥F3-E1
 915          {
 916   1              tm1629_E(0x01);
 917   1      }
 918          
 919          void fun30(void) //¶þ¼¶²Ëµ¥F3-E2
 920          {
 921   1              tm1629_E(0x02);
 922   1      }
 923          
 924          void fun31(void) //¶þ¼¶²Ëµ¥F4
 925          {
 926   1              unsigned char temp = 0;
 927   1              temp = return_Two_Menu_F4_E1();
 928   1              Show_two_number(temp);
 929   1      }
 930          
 931          void fun32(void) //¶þ¼¶²Ëµ¥F5
 932          {
 933   1              unsigned char temp = 0;
 934   1              temp = return_Two_Menu_F5_E1();
 935   1              Show_two_number(temp);
 936   1      }
 937          
 938          void fun33(void) //¶þ¼¶²Ëµ¥F6-E1
 939          {
 940   1              tm1629_E(0x01);
 941   1      }
 942          
 943          void fun34(void) //¶þ¼¶²Ëµ¥F6-E2
 944          {
 945   1              tm1629_E(0x02);
 946   1      }
 947          
 948          void fun35(void) //¶þ¼¶²Ëµ¥F6-E3
 949          {
 950   1              tm1629_E(0x03);
 951   1      }
 952          
 953          void fun36(void) //¶þ¼¶²Ëµ¥F6-E4
 954          {
 955   1              tm1629_E(0x04);
 956   1      }
 957          
 958          void fun37(void) //¶þ¼¶²Ëµ¥F6-E5
 959          {
 960   1              tm1629_E(0x05);
 961   1      }
 962          
 963          void fun38(void) //¶þ¼¶²Ëµ¥F7-E1
 964          {
 965   1              tm1629_E(0x01);
 966   1      }
 967          
 968          void fun39(void) //¶þ¼¶²Ëµ¥F7-E2
 969          {
 970   1              tm1629_E(0x02);
 971   1      }
 972          
 973          void fun40(void) //¶þ¼¶²Ëµ¥F7-E3
 974          {
 975   1              tm1629_E(0x03);
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 17  

 976   1      }
 977          
 978          void fun41(void) //¶þ¼¶²Ëµ¥F7-E4
 979          {
 980   1              tm1629_E(0x04);
 981   1      }
 982          
 983          void fun42(void) //¶þ¼¶²Ëµ¥F8-E1
 984          {
 985   1              tm1629_E(0x01);
 986   1              Two_Menu_F8_E1_save = return_Two_Menu_F8_E1();
 987   1      }
 988          
 989          void fun43(void) //¶þ¼¶²Ëµ¥F8-E2
 990          {
 991   1              tm1629_E(0x02);
 992   1      }
 993          
 994          void fun44(void) //¶þ¼¶²Ëµ¥F9-E1
 995          {
 996   1              tm1629_E(0x01);
 997   1      }
 998          
 999          void fun45(void) //¶þ¼¶²Ëµ¥F9-E2
1000          {
1001   1              tm1629_E(0x02);
1002   1      }
1003          
1004          void fun46(void) //¶þ¼¶²Ëµ¥FA
1005          {
1006   1              unsigned int measure_sync_saved_temp = 0;
1007   1              unsigned int show_temp = 0;
1008   1      
1009   1                      measure_sync_saved_temp = return_RF_trans_count();
1010   1                      show_temp = 10000 / measure_sync_saved_temp;
1011   1                      Show_three_number(show_temp);
1012   1      
1013   1      //              uart_printf("measure_sync_saved_tempÎª %d ! \n\r", measure_sync_saved_temp);
1014   1      //              uart_printf("show_tempÎª %d ! \n\r", show_temp);
1015   1      
1016   1      }
1017          
1018          
1019          void fun47(void) //¶þ¼¶²Ëµ¥Fb
1020          {
1021   1              unsigned char temp = 0;
1022   1              temp = return_Two_Menu_Fb_E1();
1023   1              Show_one_number(temp);
1024   1      }
1025          
1026          void fun48(void) //¶þ¼¶²Ëµ¥FC
1027          {
1028   1              unsigned char temp = 0;
1029   1              temp = return_Two_Menu_FC_E1();
1030   1              Show_one_number(temp);
1031   1      }
1032          
1033          void fun49(void) //¶þ¼¶²Ëµ¥Fd
1034          {
1035   1              
1036   1      
1037   1              if (return_fd_table() <=20)
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 18  

1038   1              {
1039   2                      display_light();
1040   2                      if (P24 == 1)
1041   2                      {
1042   3                              GD5800_select_chapter(BAOJING);
1043   3                      }
1044   2              }
1045   1              if (return_fd_table() >20)
1046   1              {
1047   2                      tm1629_clear();
1048   2                      display();
1049   2              }
1050   1      }
1051          
1052          void fun50(void) //F1_E1 Ç§Î»ÉÁË¸
1053          {
1054   1              if (return_await_number_table() == 1)
1055   1              {
1056   2                      Show_four_number(Two_Menu_F1_E1);
1057   2                      set_await_number_table(2);
1058   2              }
1059   1              if (return_await_number_table() == 3)
1060   1              {
1061   2                      buf_display[0][3] = 0;
1062   2                      display();
1063   2                      set_await_number_table(0);
1064   2              }
1065   1      }
1066          
1067          void fun51(void) //F1_E1 °ÙÎ»ÉÁË¸
1068          {
1069   1              if (return_await_number_table() == 1)
1070   1              {
1071   2                      Show_four_number(Two_Menu_F1_E1);
1072   2                      set_await_number_table(2);
1073   2              }
1074   1              if (return_await_number_table() == 3)
1075   1              {
1076   2                      buf_display[0][2] = 0;
1077   2                      display();
1078   2                      set_await_number_table(0);
1079   2              }
1080   1      }
1081          
1082          void fun52(void)  //F1_E1 Ê®Î»ÉÁË¸
1083          {
1084   1              if (return_await_number_table() == 1)
1085   1              {
1086   2                      Show_four_number(Two_Menu_F1_E1);
1087   2                      set_await_number_table(2);
1088   2              }
1089   1              if (return_await_number_table() == 3)
1090   1              {
1091   2                      buf_display[0][1] = 0;
1092   2                      display();
1093   2                      set_await_number_table(0);
1094   2              }
1095   1      }
1096          
1097          void fun53(void) //F1_E1 ¸öÎ»ÉÁË¸
1098          {
1099   1              if (return_await_number_table() == 1)
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 19  

1100   1              {
1101   2                      Show_four_number(Two_Menu_F1_E1);
1102   2                      set_await_number_table(2);
1103   2              }
1104   1              if (return_await_number_table() == 3)
1105   1              {
1106   2                      buf_display[0][0] = 0;
1107   2                      display();
1108   2                      set_await_number_table(0);
1109   2              }
1110   1      }
1111          
1112          void fun54(void) //F1_E2 Ç§Î»ÉÁË¸
1113          {
1114   1              if (return_await_number_table() == 1)
1115   1              {
1116   2                      Show_four_number(Two_Menu_F1_E2);
1117   2                      set_await_number_table(2);
1118   2              }
1119   1              if (return_await_number_table() == 3)
1120   1              {
1121   2                      buf_display[0][3] = 0;
1122   2                      display();
1123   2                      set_await_number_table(0);
1124   2              }
1125   1      }
1126          
1127          void fun55(void) //F1_E2 °ÙÎ»ÉÁË¸
1128          {
1129   1              if (return_await_number_table() == 1)
1130   1              {
1131   2                      Show_four_number(Two_Menu_F1_E2);
1132   2                      set_await_number_table(2);
1133   2              }
1134   1              if (return_await_number_table() == 3)
1135   1              {
1136   2                      buf_display[0][2] = 0;
1137   2                      display();
1138   2                      set_await_number_table(0);
1139   2              }
1140   1      }
1141          
1142          void fun56(void) //F1_E2 Ê®Î»ÉÁË¸
1143          {
1144   1              if (return_await_number_table() == 1)
1145   1              {
1146   2                      Show_four_number(Two_Menu_F1_E2);
1147   2                      set_await_number_table(2);
1148   2              }
1149   1              if (return_await_number_table() == 3)
1150   1              {
1151   2                      buf_display[0][1] = 0;
1152   2                      display();
1153   2                      set_await_number_table(0);
1154   2              }
1155   1      }
1156          
1157          void fun57(void) //F1_E2 ¸öÎ»ÉÁË¸
1158          {
1159   1              if (return_await_number_table() == 1)
1160   1              {
1161   2                      Show_four_number(Two_Menu_F1_E2);
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 20  

1162   2                      set_await_number_table(2);
1163   2              }
1164   1              if (return_await_number_table() == 3)
1165   1              {
1166   2                      buf_display[0][0] = 0;
1167   2                      display();
1168   2                      set_await_number_table(0);
1169   2              }
1170   1      }
1171          
1172          void fun58(void) //F1_E3 Ç§Î»ÉÁË¸
1173          {
1174   1              if (return_await_number_table() == 1)
1175   1              {
1176   2                      Show_four_number(Two_Menu_F1_E3);
1177   2                      set_await_number_table(2);
1178   2              }
1179   1              if (return_await_number_table() == 3)
1180   1              {
1181   2                      buf_display[0][3] = 0;
1182   2                      display();
1183   2                      set_await_number_table(0);
1184   2              }
1185   1      }
1186          
1187          void fun59(void) //F1_E3 °ÙÎ»ÉÁË¸
1188          {
1189   1              if (return_await_number_table() == 1)
1190   1              {
1191   2                      Show_four_number(Two_Menu_F1_E3);
1192   2                      set_await_number_table(2);
1193   2              }
1194   1              if (return_await_number_table() == 3)
1195   1              {
1196   2                      buf_display[0][2] = 0;
1197   2                      display();
1198   2                      set_await_number_table(0);
1199   2              }
1200   1      }
1201          
1202          void fun60(void) //F1_E3 Ê®Î»ÉÁË¸
1203          {
1204   1              if (return_await_number_table() == 1)
1205   1              {
1206   2                      Show_four_number(Two_Menu_F1_E3);
1207   2                      set_await_number_table(2);
1208   2              }
1209   1              if (return_await_number_table() == 3)
1210   1              {
1211   2                      buf_display[0][1] = 0;
1212   2                      display();
1213   2                      set_await_number_table(0);
1214   2              }
1215   1      }
1216          
1217          void fun61(void) //F1_E3 ¸öÎ»ÉÁË¸
1218          {
1219   1              if (return_await_number_table() == 1)
1220   1              {
1221   2                      Show_four_number(Two_Menu_F1_E3);
1222   2                      set_await_number_table(2);
1223   2              }
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 21  

1224   1              if (return_await_number_table() == 3)
1225   1              {
1226   2                      buf_display[0][0] = 0;
1227   2                      display();
1228   2                      set_await_number_table(0);
1229   2              }
1230   1      }
1231          
1232          void fun62(void) //F1_E4 Ç§Î»ÉÁË¸
1233          {
1234   1              if (return_await_number_table() == 1)
1235   1              {
1236   2                      Show_four_number(Two_Menu_F1_E4);
1237   2                      set_await_number_table(2);
1238   2              }
1239   1              if (return_await_number_table() == 3)
1240   1              {
1241   2                      buf_display[0][3] = 0;
1242   2                      display();
1243   2                      set_await_number_table(0);
1244   2              }
1245   1      }
1246          
1247          void fun63(void) //F1_E4 °ÙÎ»ÉÁË¸
1248          {
1249   1              if (return_await_number_table() == 1)
1250   1              {
1251   2                      Show_four_number(Two_Menu_F1_E4);
1252   2                      set_await_number_table(2);
1253   2              }
1254   1              if (return_await_number_table() == 3)
1255   1              {
1256   2                      buf_display[0][2] = 0;
1257   2                      display();
1258   2                      set_await_number_table(0);
1259   2              }
1260   1      }
1261          
1262          void fun64(void) //F1_E4 Ê®Î»ÉÁË¸
1263          {
1264   1              if (return_await_number_table() == 1)
1265   1              {
1266   2                      Show_four_number(Two_Menu_F1_E4);
1267   2                      set_await_number_table(2);
1268   2              }
1269   1              if (return_await_number_table() == 3)
1270   1              {
1271   2                      buf_display[0][1] = 0;
1272   2                      display();
1273   2                      set_await_number_table(0);
1274   2              }
1275   1      }
1276          
1277          void fun65(void) //F1_E4 ¸öÎ»ÉÁË¸
1278          {
1279   1              if (return_await_number_table() == 1)
1280   1              {
1281   2                      Show_four_number(Two_Menu_F1_E4);
1282   2                      set_await_number_table(2);
1283   2              }
1284   1              if (return_await_number_table() == 3)
1285   1              {
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 22  

1286   2                      buf_display[0][0] = 0;
1287   2                      display();
1288   2                      set_await_number_table(0);
1289   2              }
1290   1      }
1291          
1292          void fun66(void) //F2_E1 Ç§Î»ÉÁË¸
1293          {
1294   1              if (return_await_number_table() == 1)
1295   1              {
1296   2                      Show_four_number(Two_Menu_F2_E1);
1297   2                      set_await_number_table(2);
1298   2              }
1299   1              if (return_await_number_table() == 3)
1300   1              {
1301   2                      buf_display[0][3] = 0;
1302   2                      display();
1303   2                      set_await_number_table(0);
1304   2              }
1305   1      }
1306          
1307          void fun67(void) //F2_E1 °ÙÎ»ÉÁË¸
1308          {
1309   1              if (return_await_number_table() == 1)
1310   1              {
1311   2                      Show_four_number(Two_Menu_F2_E1);
1312   2                      set_await_number_table(2);
1313   2              }
1314   1              if (return_await_number_table() == 3)
1315   1              {
1316   2                      buf_display[0][2] = 0;
1317   2                      display();
1318   2                      set_await_number_table(0);
1319   2              }
1320   1      }
1321          
1322          void fun68(void) //F2_E1 Ê®Î»ÉÁË¸
1323          {
1324   1              if (return_await_number_table() == 1)
1325   1              {
1326   2                      Show_four_number(Two_Menu_F2_E1);
1327   2                      set_await_number_table(2);
1328   2              }
1329   1              if (return_await_number_table() == 3)
1330   1              {
1331   2                      buf_display[0][1] = 0;
1332   2                      display();
1333   2                      set_await_number_table(0);
1334   2              }
1335   1      }
1336          
1337          void fun69(void) //F2_E1 ¸öÎ»ÉÁË¸
1338          {
1339   1              if (return_await_number_table() == 1)
1340   1              {
1341   2                      Show_four_number(Two_Menu_F2_E1);
1342   2                      set_await_number_table(2);
1343   2              }
1344   1              if (return_await_number_table() == 3)
1345   1              {
1346   2                      buf_display[0][0] = 0;
1347   2                      display();
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 23  

1348   2                      set_await_number_table(0);
1349   2              }
1350   1      }
1351          
1352          void fun70(void) //F2_E2 Ç§Î»ÉÁË¸
1353          {
1354   1              if (return_await_number_table() == 1)
1355   1              {
1356   2                      Show_four_number(Two_Menu_F2_E2);
1357   2                      set_await_number_table(2);
1358   2              }
1359   1              if (return_await_number_table() == 3)
1360   1              {
1361   2                      buf_display[0][3] = 0;
1362   2                      display();
1363   2                      set_await_number_table(0);
1364   2              }
1365   1      }
1366          
1367          void fun71(void) //F2_E2 °ÙÎ»ÉÁË¸
1368          {
1369   1              if (return_await_number_table() == 1)
1370   1              {
1371   2                      Show_four_number(Two_Menu_F2_E2);
1372   2                      set_await_number_table(2);
1373   2              }
1374   1              if (return_await_number_table() == 3)
1375   1              {
1376   2                      buf_display[0][2] = 0;
1377   2                      display();
1378   2                      set_await_number_table(0);
1379   2              }
1380   1      }
1381          
1382          void fun72(void) //F2_E2 Ê®Î»ÉÁË¸
1383          {
1384   1              if (return_await_number_table() == 1)
1385   1              {
1386   2                      Show_four_number(Two_Menu_F2_E2);
1387   2                      set_await_number_table(2);
1388   2              }
1389   1              if (return_await_number_table() == 3)
1390   1              {
1391   2                      buf_display[0][1] = 0;
1392   2                      display();
1393   2                      set_await_number_table(0);
1394   2              }
1395   1      }
1396          
1397          void fun73(void) //F2_E2 ¸öÎ»ÉÁË¸
1398          {
1399   1              if (return_await_number_table() == 1)
1400   1              {
1401   2                      Show_four_number(Two_Menu_F2_E2);
1402   2                      set_await_number_table(2);
1403   2              }
1404   1              if (return_await_number_table() == 3)
1405   1              {
1406   2                      buf_display[0][0] = 0;
1407   2                      display();
1408   2                      set_await_number_table(0);
1409   2              }
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 24  

1410   1      }
1411          
1412          void fun74(void) //F2_E3 Ç§Î»ÉÁË¸
1413          {
1414   1              if (return_await_number_table() == 1)
1415   1              {
1416   2                      Show_four_number(Two_Menu_F2_E3);
1417   2                      set_await_number_table(2);
1418   2              }
1419   1              if (return_await_number_table() == 3)
1420   1              {
1421   2                      buf_display[0][3] = 0;
1422   2                      display();
1423   2                      set_await_number_table(0);
1424   2              }
1425   1      }
1426          
1427          void fun75(void) //F2_E3 °ÙÎ»ÉÁË¸
1428          {
1429   1              if (return_await_number_table() == 1)
1430   1              {
1431   2                      Show_four_number(Two_Menu_F2_E3);
1432   2                      set_await_number_table(2);
1433   2              }
1434   1              if (return_await_number_table() == 3)
1435   1              {
1436   2                      buf_display[0][2] = 0;
1437   2                      display();
1438   2                      set_await_number_table(0);
1439   2              }
1440   1      }
1441          
1442          void fun76(void) //F2_E3 Ê®Î»ÉÁË¸
1443          {
1444   1              if (return_await_number_table() == 1)
1445   1              {
1446   2                      Show_four_number(Two_Menu_F2_E3);
1447   2                      set_await_number_table(2);
1448   2              }
1449   1              if (return_await_number_table() == 3)
1450   1              {
1451   2                      buf_display[0][1] = 0;
1452   2                      display();
1453   2                      set_await_number_table(0);
1454   2              }
1455   1      }
1456          
1457          void fun77(void) //F2_E3 ¸öÎ»ÉÁË¸
1458          {
1459   1              if (return_await_number_table() == 1)
1460   1              {
1461   2                      Show_four_number(Two_Menu_F2_E3);
1462   2                      set_await_number_table(2);
1463   2              }
1464   1              if (return_await_number_table() == 3)
1465   1              {
1466   2                      buf_display[0][0] = 0;
1467   2                      display();
1468   2                      set_await_number_table(0);
1469   2              }
1470   1      }
1471          
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 25  

1472          void fun78(void) //F2_E4 Ç§Î»ÉÁË¸
1473          {
1474   1              if (return_await_number_table() == 1)
1475   1              {
1476   2                      Show_four_number(Two_Menu_F2_E4);
1477   2                      set_await_number_table(2);
1478   2              }
1479   1              if (return_await_number_table() == 3)
1480   1              {
1481   2                      buf_display[0][3] = 0;
1482   2                      display();
1483   2                      set_await_number_table(0);
1484   2              }
1485   1      }
1486          
1487          void fun79(void) //F2_E4 °ÙÎ»ÉÁË¸
1488          {
1489   1              if (return_await_number_table() == 1)
1490   1              {
1491   2                      Show_four_number(Two_Menu_F2_E4);
1492   2                      set_await_number_table(2);
1493   2              }
1494   1              if (return_await_number_table() == 3)
1495   1              {
1496   2                      buf_display[0][2] = 0;
1497   2                      display();
1498   2                      set_await_number_table(0);
1499   2              }
1500   1      }
1501          
1502          void fun80(void) //F2_E4 Ê®Î»ÉÁË¸
1503          {
1504   1              if (return_await_number_table() == 1)
1505   1              {
1506   2                      Show_four_number(Two_Menu_F2_E4);
1507   2                      set_await_number_table(2);
1508   2              }
1509   1              if (return_await_number_table() == 3)
1510   1              {
1511   2                      buf_display[0][1] = 0;
1512   2                      display();
1513   2                      set_await_number_table(0);
1514   2              }
1515   1      }
1516          
1517          void fun81(void) //F2_E4 ¸öÎ»ÉÁË¸
1518          {
1519   1              if (return_await_number_table() == 1)
1520   1              {
1521   2                      Show_four_number(Two_Menu_F2_E4);
1522   2                      set_await_number_table(2);
1523   2              }
1524   1              if (return_await_number_table() == 3)
1525   1              {
1526   2                      buf_display[0][0] = 0;
1527   2                      display();
1528   2                      set_await_number_table(0);
1529   2              }
1530   1      }
1531          
1532          void fun82(void) //ÏÔÊ¾¼´Ê±ÏÔÊ¾ »¹ÊÇÑ­»·ÏÔÊ¾
1533          {
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 26  

1534   1              unsigned char temp=0;
1535   1              temp = return_Two_Menu_F3_E1();
1536   1              Show_one_number(temp);
1537   1      }
1538          
1539          void fun83(void) //¶ÓÁÐ´æ´¢¸öÊý
1540          {
1541   1              unsigned char temp = 0;
1542   1              temp = return_Two_Menu_F3_E2();
1543   1              Show_two_number(temp);
1544   1      }
1545          
1546          void fun84(void) //F6_E1ÓïÒôÑ¡Ôñ
1547          {
1548   1              unsigned char temp = 0;
1549   1              temp = return_Two_Menu_F6_E1();
1550   1              Show_one_number(temp);
1551   1      }
1552          
1553          void fun85(void) //F6_E2ÓïÒô±¨¶Á´ÎÊý
1554          {
1555   1              unsigned char temp = 0;
1556   1              temp = return_Two_Menu_F6_E2();
1557   1              Show_one_number(temp);
1558   1      }
1559          
1560          void fun86(void) //F6_E3Ñ­»·Ê±ºòÊÇ·ñ±¨¶Á
1561          {
1562   1              unsigned char temp = 0;
1563   1              temp = return_Two_Menu_F6_E3();
1564   1              Show_one_number(temp);
1565   1      }
1566          
1567          void fun87(void) //F6_E4ÒôÁ¿´óÐ¡µ÷Õû
1568          {
1569   1              unsigned char temp = 0;
1570   1              temp = return_Two_Menu_F6_E4();
1571   1              GD5800_sound_volume(temp * 3);
1572   1              Show_one_number(temp);
1573   1      }
1574          
1575          void fun88(void) //F6_E5ÆÁÄ»ÁÁ¶Èµ÷Õû
1576          {
1577   1              unsigned char temp = 0;
1578   1              temp = return_Two_Menu_F6_E5();
1579   1              Show_one_number(temp);
1580   1      }
1581          
1582          void fun89(void) //F7_E1 999*9
1583          {
1584   1              unsigned char temp = 0;
1585   1              temp = return_Two_Menu_F7_E1();
1586   1              if (temp < 10)
1587   1              {
1588   2                      Show_one_number(temp);
1589   2              }
1590   1              else if (temp<11)
1591   1              {
1592   2                      Show_on();
1593   2              }
1594   1              else
1595   1              {
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 27  

1596   2                      Show_off();
1597   2              }
1598   1      }
1599          
1600          void fun90(void) //F7_E2 9999*9
1601          {
1602   1              unsigned char temp = 0;
1603   1              temp = return_Two_Menu_F7_E2();
1604   1              Show_one_number(temp);
1605   1      }
1606          
1607          void fun91(void) //F7_E3 999*99
1608          {
1609   1              unsigned char temp = 0;
1610   1              temp = return_Two_Menu_F7_E3();
1611   1              Show_one_number(temp);
1612   1      }
1613          
1614          void fun92(void) //F7_E4 9999*99
1615          {
1616   1              unsigned char temp = 0;
1617   1              temp = return_Two_Menu_F7_E4();
1618   1              Show_one_number(temp);
1619   1      }
1620          
1621          void fun93(void) //F8_E1µ¥¼üÎ»¸ú¶à¼üÎ»ÇÐ»»
1622          {
1623   1              unsigned char temp = 0;
1624   1              temp = return_Two_Menu_F8_E1();
1625   1              Show_one_number(temp);
1626   1              if (temp != Two_Menu_F8_E1_save)
1627   1              {
1628   2                      Delete_all_data();
1629   2                      Two_Menu_F8_E1_save = temp;
1630   2                      if (return_sound_table() == 1)
1631   2                      {
1632   3                              GD5800_select_chapter(CHENGGONG);
1633   3      
1634   3                              set_sound_table(0);
1635   3                      }
1636   2              }
1637   1      }
1638          
1639          void fun94(void) //F8_E2¼üÎ»ÉèÖÃ
1640          {
1641   1              unsigned char temp = 0;
1642   1              temp = return_Two_Menu_F8_E2();
1643   1              Show_two_number(temp);
1644   1              if (return_sound_table() == 1)
1645   1              {
1646   2                      delay10ms();
1647   2                      GD5800_stop_music();
1648   2                      delay10ms();
1649   2                      GD5800_select_chapter(temp + QUXIAO);
1650   2                      delay10ms();
1651   2                      set_sound_table(0);
1652   2              }
1653   1              if (return_Two_menu_set_success() == 1)
1654   1              {
1655   2                      GD5800_stop_music();
1656   2                      delay10ms();
1657   2                      GD5800_select_chapter(CHENGGONG);
C51 COMPILER V9.00   TM1629                                                                10/16/2015 14:36:03 PAGE 28  

1658   2                      set_Two_menu_set_success(0);
1659   2              }
1660   1      }
1661          
1662          void fun95(void) //½âÂë²Ëµ¥
1663          {
1664   1              unsigned char Two_Menu_F6_E1_temp = 0;
1665   1              Two_Menu_F6_E1_temp = return_Two_Menu_F6_E1();
1666   1              tm1629_load();
1667   1              switch ( display_ram[5] & 0x0f)//ÏÔÊ¾ºô½ÐÀàÐÍ
1668   1              {
1669   2              case 2:
1670   2                              buf_display[0][0] |= 0x80;
1671   2                              buf_display[0][1] |= 0x80;
1672   2                              
1673   2                              break;//7¼ü
1674   2              case 3:
1675   2                              buf_display[0][0] |= 0x80;
1676   2                              buf_display[0][1] |= 0x80;
1677   2                              buf_display[0][2] |= 0x80;
1678   2                              buf_display[0][3] |= 0x80;
1679   2                              break;//78¼ü
1680   2              case 4:
1681   2                              buf_display[0][0] |= 0x80;
1682   2                              buf_display[0][1] |= 0x80;
1683   2                              buf_display[0][2] |= 0x80;
1684   2                              break;//6¼ü
1685   2              case 7:
1686   2                              buf_display[0][1] |= 0x80;
1687   2                              break;//678¼ü
1688   2              case 8: 
1689   2                              buf_display[0][0] |= 0x80; 
1690   2                              break;//5¼ü
1691   2              default:break;
1692   2              }
1693   1              display();
1694   1      
1695   1              if (display_ram[0] == BAOJING - QUXIAO || display_ram[0] == BAOJING_1 || Two_Menu_F6_E1_temp == 5)
1696   1              {
1697   2                      if (P24 == 1)
1698   2                      {
1699   3                              GD5800_select_chapter(BAOJING);
1700   3                      }       
1701   2              }
1702   1              
1703   1      
1704   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   6086    ----
   CONSTANT SIZE    =     24    ----
   XDATA SIZE       =    353      71
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
