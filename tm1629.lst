C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE TM1629
OBJECT MODULE PLACED IN tm1629.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Receiver\tm1629.c LARGE BROWSE INCDIR(.\Receiver) DEBUG OBJECTEXTEND PRINT(
                    -.\tm1629.lst) OBJECT(tm1629.obj)

line level    source

   1          #include "tm1629.h"
   2          #include "timer.h"
   3          #include "usart.h"
   4          #include "ds1302.h"
   5          #include "key.h"
   6          #include "menu.h"
   7          #include "gd5800.h"
   8          #include "at24c256.h"
   9          #include "ev1527.h"
  10          
  11          unsigned char const CODE[] = { 0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07, 0x7F, 0x6F, 0x77, 0x7C, 0x3
             -9, 0x5E, 0x79, 0x71, 0x76, 0x38, 0x5c, 0x73, 0x3e };//0-9 abcdef ÏÔÊ¾Æ÷ÂëÊý×é
  12          unsigned char const INIT_CODE[] = { 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80 };//Öð¶ÎµãÁÁÊýÂë¹ÜÊý×é
  13          unsigned char const SHANGSHUO[] = { 0x40, 0x00 }; // µãÁÁÊýÂë¹ÜÖÐ¼ä¶ÎÒÔ¼°Ãð
  14          unsigned char buf_display[6][8] = { 0 }; //3¸öTM1629ÏÔ´æÊý×é
  15          unsigned char display_ram[240] = { 0 }; //³ÌÐòÔËÐÐÊ±¼ÇÂ¼ÏÔÊ¾Êý¾ÝµÄÄÚ´æ 
  16          unsigned char await_time_table= 0 ;//ÓÃÓÚ¼ÇÂ¼´ý»úÏÔÊ¾ºá¸ÜÊýÂë¹Ü´ÎÊý 
  17          unsigned char Two_Menu_F8_E1_save =0;
  18          
  19          unsigned char single_key[16]   = { 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
             - 0x01, 0x01, 0x01, 0x01 };//µ¥¼üÎ»ÉèÖÃ´æ´¢Êý×é
  20          unsigned char multiple_key[16] = { 0x01, QUXIAO-QUXIAO, JIEZHANG-QUXIAO, 0x01, JIUSHUI-QUXIAO, 0X01, 0x01,
             - 0x01, HUJIAO - QUXIAO, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01 };//¶à¼üÎ»ÉèÖÃ´æ´¢Êý×é
  21          
  22          void writeDataTo1629(unsigned char p) //Ð´Êý¾Ý¸øµÚÒ»¸öTM1629
  23          {
  24   1              unsigned int i;
  25   1              TM1629_STB = 0;
  26   1              for (i = 0; i<8; i++)
  27   1              {
  28   2                      TM1629_CLK = 0;
  29   2                      if (p & 0x01)
  30   2                              TM1629_DIO = 1;
  31   2                      else
  32   2                              TM1629_DIO = 0;
  33   2                      _nop_();
  34   2                      _nop_();
  35   2                      _nop_();
  36   2                      _nop_();
  37   2                      TM1629_CLK = 1;
  38   2                      p = p >> 1;
  39   2              }
  40   1              TM1629_CLK = 0;
  41   1              TM1629_DIO = 0;
  42   1      }
  43          
  44          void writeDataTo1629_2(unsigned char p) //Ð´Êý¾Ý¸øµÚ¶þ¸öTM1629
  45          {
  46   1              unsigned int i;
  47   1              TM1629_STB2 = 0;
  48   1              for (i = 0; i<8; i++)
  49   1              {
  50   2                      TM1629_CLK = 0;
  51   2                      if (p & 0x01)
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 2   

  52   2                              TM1629_DIO = 1;
  53   2                      else
  54   2                              TM1629_DIO = 0;
  55   2                      _nop_();
  56   2                      _nop_();
  57   2                      _nop_();
  58   2                      _nop_();
  59   2                      TM1629_CLK = 1;
  60   2                      p = p >> 1;
  61   2              }
  62   1              TM1629_CLK = 0;
  63   1              TM1629_DIO = 0;
  64   1      }
  65          
  66          void writeDataTo1629_3(unsigned char p) //Ð´Êý¾Ý¸øµÚÈý¸öTM1629
  67          {
  68   1              unsigned int i;
  69   1              TM1629_STB3 = 0;
  70   1              for (i = 0; i<8; i++)
  71   1              {
  72   2                      TM1629_CLK = 0;
  73   2                      if (p & 0x01)
  74   2                              TM1629_DIO = 1;
  75   2                      else
  76   2                              TM1629_DIO = 0;
  77   2                      _nop_();
  78   2                      _nop_();
  79   2                      _nop_();
  80   2                      _nop_();
  81   2                      TM1629_CLK = 1;
  82   2                      p = p >> 1;
  83   2              }
  84   1              TM1629_CLK = 0;
  85   1              TM1629_DIO = 0;
  86   1      }
  87          
  88          void send_command(unsigned char word) //Ð´ÃüÁî¸øµÚÒ»¸öTM1629
  89          {
  90   1              TM1629_STB = 1;
  91   1              nop;
  92   1              TM1629_STB = 0;
  93   1              writeDataTo1629(word);
  94   1      }
  95          
  96          void send_command_2(unsigned char word) //Ð´ÃüÁî¸øµÚ¶þ¸öTM1629
  97          {
  98   1              TM1629_STB2 = 1;
  99   1              nop;
 100   1              TM1629_STB2 = 0;
 101   1              writeDataTo1629_2(word);
 102   1      }
 103          
 104          void send_command_3(unsigned char word) //Ð´ÃüÁî¸øµÚÈý¸öTM1629
 105          {
 106   1              TM1629_STB3 = 1;
 107   1              nop;
 108   1              TM1629_STB3 = 0;
 109   1              writeDataTo1629_3(word);
 110   1      }
 111          
 112          void display(void) //3¸öTM1629ÏÔÊ¾º¯Êý
 113          {
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 3   

 114   1              unsigned char i,temp;
 115   1              temp = return_Two_Menu_F6_E5();
 116   1              send_command(0x40);     //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 117   1              send_command(0xc0);     //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 118   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 119   1              {
 120   2                      writeDataTo1629(buf_display[0][i]);
 121   2                      writeDataTo1629(buf_display[1][i]);
 122   2              }
 123   1              send_command(0x88 + temp);      //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 124   1              TM1629_STB = 1;
 125   1      
 126   1              send_command_2(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 127   1              send_command_2(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 128   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 129   1              {
 130   2                      writeDataTo1629_2(buf_display[2][i]);
 131   2                      writeDataTo1629_2(buf_display[3][i]);
 132   2              }
 133   1              send_command_2(0x88 + temp);    //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 134   1              TM1629_STB2 = 1;
 135   1      
 136   1              send_command_3(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 137   1              send_command_3(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 138   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 139   1              {
 140   2                      writeDataTo1629_3(buf_display[4][i]);
 141   2                      writeDataTo1629_3(buf_display[5][i]);
 142   2              }
 143   1              send_command_3(0x88 + temp);    //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 144   1              TM1629_STB3 = 1;
 145   1      }
 146          
 147          
 148          void tm1629_init(void) //TM1629¿ª»ú³õÊ¼»¯º¯Êý
 149          {
 150   1              unsigned char i, j, k;          //k¿ØÖÆÏÔÊ¾µÄ¾ßÌåÊý×Ö£¬iºÍj¿ØÖÆbuf_displayµÄË¢ÐÂ
 151   1              for (k = 0; k<8; k++)
 152   1              {
 153   2                      for (i = 0; i<6; i++)
 154   2                      {
 155   3                              for (j = 0; j<8; j++)
 156   3                              {
 157   4                                      buf_display[i][j] = INIT_CODE[k];
 158   4                              }
 159   3                      }
 160   2                      display();
 161   2                      Tm1629_delay(30);
 162   2              }
 163   1      }
 164          
 165          
 166          void Tm1629_delay(unsigned char k) //ÑÓÊ±º¯Êý
 167          {
 168   1              unsigned char i, j;
 169   1              for (; k>0; k--)
 170   1              {
 171   2                      for (i = 255; i>0; i--)
 172   2                      {
 173   3                              for (j = 255; j>0; j--)
 174   3                              {
 175   4                                      ;
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 4   

 176   4      
 177   4                              }
 178   3                      }
 179   2              }
 180   1      }
 181          
 182          void tm1629_clear(void)//È«²¿¹éÁã
 183          {
 184   1              unsigned char i, j;
 185   1              for (i = 0; i<6; i++)
 186   1              {
 187   2                      for (j = 0; j<8; j++)
 188   2                      {
 189   3                              buf_display[i][j] = 0x00;
 190   3                      }
 191   2              }
 192   1      }
 193          
 194          void tm1629_display_buff_clear(void)//Çå³ý¶ÓÁÐ»º´æ
 195          {
 196   1              unsigned char i;
 197   1              for (i = 0; i<120; i++)
 198   1                      display_ram[i] = 0;
 199   1      }
 200          
 201          void tm1629_await(void)
 202          {
 203   1              unsigned char i;        //k¿ØÖÆÏÔÊ¾µÄ¾ßÌåÊý×Ö£¬iºÍj¿ØÖÆbuf_displayµÄË¢ÐÂ
 204   1              unsigned char await_number_table_temp = 0;
 205   1              await_number_table_temp = return_await_number_table();
 206   1              if (await_number_table_temp == 1)
 207   1              {
 208   2                      //GD5800_select_chapter(0x0008) ;
 209   2                      tm1629_clear();
 210   2                      i = await_time_table & 0x03;
 211   2                      buf_display[0][i] = 0x40;
 212   2                      display();
 213   2                      set_await_number_table(0);
 214   2                      await_time_table++;
 215   2                      if (await_time_table == 4)
 216   2                              await_time_table = 0;
 217   2              }
 218   1      }
 219          
 220          void Display_time(void)
 221          {
 222   1              tm1629_clear();
 223   1              Ds1302_Read_Time(); 
 224   1              buf_display[1][7] = CODE[2];                            //Äê
 225   1              buf_display[1][6] = CODE[0];
 226   1              buf_display[1][5] = CODE[time_buf1[1] / 10];
 227   1              buf_display[1][4] = CODE[time_buf1[1] % 10];
 228   1      
 229   1              buf_display[1][3] = 0x40;                                        // -
 230   1              
 231   1              buf_display[1][2] = CODE[time_buf1[2] / 10]; //ÔÂ
 232   1              buf_display[1][1] = CODE[time_buf1[2] % 10];
 233   1      
 234   1              buf_display[1][0] = 0x40;                                        // -
 235   1      
 236   1              buf_display[0][7] = CODE[time_buf1[3] / 10];
 237   1              buf_display[0][6] = CODE[time_buf1[3] % 10];//ÈÕ
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 5   

 238   1      
 239   1              buf_display[0][5] = CODE[time_buf1[7]];         //ÐÇÆÚ
 240   1      
 241   1              buf_display[0][3] = CODE[time_buf1[4] / 10]; //Ð¡Ê±
 242   1              buf_display[0][2] = CODE[time_buf1[4] % 10];
 243   1              buf_display[0][1] = CODE[time_buf1[5] / 10]; //Ð¡Ê±
 244   1              buf_display[0][0] = CODE[time_buf1[5] % 10];
 245   1      
 246   1              display();
 247   1      
 248   1      }
 249          
 250          void tm1629_f(unsigned char f_number) //µÚÒ»ÐÐµ¹Êý¶þ¸öÏÔÊ¾F,µ¹ÊýµÚÒ»¸öÏÔÊ¾f_number
 251          {
 252   1              tm1629_clear();
 253   1              buf_display[0][1] = CODE[0x0f];
 254   1              buf_display[0][0] = CODE[f_number];
 255   1              display();
 256   1      }
 257          
 258          void tm1629_E(unsigned char f_number) //µÚÒ»ÐÐµ¹Êý¶þ¸öÏÔÊ¾F,µ¹ÊýµÚÒ»¸öÏÔÊ¾f_number
 259          {
 260   1              tm1629_clear();
 261   1              buf_display[0][1] = CODE[0x0E];
 262   1              buf_display[0][0] = CODE[f_number];
 263   1              display();
 264   1      }
 265          void Show_on(void)
 266          {
 267   1              tm1629_clear();
 268   1              buf_display[0][1] = CODE[0];
 269   1              buf_display[0][0] = 0x37;
 270   1              display();
 271   1      }
 272          
 273          void Show_off(void)
 274          {
 275   1              tm1629_clear();
 276   1              buf_display[0][1] = CODE[0x00];
 277   1              buf_display[0][0] = CODE[0x0f];
 278   1              display();
 279   1      }
 280          
 281          void Show_one_number(unsigned char f_number) //ÏÔÊ¾Ò»¸öÊý×Ö
 282          {
 283   1              tm1629_clear();
 284   1              //buf_display[0][1] = CODE[0x0E];
 285   1              buf_display[0][0] = CODE[f_number];
 286   1              display();
 287   1      }
 288          
 289          void Show_two_number(unsigned char f_number) //ÏÔÊ¾Á½¸öÊý×Ö
 290          {
 291   1              tm1629_clear();
 292   1              buf_display[0][1] = CODE[f_number / 10];
 293   1              buf_display[0][0] = CODE[f_number % 10];
 294   1              display();
 295   1      }
 296          
 297          
 298          void Show_three_number(unsigned int f_number) //ÏÔÊ¾Èý¸öÊý×Ö
 299          {
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 6   

 300   1              tm1629_clear();
 301   1              buf_display[0][2] = CODE[f_number / 100];
 302   1              buf_display[0][1] = CODE[(f_number / 10) %10];
 303   1              buf_display[0][0] = CODE[f_number % 10];
 304   1              display();
 305   1      }
 306          
 307          void Show_four_number(unsigned char* temp)
 308          {
 309   1              tm1629_clear();
 310   1              buf_display[0][3] = CODE[*(temp)];
 311   1              buf_display[0][2] = CODE[*(temp+1)];
 312   1              buf_display[0][1] = CODE[*(temp+2)];
 313   1              buf_display[0][0] = CODE[*(temp+3)];
 314   1              display();
 315   1      }
 316          
 317          void tm1629_load(void)
 318          {
 319   1              tm1629_clear();
 320   1              if (*(display_ram + 66) != 0)
 321   1                      mcuram_to_displayram(buf_display[5] + 7, display_ram + 66);
 322   1              if (*(display_ram + 60) != 0)
 323   1                      mcuram_to_displayram(buf_display[5] + 3, display_ram + 60);
 324   1              if (*(display_ram + 54) != 0)
 325   1                      mcuram_to_displayram(buf_display[4] + 7, display_ram + 54);
 326   1              if (*(display_ram + 48) != 0)
 327   1                      mcuram_to_displayram(buf_display[4] + 3, display_ram + 48);
 328   1              if (*(display_ram + 42) != 0)
 329   1                      mcuram_to_displayram(buf_display[3] + 7, display_ram + 42);
 330   1              if (*(display_ram + 36) != 0)
 331   1                      mcuram_to_displayram(buf_display[3] + 3, display_ram + 36);
 332   1              if (*(display_ram + 30) != 0)
 333   1                      mcuram_to_displayram(buf_display[2] + 7, display_ram + 30);
 334   1              if (*(display_ram + 24) != 0)
 335   1                      mcuram_to_displayram(buf_display[2] + 3, display_ram + 24);
 336   1              if (*(display_ram + 18) != 0)
 337   1                      mcuram_to_displayram(buf_display[1] + 7, display_ram + 18);
 338   1              if (*(display_ram + 12) != 0)
 339   1                      mcuram_to_displayram(buf_display[1] + 3, display_ram + 12);
 340   1              if (*(display_ram + 6) != 0)
 341   1                      mcuram_to_displayram(buf_display[0] + 7, display_ram + 6);
 342   1              if (*(display_ram + 0) != 0)
 343   1                      mcuram_to_displayram(buf_display[0] + 3, display_ram);
 344   1      }
 345          
 346          void mcuram_to_displayram(unsigned char a[48], unsigned char* b)  //´ÓRAMÇøÓòÒÆµ½ÏÔ´æÇøÓò,Ë³´ø·­Òë³ÉÊýÂë¹Ü
             -ÏÔÊ¾µÄÂë
 347          {
 348   1              /*
 349   1              A// Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 350   1              B// Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 351   1              */
 352   1              *(a) = CODE[*(b + 1)];
 353   1              *(a - 1) = CODE[*(b + 2)];
 354   1              *(a - 2) = CODE[*(b + 3)];
 355   1              *(a - 3) = CODE[*(b + 4)];
 356   1      }
 357          
 358          void decoder_temp_to_mcuram(unsigned char* a, unsigned char* index)//aÎªMCU»º´æÇø   indexÎª½âÂëºóÈ¡³öµÄ8×Ö
             -½ÚÁÙÊ±Êý×é
 359          {
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 7   

 360   1              *(a + 0) = *(index);
 361   1              *(a + 1) = *(index + 1);
 362   1              *(a + 2) = *(index + 2);
 363   1              *(a + 3) = *(index + 3);
 364   1              *(a + 4) = *(index + 4);
 365   1              *(a + 5) = *(index + 7);//±£´æ°´¼üµÄ¼üÖµ
 366   1      }
 367          
 368          void mcuram_to_mcuram_down(unsigned char* a) //aÎªMCURAM»º´æÇøÇø   ÏòÏÂÑ¹Ò»×éÊý¾Ý
 369          {
 370   1              *(a + 6) = *(a);                //ramÇøÔªËØÏÂÒÆ6¸ö
 371   1              *(a + 7) = *(a + 1);
 372   1              *(a + 8) = *(a + 2);
 373   1              *(a + 9) = *(a + 3);
 374   1              *(a + 10) = *(a + 4);
 375   1              *(a + 11) = *(a + 5);
 376   1      
 377   1      }
 378          
 379          void mcuram_to_mcuram_up(unsigned char* a) //aÎªMCURAM»º´æÇøÇø   ÏòÉÏÑ¹Ò»×éÊý¾Ý
 380          {
 381   1              *(a) = *(a + 6);   //ramÇøÔªËØÉÏÒÆ6¸ö
 382   1              *(a + 1) = *(a + 7);
 383   1              *(a + 2) = *(a + 8);
 384   1              *(a + 3) = *(a + 9);
 385   1              *(a + 4) = *(a + 10);
 386   1              *(a + 5) = *(a + 11);
 387   1      }
 388          
 389          void CycleProcess(void)
 390          {
 391   1              unsigned char i, index;
 392   1              unsigned char f5_xunhuan, f4_xiaohao, logout_cycle_table_temp;
 393   1              unsigned char temp[6] = { 0 };
 394   1              unsigned char Two_Menu_F6_E3_temp = 0;
 395   1              unsigned char Two_Menu_F6_E1_temp = 0;
 396   1      
 397   1              Two_Menu_F6_E3_temp = return_Two_Menu_F6_E3();
 398   1              Two_Menu_F6_E1_temp = return_Two_Menu_F6_E1();
 399   1      
 400   1              f5_xunhuan = return_Two_Menu_F5_E1();
 401   1              f4_xiaohao = return_Two_Menu_F4_E1();
 402   1              logout_cycle_table_temp = return_logout_cycle_table();
 403   1              /*Ñ­»·´¦Àíº¯Êý*/
 404   1              if ((f5_xunhuan<f4_xiaohao && logout_cycle_table_temp>f5_xunhuan && f4_xiaohao && f5_xunhuan) || (f4_xiao
             -hao == 0 && f5_xunhuan &&logout_cycle_table_temp>f5_xunhuan))
 405   1              {
 406   2                      for (i = 0; i<10; i++)
 407   2                      {
 408   3                              if (display_ram[i * 6 ] == 0)
 409   3                              {
 410   4                                      index = i;
 411   4                                      break;
 412   4                              }
 413   3                      }
 414   2      
 415   2                      for (i = 0; i<6; i++)
 416   2                      {
 417   3                              temp[i] = display_ram[(index - 1) * 6 + i];
 418   3                      }
 419   2      
 420   2                      for (i = index; i>1; i--)
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 8   

 421   2                      {
 422   3                              mcuram_to_mcuram_down(display_ram + (i - 2) * 6);
 423   3                      }
 424   2                      for (i = 0; i<6; i++)
 425   2                      {
 426   3                              display_ram[i] = temp[i];
 427   3                      }
 428   2                      tm1629_load();
 429   2                      display();
 430   2                      set_logout_cycle_table(0);
 431   2                      if (Two_Menu_F6_E3_temp == 1)
 432   2                      {
 433   3                                      submenuf6_1(Two_Menu_F6_E1_temp, display_ram, display_ram[0], display_ram[5] & 0x0f);
 434   3                      }
 435   2              }
 436   1      }
 437          
 438          void LogoutProcess(void)
 439          {
 440   1              unsigned char i;
 441   1              unsigned char f5_xunhuan, f4_xiaohao, logout_cycle_table_temp, Two_Menu_F3_E2_temp, Two_Menu_F3_E1_temp;
 442   1              unsigned char Two_Menu_F6_E1_temp = 0;
 443   1              unsigned char Two_Menu_F6_E2_temp = 0;
 444   1      
 445   1              f5_xunhuan = return_Two_Menu_F5_E1();
 446   1              f4_xiaohao = return_Two_Menu_F4_E1();
 447   1              logout_cycle_table_temp = return_logout_cycle_table();
 448   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 449   1              Two_Menu_F3_E1_temp = return_Two_Menu_F3_E1();
 450   1              Two_Menu_F6_E2_temp = return_Two_Menu_F6_E2();
 451   1              /*ÏúºÅ´¦Àíº¯Êý*/
 452   1              if ((f4_xiaohao<f5_xunhuan&& logout_cycle_table_temp>f4_xiaohao && f5_xunhuan && f4_xiaohao) || (f5_xunhu
             -an == 0 && f4_xiaohao && logout_cycle_table_temp>f4_xiaohao))
 453   1              {
 454   2                      for (i = 0; i<(Two_Menu_F3_E2_temp - 1); i++)
 455   2                      {
 456   3                              mcuram_to_mcuram_up(display_ram + i * 6);
 457   3                      }
 458   2                      for (i = (Two_Menu_F3_E2_temp - 1) * 6; i<Two_Menu_F3_E2_temp * 6; i++)
 459   2                      {
 460   3                              display_ram[i] = 0;
 461   3                      }
 462   2                      tm1629_load();
 463   2                      display();
 464   2                      set_logout_cycle_table(0);
 465   2                      if (display_ram[0] == 0)
 466   2                      {
 467   3                              set_func_index(MENU_STANDBY);
 468   3                      }
 469   2                      else if (Two_Menu_F3_E1_temp == 2)
 470   2                      {
 471   3                              for (i = 0; i < Two_Menu_F6_E2_temp; i++)
 472   3                              {
 473   4                                      submenuf6_1(Two_Menu_F6_E1_temp, display_ram, display_ram[0], display_ram[5] & 0x0f);
 474   4                              }
 475   3                      }
 476   2              }
 477   1      }
 478          
 479          
 480          
 481          
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 9   

 482          
 483          void Logout(void)
 484          {
 485   1              unsigned char i;
 486   1              unsigned char Two_Menu_F3_E2_temp= 0;
 487   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 488   1              /*ÏúºÅ´¦Àíº¯Êý*/
 489   1              for (i = 0; i<(Two_Menu_F3_E2_temp - 1); i++)
 490   1              {
 491   2                      mcuram_to_mcuram_up(display_ram + i * 6);
 492   2              }
 493   1              for (i = (Two_Menu_F3_E2_temp - 1) * 6; i<Two_Menu_F3_E2_temp * 6; i++)
 494   1              {
 495   2                      display_ram[i] = 0;
 496   2              }
 497   1              tm1629_load();
 498   1              display();
 499   1              if (display_ram[0] == 0)
 500   1              {
 501   2                      set_func_index(MENU_STANDBY);
 502   2              }
 503   1      }
 504          
 505          void CycleUp(void)
 506          {
 507   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 508   1              unsigned char temp[6] = { 0 };
 509   1              index = return_Two_Menu_F3_E2();
 510   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 511   1              /*Ñ­»·´¦Àíº¯Êý*/
 512   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 513   1              {
 514   2                      if (display_ram[i * 6 ] == 0)
 515   2                      {
 516   3                              index = i;
 517   3                              break;
 518   3                      }
 519   2              }
 520   1              for (i = 0; i<6; i++)
 521   1              {
 522   2                      temp[i] = display_ram[i];
 523   2              }
 524   1              for (i = 0; i<index; i++)
 525   1              {
 526   2                      mcuram_to_mcuram_up(display_ram + i * 6);
 527   2              }
 528   1              for (i = 0; i<6; i++)
 529   1              {
 530   2                      display_ram[(index - 1) * 6 + i] = temp[i];
 531   2              }
 532   1              tm1629_load();
 533   1              display();
 534   1      }
 535          
 536          void CycleDown(void)
 537          {
 538   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 539   1              unsigned char temp[6] = { 0 };
 540   1              index = return_Two_Menu_F3_E2();
 541   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 542   1              /*Ñ­»·´¦Àíº¯Êý*/
 543   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 10  

 544   1              {
 545   2                      if (display_ram[i * 6 ] == 0)
 546   2                      {
 547   3                              index = i;
 548   3                              break;
 549   3                      }
 550   2              }
 551   1      
 552   1              for (i = 0; i<6; i++)
 553   1              {
 554   2                      temp[i] = display_ram[(index - 1) * 6 + i];
 555   2              }
 556   1      
 557   1              for (i = index; i>1; i--)
 558   1              {
 559   2                      mcuram_to_mcuram_down(display_ram + (i - 2) * 6);
 560   2              }
 561   1              for (i = 0; i<6; i++)
 562   1              {
 563   2                      display_ram[i] = temp[i];
 564   2              }
 565   1              tm1629_load();
 566   1              display();
 567   1      }
 568          
 569          void Cancel_funtion(unsigned char* id_number, unsigned char* buff)//id_numberÎª½âÂëµÄtempÊý×é£¬buffÎªÏÔÊ¾»
             -º´æ
 570          {
 571   1              /*
 572   1              id_number  //  ÐòºÅ¡¢½ÓÊÕºÅ*3¡¢ID*3¡¢ÇøºÅ
 573   1              buff    //                ÐòºÅ¡¢Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 574   1              */
 575   1      
 576   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 577   1              unsigned char temp[6] = { 0 };
 578   1              index = return_Two_Menu_F3_E2();
 579   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 580   1      
 581   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 582   1              {
 583   2                      if (*(id_number + 1) == *(buff + i * 6 + 1) && *(id_number + 2) == *(buff + i * 6 + 2) && *(id_number + 
             -3) == *(buff + i * 6 + 3) && *(id_number + 4) == *(buff + i * 6 + 4))
 584   2                      {
 585   3                              index = i;
 586   3                              break;
 587   3                      }
 588   2              }
 589   1              for (i = index; i<Two_Menu_F3_E2_temp; i++)
 590   1              {
 591   2                      mcuram_to_mcuram_up(buff + i * 6);
 592   2              }
 593   1              if (index != Two_Menu_F3_E2_temp)
 594   1              {
 595   2                      for (i = 0; i<6; i++)
 596   2                      {
 597   3                              *(buff + (Two_Menu_F3_E2_temp - 1) * 6 + i) = 0;
 598   3                      }
 599   2              }
 600   1              if (*(buff) == 0)
 601   1              {
 602   2                      set_func_index(MENU_STANDBY);
 603   2              }
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 11  

 604   1      }
 605          
 606          
 607          void fun0(void) //´ý»úÏÔÊ¾º¯Êý
 608          {
 609   1              unsigned char temp = 0;
 610   1              temp = return_Two_Menu_FC_E1();
 611   1              if (temp == 1)
 612   1              {
 613   2                      tm1629_await();
 614   2              }
 615   1              else
 616   1              {
 617   2                      Display_time();
 618   2              }
 619   1              tm1629_display_buff_clear();
 620   1      }
 621          
 622          void fun1(void) //Ò»¼¶²Ëµ¥F0
 623          {
 624   1              tm1629_f(0x00);
 625   1      }
 626          
 627          void fun2(void) //Ò»¼¶²Ëµ¥F1
 628          {
 629   1              tm1629_f(0x01);
 630   1      }
 631          
 632          void fun3(void) //Ò»¼¶²Ëµ¥F2
 633          {
 634   1              tm1629_f(0x02);
 635   1      }
 636          
 637          void fun4(void) //Ò»¼¶²Ëµ¥F3
 638          {
 639   1              tm1629_f(0x03);
 640   1      }
 641          
 642          void fun5(void) //Ò»¼¶²Ëµ¥F4
 643          {
 644   1              tm1629_f(0x04);
 645   1      }
 646          
 647          void fun6(void) //Ò»¼¶²Ëµ¥F5
 648          {
 649   1              tm1629_f(0x05);
 650   1      }
 651          
 652          void fun7(void) //Ò»¼¶²Ëµ¥F6
 653          {
 654   1              tm1629_f(0x06);
 655   1      }
 656          
 657          void fun8(void) //Ò»¼¶²Ëµ¥F7
 658          {
 659   1              tm1629_f(0x07);
 660   1      }
 661          
 662          void fun9(void) //Ò»¼¶²Ëµ¥F8
 663          {
 664   1              tm1629_f(0x08);
 665   1      }
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 12  

 666          
 667          void fun10(void) //Ò»¼¶²Ëµ¥F9
 668          {
 669   1              tm1629_f(0x09);
 670   1      }
 671          
 672          void fun11(void) //Ò»¼¶²Ëµ¥FA
 673          {
 674   1              tm1629_f(0x0a);
 675   1      }
 676          
 677          void fun12(void) //Ò»¼¶²Ëµ¥Fb
 678          {
 679   1              tm1629_f(0x0b);
 680   1      }
 681          
 682          void fun13(void) //Ò»¼¶²Ëµ¥FC
 683          {
 684   1              tm1629_f(0x0c);
 685   1      }
 686          
 687          void fun14(void) //Ò»¼¶²Ëµ¥Fd
 688          {
 689   1              tm1629_f(0x0d);
 690   1      }
 691          
 692          void fun15(void) //ÉèÖÃÄê·Ý
 693          {
 694   1              unsigned char temp;
 695   1              temp = return_Two_Menu_FC_E1();
 696   1              if (temp == 1)//Èç¹ûÎª----  Ôò²»ÈÃ½øÈëF0
 697   1              {
 698   2                      set_func_index(ONE_MENU_F0);
 699   2              }
 700   1              else
 701   1              {
 702   2                      if (return_await_number_table() == 1)
 703   2                      {
 704   3                              Display_time();
 705   3                              set_await_number_table(2);
 706   3                      }
 707   2                      if (return_await_number_table() == 3)
 708   2                      {
 709   3                              buf_display[1][7] = 0;
 710   3                              buf_display[1][6] = 0;
 711   3                              buf_display[1][5] = 0;
 712   3                              buf_display[1][4] = 0;
 713   3                              display();
 714   3                              set_await_number_table(0);
 715   3                      }
 716   2                      Ds1302_Write_Time();
 717   2              }
 718   1      }
 719          
 720          void fun16(void) //ÉèÖÃÔÂ·Ý
 721          {
 722   1              if (return_await_number_table() == 1)
 723   1              {
 724   2                      Display_time();
 725   2                      set_await_number_table(2);
 726   2              }
 727   1              if (return_await_number_table() == 3)
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 13  

 728   1              {
 729   2                      buf_display[1][2] = 0;
 730   2                      buf_display[1][1] = 0;
 731   2                      display();
 732   2                      set_await_number_table(0);
 733   2              }
 734   1              Ds1302_Write_Time();
 735   1      }
 736          
 737          void fun17(void) //ÉèÖÃÈÕÆÚ
 738          {
 739   1              if (return_await_number_table() == 1)
 740   1              {
 741   2                      Display_time();
 742   2                      set_await_number_table(2);
 743   2              }
 744   1              if (return_await_number_table() == 3)
 745   1              {
 746   2                      buf_display[0][7] = 0;
 747   2                      buf_display[0][6] = 0;
 748   2                      display();
 749   2                      set_await_number_table(0);
 750   2              }
 751   1              Ds1302_Write_Time();
 752   1      }
 753          
 754          void fun18(void) //ÉèÖÃÐÇÆÚ
 755          {
 756   1              if (return_await_number_table() == 1)
 757   1              {
 758   2                      Display_time();
 759   2                      set_await_number_table(2);
 760   2              }
 761   1              if (return_await_number_table() == 3)
 762   1              {
 763   2                      buf_display[0][5] = 0;
 764   2                      display();
 765   2                      set_await_number_table(0);
 766   2              }
 767   1              Ds1302_Write_Time();
 768   1      }
 769          
 770          void fun19(void) //ÉèÖÃÐ¡Ê±
 771          {
 772   1              if (return_await_number_table() == 1)
 773   1              {
 774   2                      Display_time();
 775   2                      set_await_number_table(2);
 776   2              }
 777   1              if (return_await_number_table() == 3)
 778   1              {
 779   2                      buf_display[0][3] = 0;
 780   2                      buf_display[0][2] = 0;
 781   2                      display();
 782   2                      set_await_number_table(0);
 783   2              }
 784   1              Ds1302_Write_Time();
 785   1      }
 786          
 787          void fun20(void) //ÉèÖÃ·ÖÖÓ
 788          {
 789   1              if (return_await_number_table() == 1)
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 14  

 790   1              {
 791   2                      Display_time();
 792   2                      set_await_number_table(2);
 793   2              }
 794   1              if (return_await_number_table() == 3)
 795   1              {
 796   2                      buf_display[0][1] = 0;
 797   2                      buf_display[0][0] = 0;
 798   2                      display();
 799   2                      set_await_number_table(0);
 800   2              }
 801   1              Ds1302_Write_Time();
 802   1      }
 803          
 804          void fun21(void) //¶þ¼¶²Ëµ¥F1-E1
 805          {
 806   1              tm1629_E(0x01);
 807   1              Two_Menu_F1_E1[0] = 0;
 808   1              Two_Menu_F1_E1[1] = 0;
 809   1              Two_Menu_F1_E1[2] = 0;
 810   1              Two_Menu_F1_E1[3] = 1;
 811   1      }
 812          
 813          void fun22(void) //¶þ¼¶²Ëµ¥F1-E2
 814          {
 815   1              tm1629_E(0x02);
 816   1              Two_Menu_F1_E2[0] = 0;
 817   1              Two_Menu_F1_E2[1] = 0;
 818   1              Two_Menu_F1_E2[2] = 0;
 819   1              Two_Menu_F1_E2[3] = 1;
 820   1      }
 821          
 822          void fun23(void) //¶þ¼¶²Ëµ¥F1-E3
 823          {
 824   1              tm1629_E(0x03);
 825   1              Two_Menu_F1_E3[0] = 0;
 826   1              Two_Menu_F1_E3[1] = 0;
 827   1              Two_Menu_F1_E3[2] = 0;
 828   1              Two_Menu_F1_E3[3] = 1;
 829   1      }
 830          
 831          void fun24(void) //¶þ¼¶²Ëµ¥F1-E4
 832          {
 833   1              tm1629_E(0x04);
 834   1              Two_Menu_F1_E4[0] = 0;
 835   1              Two_Menu_F1_E4[1] = 0;
 836   1              Two_Menu_F1_E4[2] = 0;
 837   1              Two_Menu_F1_E4[3] = 1;
 838   1      }
 839          
 840          void fun25(void) //¶þ¼¶²Ëµ¥F2-E1
 841          {
 842   1              tm1629_E(0x01);
 843   1              Two_Menu_F2_E1[0] = 0;
 844   1              Two_Menu_F2_E1[1] = 0;
 845   1              Two_Menu_F2_E1[2] = 0;
 846   1              Two_Menu_F2_E1[3] = 1;
 847   1      }
 848          
 849          void fun26(void) //¶þ¼¶²Ëµ¥F2-E2
 850          {
 851   1              tm1629_E(0x02);
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 15  

 852   1              Two_Menu_F2_E2[0] = 0;
 853   1              Two_Menu_F2_E2[1] = 0;
 854   1              Two_Menu_F2_E2[2] = 0;
 855   1              Two_Menu_F2_E2[3] = 1;
 856   1      }
 857          
 858          void fun27(void) //¶þ¼¶²Ëµ¥F2-E3
 859          {
 860   1              tm1629_E(0x03);
 861   1              Two_Menu_F2_E3[0] = 0;
 862   1              Two_Menu_F2_E3[1] = 0;
 863   1              Two_Menu_F2_E3[2] = 0;
 864   1              Two_Menu_F2_E3[3] = 1;
 865   1      }
 866          
 867          void fun28(void) //¶þ¼¶²Ëµ¥F2-E4
 868          {
 869   1              tm1629_E(0x04);
 870   1              Two_Menu_F2_E4[0] = 0;
 871   1              Two_Menu_F2_E4[1] = 0;
 872   1              Two_Menu_F2_E4[2] = 0;
 873   1              Two_Menu_F2_E4[3] = 1;
 874   1      }
 875          
 876          void fun29(void) //¶þ¼¶²Ëµ¥F3-E1
 877          {
 878   1              tm1629_E(0x01);
 879   1      }
 880          
 881          void fun30(void) //¶þ¼¶²Ëµ¥F3-E2
 882          {
 883   1              tm1629_E(0x02);
 884   1      }
 885          
 886          void fun31(void) //¶þ¼¶²Ëµ¥F4
 887          {
 888   1              unsigned char temp = 0;
 889   1              temp = return_Two_Menu_F4_E1();
 890   1              Show_two_number(temp);
 891   1      }
 892          
 893          void fun32(void) //¶þ¼¶²Ëµ¥F5
 894          {
 895   1              unsigned char temp = 0;
 896   1              temp = return_Two_Menu_F5_E1();
 897   1              Show_two_number(temp);
 898   1      }
 899          
 900          void fun33(void) //¶þ¼¶²Ëµ¥F6-E1
 901          {
 902   1              tm1629_E(0x01);
 903   1      }
 904          
 905          void fun34(void) //¶þ¼¶²Ëµ¥F6-E2
 906          {
 907   1              tm1629_E(0x02);
 908   1      }
 909          
 910          void fun35(void) //¶þ¼¶²Ëµ¥F6-E3
 911          {
 912   1              tm1629_E(0x03);
 913   1      }
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 16  

 914          
 915          void fun36(void) //¶þ¼¶²Ëµ¥F6-E4
 916          {
 917   1              tm1629_E(0x04);
 918   1      }
 919          
 920          void fun37(void) //¶þ¼¶²Ëµ¥F6-E5
 921          {
 922   1              tm1629_E(0x05);
 923   1      }
 924          
 925          void fun38(void) //¶þ¼¶²Ëµ¥F7-E1
 926          {
 927   1              tm1629_E(0x01);
 928   1      }
 929          
 930          void fun39(void) //¶þ¼¶²Ëµ¥F7-E2
 931          {
 932   1              tm1629_E(0x02);
 933   1      }
 934          
 935          void fun40(void) //¶þ¼¶²Ëµ¥F7-E3
 936          {
 937   1              tm1629_E(0x03);
 938   1      }
 939          
 940          void fun41(void) //¶þ¼¶²Ëµ¥F7-E4
 941          {
 942   1              tm1629_E(0x04);
 943   1      }
 944          
 945          void fun42(void) //¶þ¼¶²Ëµ¥F8-E1
 946          {
 947   1              tm1629_E(0x01);
 948   1              Two_Menu_F8_E1_save = return_Two_Menu_F8_E1();
 949   1      }
 950          
 951          void fun43(void) //¶þ¼¶²Ëµ¥F8-E2
 952          {
 953   1              tm1629_E(0x02);
 954   1      }
 955          
 956          void fun44(void) //¶þ¼¶²Ëµ¥F9-E1
 957          {
 958   1              tm1629_E(0x01);
 959   1      }
 960          
 961          void fun45(void) //¶þ¼¶²Ëµ¥F9-E2
 962          {
 963   1              tm1629_E(0x02);
 964   1      }
 965          
 966          void fun46(void) //¶þ¼¶²Ëµ¥FA
 967          {
 968   1              unsigned int measure_sync_saved_temp = 0;
 969   1              unsigned int show_temp = 0;
 970   1      
 971   1                      measure_sync_saved_temp = return_RF_trans_count();
 972   1                      show_temp = 10000 / measure_sync_saved_temp;
 973   1                      Show_three_number(show_temp);
 974   1      
 975   1      //              uart_printf("measure_sync_saved_tempÎª %d ! \n\r", measure_sync_saved_temp);
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 17  

 976   1      //              uart_printf("show_tempÎª %d ! \n\r", show_temp);
 977   1      
 978   1      }
 979          
 980          
 981          void fun47(void) //¶þ¼¶²Ëµ¥Fb
 982          {
 983   1              unsigned char temp = 0;
 984   1              temp = return_Two_Menu_Fb_E1();
 985   1              Show_one_number(temp);
 986   1      }
 987          
 988          void fun48(void) //¶þ¼¶²Ëµ¥FC
 989          {
 990   1              unsigned char temp = 0;
 991   1              temp = return_Two_Menu_FC_E1();
 992   1              Show_one_number(temp);
 993   1      }
 994          
 995          void fun49(void) //¶þ¼¶²Ëµ¥Fd
 996          {
 997   1              tm1629_f(0x0f);
 998   1      }
 999          
1000          void fun50(void) //F1_E1 Ç§Î»ÉÁË¸
1001          {
1002   1              if (return_await_number_table() == 1)
1003   1              {
1004   2                      Show_four_number(Two_Menu_F1_E1);
1005   2                      set_await_number_table(2);
1006   2              }
1007   1              if (return_await_number_table() == 3)
1008   1              {
1009   2                      buf_display[0][3] = 0;
1010   2                      display();
1011   2                      set_await_number_table(0);
1012   2              }
1013   1      }
1014          
1015          void fun51(void) //F1_E1 °ÙÎ»ÉÁË¸
1016          {
1017   1              if (return_await_number_table() == 1)
1018   1              {
1019   2                      Show_four_number(Two_Menu_F1_E1);
1020   2                      set_await_number_table(2);
1021   2              }
1022   1              if (return_await_number_table() == 3)
1023   1              {
1024   2                      buf_display[0][2] = 0;
1025   2                      display();
1026   2                      set_await_number_table(0);
1027   2              }
1028   1      }
1029          
1030          void fun52(void)  //F1_E1 Ê®Î»ÉÁË¸
1031          {
1032   1              if (return_await_number_table() == 1)
1033   1              {
1034   2                      Show_four_number(Two_Menu_F1_E1);
1035   2                      set_await_number_table(2);
1036   2              }
1037   1              if (return_await_number_table() == 3)
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 18  

1038   1              {
1039   2                      buf_display[0][1] = 0;
1040   2                      display();
1041   2                      set_await_number_table(0);
1042   2              }
1043   1      }
1044          
1045          void fun53(void) //F1_E1 ¸öÎ»ÉÁË¸
1046          {
1047   1              if (return_await_number_table() == 1)
1048   1              {
1049   2                      Show_four_number(Two_Menu_F1_E1);
1050   2                      set_await_number_table(2);
1051   2              }
1052   1              if (return_await_number_table() == 3)
1053   1              {
1054   2                      buf_display[0][0] = 0;
1055   2                      display();
1056   2                      set_await_number_table(0);
1057   2              }
1058   1      }
1059          
1060          void fun54(void) //F1_E2 Ç§Î»ÉÁË¸
1061          {
1062   1              if (return_await_number_table() == 1)
1063   1              {
1064   2                      Show_four_number(Two_Menu_F1_E2);
1065   2                      set_await_number_table(2);
1066   2              }
1067   1              if (return_await_number_table() == 3)
1068   1              {
1069   2                      buf_display[0][3] = 0;
1070   2                      display();
1071   2                      set_await_number_table(0);
1072   2              }
1073   1      }
1074          
1075          void fun55(void) //F1_E2 °ÙÎ»ÉÁË¸
1076          {
1077   1              if (return_await_number_table() == 1)
1078   1              {
1079   2                      Show_four_number(Two_Menu_F1_E2);
1080   2                      set_await_number_table(2);
1081   2              }
1082   1              if (return_await_number_table() == 3)
1083   1              {
1084   2                      buf_display[0][2] = 0;
1085   2                      display();
1086   2                      set_await_number_table(0);
1087   2              }
1088   1      }
1089          
1090          void fun56(void) //F1_E2 Ê®Î»ÉÁË¸
1091          {
1092   1              if (return_await_number_table() == 1)
1093   1              {
1094   2                      Show_four_number(Two_Menu_F1_E2);
1095   2                      set_await_number_table(2);
1096   2              }
1097   1              if (return_await_number_table() == 3)
1098   1              {
1099   2                      buf_display[0][1] = 0;
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 19  

1100   2                      display();
1101   2                      set_await_number_table(0);
1102   2              }
1103   1      }
1104          
1105          void fun57(void) //F1_E2 ¸öÎ»ÉÁË¸
1106          {
1107   1              if (return_await_number_table() == 1)
1108   1              {
1109   2                      Show_four_number(Two_Menu_F1_E2);
1110   2                      set_await_number_table(2);
1111   2              }
1112   1              if (return_await_number_table() == 3)
1113   1              {
1114   2                      buf_display[0][0] = 0;
1115   2                      display();
1116   2                      set_await_number_table(0);
1117   2              }
1118   1      }
1119          
1120          void fun58(void) //F1_E3 Ç§Î»ÉÁË¸
1121          {
1122   1              if (return_await_number_table() == 1)
1123   1              {
1124   2                      Show_four_number(Two_Menu_F1_E3);
1125   2                      set_await_number_table(2);
1126   2              }
1127   1              if (return_await_number_table() == 3)
1128   1              {
1129   2                      buf_display[0][3] = 0;
1130   2                      display();
1131   2                      set_await_number_table(0);
1132   2              }
1133   1      }
1134          
1135          void fun59(void) //F1_E3 °ÙÎ»ÉÁË¸
1136          {
1137   1              if (return_await_number_table() == 1)
1138   1              {
1139   2                      Show_four_number(Two_Menu_F1_E3);
1140   2                      set_await_number_table(2);
1141   2              }
1142   1              if (return_await_number_table() == 3)
1143   1              {
1144   2                      buf_display[0][2] = 0;
1145   2                      display();
1146   2                      set_await_number_table(0);
1147   2              }
1148   1      }
1149          
1150          void fun60(void) //F1_E3 Ê®Î»ÉÁË¸
1151          {
1152   1              if (return_await_number_table() == 1)
1153   1              {
1154   2                      Show_four_number(Two_Menu_F1_E3);
1155   2                      set_await_number_table(2);
1156   2              }
1157   1              if (return_await_number_table() == 3)
1158   1              {
1159   2                      buf_display[0][1] = 0;
1160   2                      display();
1161   2                      set_await_number_table(0);
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 20  

1162   2              }
1163   1      }
1164          
1165          void fun61(void) //F1_E3 ¸öÎ»ÉÁË¸
1166          {
1167   1              if (return_await_number_table() == 1)
1168   1              {
1169   2                      Show_four_number(Two_Menu_F1_E3);
1170   2                      set_await_number_table(2);
1171   2              }
1172   1              if (return_await_number_table() == 3)
1173   1              {
1174   2                      buf_display[0][0] = 0;
1175   2                      display();
1176   2                      set_await_number_table(0);
1177   2              }
1178   1      }
1179          
1180          void fun62(void) //F1_E4 Ç§Î»ÉÁË¸
1181          {
1182   1              if (return_await_number_table() == 1)
1183   1              {
1184   2                      Show_four_number(Two_Menu_F1_E4);
1185   2                      set_await_number_table(2);
1186   2              }
1187   1              if (return_await_number_table() == 3)
1188   1              {
1189   2                      buf_display[0][3] = 0;
1190   2                      display();
1191   2                      set_await_number_table(0);
1192   2              }
1193   1      }
1194          
1195          void fun63(void) //F1_E4 °ÙÎ»ÉÁË¸
1196          {
1197   1              if (return_await_number_table() == 1)
1198   1              {
1199   2                      Show_four_number(Two_Menu_F1_E4);
1200   2                      set_await_number_table(2);
1201   2              }
1202   1              if (return_await_number_table() == 3)
1203   1              {
1204   2                      buf_display[0][2] = 0;
1205   2                      display();
1206   2                      set_await_number_table(0);
1207   2              }
1208   1      }
1209          
1210          void fun64(void) //F1_E4 Ê®Î»ÉÁË¸
1211          {
1212   1              if (return_await_number_table() == 1)
1213   1              {
1214   2                      Show_four_number(Two_Menu_F1_E4);
1215   2                      set_await_number_table(2);
1216   2              }
1217   1              if (return_await_number_table() == 3)
1218   1              {
1219   2                      buf_display[0][1] = 0;
1220   2                      display();
1221   2                      set_await_number_table(0);
1222   2              }
1223   1      }
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 21  

1224          
1225          void fun65(void) //F1_E4 ¸öÎ»ÉÁË¸
1226          {
1227   1              if (return_await_number_table() == 1)
1228   1              {
1229   2                      Show_four_number(Two_Menu_F1_E4);
1230   2                      set_await_number_table(2);
1231   2              }
1232   1              if (return_await_number_table() == 3)
1233   1              {
1234   2                      buf_display[0][0] = 0;
1235   2                      display();
1236   2                      set_await_number_table(0);
1237   2              }
1238   1      }
1239          
1240          void fun66(void) //F2_E1 Ç§Î»ÉÁË¸
1241          {
1242   1              if (return_await_number_table() == 1)
1243   1              {
1244   2                      Show_four_number(Two_Menu_F2_E1);
1245   2                      set_await_number_table(2);
1246   2              }
1247   1              if (return_await_number_table() == 3)
1248   1              {
1249   2                      buf_display[0][3] = 0;
1250   2                      display();
1251   2                      set_await_number_table(0);
1252   2              }
1253   1      }
1254          
1255          void fun67(void) //F2_E1 °ÙÎ»ÉÁË¸
1256          {
1257   1              if (return_await_number_table() == 1)
1258   1              {
1259   2                      Show_four_number(Two_Menu_F2_E1);
1260   2                      set_await_number_table(2);
1261   2              }
1262   1              if (return_await_number_table() == 3)
1263   1              {
1264   2                      buf_display[0][2] = 0;
1265   2                      display();
1266   2                      set_await_number_table(0);
1267   2              }
1268   1      }
1269          
1270          void fun68(void) //F2_E1 Ê®Î»ÉÁË¸
1271          {
1272   1              if (return_await_number_table() == 1)
1273   1              {
1274   2                      Show_four_number(Two_Menu_F2_E1);
1275   2                      set_await_number_table(2);
1276   2              }
1277   1              if (return_await_number_table() == 3)
1278   1              {
1279   2                      buf_display[0][1] = 0;
1280   2                      display();
1281   2                      set_await_number_table(0);
1282   2              }
1283   1      }
1284          
1285          void fun69(void) //F2_E1 ¸öÎ»ÉÁË¸
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 22  

1286          {
1287   1              if (return_await_number_table() == 1)
1288   1              {
1289   2                      Show_four_number(Two_Menu_F2_E1);
1290   2                      set_await_number_table(2);
1291   2              }
1292   1              if (return_await_number_table() == 3)
1293   1              {
1294   2                      buf_display[0][0] = 0;
1295   2                      display();
1296   2                      set_await_number_table(0);
1297   2              }
1298   1      }
1299          
1300          void fun70(void) //F2_E2 Ç§Î»ÉÁË¸
1301          {
1302   1              if (return_await_number_table() == 1)
1303   1              {
1304   2                      Show_four_number(Two_Menu_F2_E2);
1305   2                      set_await_number_table(2);
1306   2              }
1307   1              if (return_await_number_table() == 3)
1308   1              {
1309   2                      buf_display[0][3] = 0;
1310   2                      display();
1311   2                      set_await_number_table(0);
1312   2              }
1313   1      }
1314          
1315          void fun71(void) //F2_E2 °ÙÎ»ÉÁË¸
1316          {
1317   1              if (return_await_number_table() == 1)
1318   1              {
1319   2                      Show_four_number(Two_Menu_F2_E2);
1320   2                      set_await_number_table(2);
1321   2              }
1322   1              if (return_await_number_table() == 3)
1323   1              {
1324   2                      buf_display[0][2] = 0;
1325   2                      display();
1326   2                      set_await_number_table(0);
1327   2              }
1328   1      }
1329          
1330          void fun72(void) //F2_E2 Ê®Î»ÉÁË¸
1331          {
1332   1              if (return_await_number_table() == 1)
1333   1              {
1334   2                      Show_four_number(Two_Menu_F2_E2);
1335   2                      set_await_number_table(2);
1336   2              }
1337   1              if (return_await_number_table() == 3)
1338   1              {
1339   2                      buf_display[0][1] = 0;
1340   2                      display();
1341   2                      set_await_number_table(0);
1342   2              }
1343   1      }
1344          
1345          void fun73(void) //F2_E2 ¸öÎ»ÉÁË¸
1346          {
1347   1              if (return_await_number_table() == 1)
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 23  

1348   1              {
1349   2                      Show_four_number(Two_Menu_F2_E2);
1350   2                      set_await_number_table(2);
1351   2              }
1352   1              if (return_await_number_table() == 3)
1353   1              {
1354   2                      buf_display[0][0] = 0;
1355   2                      display();
1356   2                      set_await_number_table(0);
1357   2              }
1358   1      }
1359          
1360          void fun74(void) //F2_E3 Ç§Î»ÉÁË¸
1361          {
1362   1              if (return_await_number_table() == 1)
1363   1              {
1364   2                      Show_four_number(Two_Menu_F2_E3);
1365   2                      set_await_number_table(2);
1366   2              }
1367   1              if (return_await_number_table() == 3)
1368   1              {
1369   2                      buf_display[0][3] = 0;
1370   2                      display();
1371   2                      set_await_number_table(0);
1372   2              }
1373   1      }
1374          
1375          void fun75(void) //F2_E3 °ÙÎ»ÉÁË¸
1376          {
1377   1              if (return_await_number_table() == 1)
1378   1              {
1379   2                      Show_four_number(Two_Menu_F2_E3);
1380   2                      set_await_number_table(2);
1381   2              }
1382   1              if (return_await_number_table() == 3)
1383   1              {
1384   2                      buf_display[0][2] = 0;
1385   2                      display();
1386   2                      set_await_number_table(0);
1387   2              }
1388   1      }
1389          
1390          void fun76(void) //F2_E3 Ê®Î»ÉÁË¸
1391          {
1392   1              if (return_await_number_table() == 1)
1393   1              {
1394   2                      Show_four_number(Two_Menu_F2_E3);
1395   2                      set_await_number_table(2);
1396   2              }
1397   1              if (return_await_number_table() == 3)
1398   1              {
1399   2                      buf_display[0][1] = 0;
1400   2                      display();
1401   2                      set_await_number_table(0);
1402   2              }
1403   1      }
1404          
1405          void fun77(void) //F2_E3 ¸öÎ»ÉÁË¸
1406          {
1407   1              if (return_await_number_table() == 1)
1408   1              {
1409   2                      Show_four_number(Two_Menu_F2_E3);
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 24  

1410   2                      set_await_number_table(2);
1411   2              }
1412   1              if (return_await_number_table() == 3)
1413   1              {
1414   2                      buf_display[0][0] = 0;
1415   2                      display();
1416   2                      set_await_number_table(0);
1417   2              }
1418   1      }
1419          
1420          void fun78(void) //F2_E4 Ç§Î»ÉÁË¸
1421          {
1422   1              if (return_await_number_table() == 1)
1423   1              {
1424   2                      Show_four_number(Two_Menu_F2_E4);
1425   2                      set_await_number_table(2);
1426   2              }
1427   1              if (return_await_number_table() == 3)
1428   1              {
1429   2                      buf_display[0][3] = 0;
1430   2                      display();
1431   2                      set_await_number_table(0);
1432   2              }
1433   1      }
1434          
1435          void fun79(void) //F2_E4 °ÙÎ»ÉÁË¸
1436          {
1437   1              if (return_await_number_table() == 1)
1438   1              {
1439   2                      Show_four_number(Two_Menu_F2_E4);
1440   2                      set_await_number_table(2);
1441   2              }
1442   1              if (return_await_number_table() == 3)
1443   1              {
1444   2                      buf_display[0][2] = 0;
1445   2                      display();
1446   2                      set_await_number_table(0);
1447   2              }
1448   1      }
1449          
1450          void fun80(void) //F2_E4 Ê®Î»ÉÁË¸
1451          {
1452   1              if (return_await_number_table() == 1)
1453   1              {
1454   2                      Show_four_number(Two_Menu_F2_E4);
1455   2                      set_await_number_table(2);
1456   2              }
1457   1              if (return_await_number_table() == 3)
1458   1              {
1459   2                      buf_display[0][1] = 0;
1460   2                      display();
1461   2                      set_await_number_table(0);
1462   2              }
1463   1      }
1464          
1465          void fun81(void) //F2_E4 ¸öÎ»ÉÁË¸
1466          {
1467   1              if (return_await_number_table() == 1)
1468   1              {
1469   2                      Show_four_number(Two_Menu_F2_E4);
1470   2                      set_await_number_table(2);
1471   2              }
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 25  

1472   1              if (return_await_number_table() == 3)
1473   1              {
1474   2                      buf_display[0][0] = 0;
1475   2                      display();
1476   2                      set_await_number_table(0);
1477   2              }
1478   1      }
1479          
1480          void fun82(void) //ÏÔÊ¾¼´Ê±ÏÔÊ¾ »¹ÊÇÑ­»·ÏÔÊ¾
1481          {
1482   1              unsigned char temp=0;
1483   1              temp = return_Two_Menu_F3_E1();
1484   1              Show_one_number(temp);
1485   1      }
1486          
1487          void fun83(void) //¶ÓÁÐ´æ´¢¸öÊý
1488          {
1489   1              unsigned char temp = 0;
1490   1              temp = return_Two_Menu_F3_E2();
1491   1              Show_two_number(temp);
1492   1      }
1493          
1494          void fun84(void) //F6_E1ÓïÒôÑ¡Ôñ
1495          {
1496   1              unsigned char temp = 0;
1497   1              temp = return_Two_Menu_F6_E1();
1498   1              Show_one_number(temp);
1499   1      }
1500          
1501          void fun85(void) //F6_E2ÓïÒô±¨¶Á´ÎÊý
1502          {
1503   1              unsigned char temp = 0;
1504   1              temp = return_Two_Menu_F6_E2();
1505   1              Show_one_number(temp);
1506   1      }
1507          
1508          void fun86(void) //F6_E3Ñ­»·Ê±ºòÊÇ·ñ±¨¶Á
1509          {
1510   1              unsigned char temp = 0;
1511   1              temp = return_Two_Menu_F6_E3();
1512   1              Show_one_number(temp);
1513   1      }
1514          
1515          void fun87(void) //F6_E4ÒôÁ¿´óÐ¡µ÷Õû
1516          {
1517   1              unsigned char temp = 0;
1518   1              temp = return_Two_Menu_F6_E4();
1519   1              GD5800_sound_volume(temp * 3);
1520   1              Show_one_number(temp);
1521   1      }
1522          
1523          void fun88(void) //F6_E5ÆÁÄ»ÁÁ¶Èµ÷Õû
1524          {
1525   1              unsigned char temp = 0;
1526   1              temp = return_Two_Menu_F6_E5();
1527   1              Show_one_number(temp);
1528   1      }
1529          
1530          void fun89(void) //F7_E1 999*9
1531          {
1532   1              unsigned char temp = 0;
1533   1              temp = return_Two_Menu_F7_E1();
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 26  

1534   1              if (temp < 10)
1535   1              {
1536   2                      Show_one_number(temp);
1537   2              }
1538   1              else if (temp<11)
1539   1              {
1540   2                      Show_on();
1541   2              }
1542   1              else
1543   1              {
1544   2                      Show_off();
1545   2              }
1546   1      }
1547          
1548          void fun90(void) //F7_E2 9999*9
1549          {
1550   1              unsigned char temp = 0;
1551   1              temp = return_Two_Menu_F7_E2();
1552   1              Show_one_number(temp);
1553   1      }
1554          
1555          void fun91(void) //F7_E3 999*99
1556          {
1557   1              unsigned char temp = 0;
1558   1              temp = return_Two_Menu_F7_E3();
1559   1              Show_one_number(temp);
1560   1      }
1561          
1562          void fun92(void) //F7_E4 9999*99
1563          {
1564   1              unsigned char temp = 0;
1565   1              temp = return_Two_Menu_F7_E4();
1566   1              Show_one_number(temp);
1567   1      }
1568          
1569          void fun93(void) //F8_E1µ¥¼üÎ»¸ú¶à¼üÎ»ÇÐ»»
1570          {
1571   1              unsigned char temp = 0;
1572   1              temp = return_Two_Menu_F8_E1();
1573   1              Show_one_number(temp);
1574   1              if (temp != Two_Menu_F8_E1_save)
1575   1              {
1576   2                      Delete_all_data();
1577   2                      Two_Menu_F8_E1_save = temp;
1578   2                      if (return_sound_table() == 1)
1579   2                      {
1580   3                              GD5800_select_chapter(CHENGGONG);
1581   3      
1582   3                              set_sound_table(0);
1583   3                      }
1584   2              }
1585   1      }
1586          
1587          void fun94(void) //F8_E2¼üÎ»ÉèÖÃ
1588          {
1589   1              unsigned char temp = 0;
1590   1              temp = return_Two_Menu_F8_E2();
1591   1              Show_two_number(temp);
1592   1              if (return_sound_table() == 1)
1593   1              {
1594   2                      delay10ms();
1595   2                      GD5800_stop_music();
C51 COMPILER V9.00   TM1629                                                                10/06/2015 18:05:46 PAGE 27  

1596   2                      delay10ms();
1597   2                      GD5800_select_chapter(temp + QUXIAO);
1598   2                      delay10ms();
1599   2                      set_sound_table(0);
1600   2              }
1601   1      }
1602          
1603          void fun95(void) //½âÂë²Ëµ¥
1604          {
1605   1              tm1629_load();
1606   1              display();;
1607   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   5832    ----
   CONSTANT SIZE    =     24    ----
   XDATA SIZE       =    353      70
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
