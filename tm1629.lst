C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE TM1629
OBJECT MODULE PLACED IN tm1629.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Receiver\tm1629.c LARGE BROWSE INCDIR(.\Receiver) DEBUG OBJECTEXTEND PRINT(
                    -.\tm1629.lst) OBJECT(tm1629.obj)

line level    source

   1          #include "tm1629.h"
   2          #include "timer.h"
   3          #include "usart.h"
   4          #include "ds1302.h"
   5          #include "key.h"
   6          #include "menu.h"
   7          #include "gd5800.h"
   8          #include "at24c256.h"
   9          
  10          unsigned char const CODE[] = { 0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07, 0x7F, 0x6F, 0x77, 0x7C, 0x3
             -9, 0x5E, 0x79, 0x71, 0x76, 0x38, 0x5c, 0x73, 0x3e };//0-9 abcdef ÏÔÊ¾Æ÷ÂëÊý×é
  11          unsigned char const INIT_CODE[] = { 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80 };//Öð¶ÎµãÁÁÊýÂë¹ÜÊý×é
  12          unsigned char const SHANGSHUO[] = { 0x40, 0x00 }; // µãÁÁÊýÂë¹ÜÖÐ¼ä¶ÎÒÔ¼°Ãð
  13          unsigned char buf_display[6][8] = { 0 }; //3¸öTM1629ÏÔ´æÊý×é
  14          unsigned char display_ram[240] = { 0 }; //³ÌÐòÔËÐÐÊ±¼ÇÂ¼ÏÔÊ¾Êý¾ÝµÄÄÚ´æ 
  15          unsigned char await_time_table= 0 ;//ÓÃÓÚ¼ÇÂ¼´ý»úÏÔÊ¾ºá¸ÜÊýÂë¹Ü´ÎÊý 
  16          unsigned char Two_Menu_F8_E1_save =0;
  17          
  18          unsigned char single_key[16]   = { 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
             - 0x01, 0x01, 0x01, 0x01 };//µ¥¼üÎ»ÉèÖÃ´æ´¢Êý×é
  19          unsigned char multiple_key[16] = { 0x01, QUXIAO-QUXIAO, JIEZHANG-QUXIAO, 0x01, JIUSHUI-QUXIAO, 0X01, 0x01,
             - 0x01, HUJIAO - QUXIAO, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01 };//¶à¼üÎ»ÉèÖÃ´æ´¢Êý×é
  20          
  21          void writeDataTo1629(unsigned char p) //Ð´Êý¾Ý¸øµÚÒ»¸öTM1629
  22          {
  23   1              unsigned int i;
  24   1              TM1629_STB = 0;
  25   1              for (i = 0; i<8; i++)
  26   1              {
  27   2                      TM1629_CLK = 0;
  28   2                      if (p & 0x01)
  29   2                              TM1629_DIO = 1;
  30   2                      else
  31   2                              TM1629_DIO = 0;
  32   2                      _nop_();
  33   2                      _nop_();
  34   2                      _nop_();
  35   2                      _nop_();
  36   2                      TM1629_CLK = 1;
  37   2                      p = p >> 1;
  38   2              }
  39   1              TM1629_CLK = 0;
  40   1              TM1629_DIO = 0;
  41   1      }
  42          
  43          void writeDataTo1629_2(unsigned char p) //Ð´Êý¾Ý¸øµÚ¶þ¸öTM1629
  44          {
  45   1              unsigned int i;
  46   1              TM1629_STB2 = 0;
  47   1              for (i = 0; i<8; i++)
  48   1              {
  49   2                      TM1629_CLK = 0;
  50   2                      if (p & 0x01)
  51   2                              TM1629_DIO = 1;
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 2   

  52   2                      else
  53   2                              TM1629_DIO = 0;
  54   2                      _nop_();
  55   2                      _nop_();
  56   2                      _nop_();
  57   2                      _nop_();
  58   2                      TM1629_CLK = 1;
  59   2                      p = p >> 1;
  60   2              }
  61   1              TM1629_CLK = 0;
  62   1              TM1629_DIO = 0;
  63   1      }
  64          
  65          void writeDataTo1629_3(unsigned char p) //Ð´Êý¾Ý¸øµÚÈý¸öTM1629
  66          {
  67   1              unsigned int i;
  68   1              TM1629_STB3 = 0;
  69   1              for (i = 0; i<8; i++)
  70   1              {
  71   2                      TM1629_CLK = 0;
  72   2                      if (p & 0x01)
  73   2                              TM1629_DIO = 1;
  74   2                      else
  75   2                              TM1629_DIO = 0;
  76   2                      _nop_();
  77   2                      _nop_();
  78   2                      _nop_();
  79   2                      _nop_();
  80   2                      TM1629_CLK = 1;
  81   2                      p = p >> 1;
  82   2              }
  83   1              TM1629_CLK = 0;
  84   1              TM1629_DIO = 0;
  85   1      }
  86          
  87          void send_command(unsigned char word) //Ð´ÃüÁî¸øµÚÒ»¸öTM1629
  88          {
  89   1              TM1629_STB = 1;
  90   1              nop;
  91   1              TM1629_STB = 0;
  92   1              writeDataTo1629(word);
  93   1      }
  94          
  95          void send_command_2(unsigned char word) //Ð´ÃüÁî¸øµÚ¶þ¸öTM1629
  96          {
  97   1              TM1629_STB2 = 1;
  98   1              nop;
  99   1              TM1629_STB2 = 0;
 100   1              writeDataTo1629_2(word);
 101   1      }
 102          
 103          void send_command_3(unsigned char word) //Ð´ÃüÁî¸øµÚÈý¸öTM1629
 104          {
 105   1              TM1629_STB3 = 1;
 106   1              nop;
 107   1              TM1629_STB3 = 0;
 108   1              writeDataTo1629_3(word);
 109   1      }
 110          
 111          void display(void) //3¸öTM1629ÏÔÊ¾º¯Êý
 112          {
 113   1              unsigned char i,temp;
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 3   

 114   1              temp = return_Two_Menu_F6_E5();
 115   1              send_command(0x40);     //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 116   1              send_command(0xc0);     //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 117   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 118   1              {
 119   2                      writeDataTo1629(buf_display[0][i]);
 120   2                      writeDataTo1629(buf_display[1][i]);
 121   2              }
 122   1              send_command(0x88 + temp);      //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 123   1              TM1629_STB = 1;
 124   1      
 125   1              send_command_2(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 126   1              send_command_2(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 127   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 128   1              {
 129   2                      writeDataTo1629_2(buf_display[2][i]);
 130   2                      writeDataTo1629_2(buf_display[3][i]);
 131   2              }
 132   1              send_command_2(0x88 + temp);    //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 133   1              TM1629_STB2 = 1;
 134   1      
 135   1              send_command_3(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 136   1              send_command_3(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 137   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 138   1              {
 139   2                      writeDataTo1629_3(buf_display[4][i]);
 140   2                      writeDataTo1629_3(buf_display[5][i]);
 141   2              }
 142   1              send_command_3(0x88 + temp);    //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 143   1              TM1629_STB3 = 1;
 144   1      }
 145          
 146          
 147          void tm1629_init(void) //TM1629¿ª»ú³õÊ¼»¯º¯Êý
 148          {
 149   1              unsigned char i, j, k;          //k¿ØÖÆÏÔÊ¾µÄ¾ßÌåÊý×Ö£¬iºÍj¿ØÖÆbuf_displayµÄË¢ÐÂ
 150   1              for (k = 0; k<8; k++)
 151   1              {
 152   2                      for (i = 0; i<6; i++)
 153   2                      {
 154   3                              for (j = 0; j<8; j++)
 155   3                              {
 156   4                                      buf_display[i][j] = INIT_CODE[k];
 157   4                              }
 158   3                      }
 159   2                      display();
 160   2                      Tm1629_delay(30);
 161   2              }
 162   1      }
 163          
 164          
 165          void Tm1629_delay(unsigned char k) //ÑÓÊ±º¯Êý
 166          {
 167   1              unsigned char i, j;
 168   1              for (; k>0; k--)
 169   1              {
 170   2                      for (i = 255; i>0; i--)
 171   2                      {
 172   3                              for (j = 255; j>0; j--)
 173   3                              {
 174   4                                      ;
 175   4      
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 4   

 176   4                              }
 177   3                      }
 178   2              }
 179   1      }
 180          
 181          void tm1629_clear(void)//È«²¿¹éÁã
 182          {
 183   1              unsigned char i, j;
 184   1              for (i = 0; i<6; i++)
 185   1              {
 186   2                      for (j = 0; j<8; j++)
 187   2                      {
 188   3                              buf_display[i][j] = 0x00;
 189   3                      }
 190   2              }
 191   1      }
 192          
 193          void tm1629_display_buff_clear(void)//Çå³ý¶ÓÁÐ»º´æ
 194          {
 195   1              unsigned char i;
 196   1              for (i = 0; i<120; i++)
 197   1                      display_ram[i] = 0;
 198   1      }
 199          
 200          void tm1629_await(void)
 201          {
 202   1              unsigned char i;        //k¿ØÖÆÏÔÊ¾µÄ¾ßÌåÊý×Ö£¬iºÍj¿ØÖÆbuf_displayµÄË¢ÐÂ
 203   1              unsigned char await_number_table_temp = 0;
 204   1              await_number_table_temp = return_await_number_table();
 205   1              if (await_number_table_temp == 1)
 206   1              {
 207   2                      //GD5800_select_chapter(0x0008) ;
 208   2                      tm1629_clear();
 209   2                      i = await_time_table & 0x03;
 210   2                      buf_display[0][i] = 0x40;
 211   2                      display();
 212   2                      set_await_number_table(0);
 213   2                      await_time_table++;
 214   2                      if (await_time_table == 4)
 215   2                              await_time_table = 0;
 216   2              }
 217   1      }
 218          
 219          void Display_time(void)
 220          {
 221   1              tm1629_clear();
 222   1              Ds1302_Read_Time(); 
 223   1              buf_display[1][7] = CODE[2];                            //Äê
 224   1              buf_display[1][6] = CODE[0];
 225   1              buf_display[1][5] = CODE[time_buf1[1] / 10];
 226   1              buf_display[1][4] = CODE[time_buf1[1] % 10];
 227   1      
 228   1              buf_display[1][3] = 0x40;                                        // -
 229   1              
 230   1              buf_display[1][2] = CODE[time_buf1[2] / 10]; //ÔÂ
 231   1              buf_display[1][1] = CODE[time_buf1[2] % 10];
 232   1      
 233   1              buf_display[1][0] = 0x40;                                        // -
 234   1      
 235   1              buf_display[0][7] = CODE[time_buf1[3] / 10];
 236   1              buf_display[0][6] = CODE[time_buf1[3] % 10];//ÈÕ
 237   1      
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 5   

 238   1              buf_display[0][5] = CODE[time_buf1[7]];         //ÐÇÆÚ
 239   1      
 240   1              buf_display[0][3] = CODE[time_buf1[4] / 10]; //Ð¡Ê±
 241   1              buf_display[0][2] = CODE[time_buf1[4] % 10];
 242   1              buf_display[0][1] = CODE[time_buf1[5] / 10]; //Ð¡Ê±
 243   1              buf_display[0][0] = CODE[time_buf1[5] % 10];
 244   1      
 245   1              display();
 246   1      
 247   1      }
 248          
 249          void tm1629_f(unsigned char f_number) //µÚÒ»ÐÐµ¹Êý¶þ¸öÏÔÊ¾F,µ¹ÊýµÚÒ»¸öÏÔÊ¾f_number
 250          {
 251   1              tm1629_clear();
 252   1              buf_display[0][1] = CODE[0x0f];
 253   1              buf_display[0][0] = CODE[f_number];
 254   1              display();
 255   1      }
 256          
 257          void tm1629_E(unsigned char f_number) //µÚÒ»ÐÐµ¹Êý¶þ¸öÏÔÊ¾F,µ¹ÊýµÚÒ»¸öÏÔÊ¾f_number
 258          {
 259   1              tm1629_clear();
 260   1              buf_display[0][1] = CODE[0x0E];
 261   1              buf_display[0][0] = CODE[f_number];
 262   1              display();
 263   1      }
 264          void Show_on(void)
 265          {
 266   1              tm1629_clear();
 267   1              buf_display[0][1] = CODE[0];
 268   1              buf_display[0][0] = 0x54;
 269   1              display();
 270   1      }
 271          
 272          void Show_off(void)
 273          {
 274   1              tm1629_clear();
 275   1              buf_display[0][1] = CODE[0x00];
 276   1              buf_display[0][0] = CODE[0x0f];
 277   1              display();
 278   1      }
 279          
 280          void Show_one_number(unsigned char f_number) //ÏÔÊ¾Ò»¸öÊý×Ö
 281          {
 282   1              tm1629_clear();
 283   1              //buf_display[0][1] = CODE[0x0E];
 284   1              buf_display[0][0] = CODE[f_number];
 285   1              display();
 286   1      }
 287          
 288          void Show_two_number(unsigned char f_number) //ÏÔÊ¾Á½¸öÊý×Ö
 289          {
 290   1              tm1629_clear();
 291   1              buf_display[0][1] = CODE[f_number / 10];
 292   1              buf_display[0][0] = CODE[f_number % 10];
 293   1              display();
 294   1      }
 295          
 296          void Show_four_number(unsigned char* temp)
 297          {
 298   1              tm1629_clear();
 299   1              buf_display[0][3] = CODE[*(temp)];
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 6   

 300   1              buf_display[0][2] = CODE[*(temp+1)];
 301   1              buf_display[0][1] = CODE[*(temp+2)];
 302   1              buf_display[0][0] = CODE[*(temp+3)];
 303   1              display();
 304   1      }
 305          
 306          void tm1629_load(void)
 307          {
 308   1              tm1629_clear();
 309   1              if (*(display_ram + 66) != 0)
 310   1                      mcuram_to_displayram(buf_display[5] + 7, display_ram + 66);
 311   1              if (*(display_ram + 60) != 0)
 312   1                      mcuram_to_displayram(buf_display[5] + 3, display_ram + 60);
 313   1              if (*(display_ram + 54) != 0)
 314   1                      mcuram_to_displayram(buf_display[4] + 7, display_ram + 54);
 315   1              if (*(display_ram + 48) != 0)
 316   1                      mcuram_to_displayram(buf_display[4] + 3, display_ram + 48);
 317   1              if (*(display_ram + 42) != 0)
 318   1                      mcuram_to_displayram(buf_display[3] + 7, display_ram + 42);
 319   1              if (*(display_ram + 36) != 0)
 320   1                      mcuram_to_displayram(buf_display[3] + 3, display_ram + 36);
 321   1              if (*(display_ram + 30) != 0)
 322   1                      mcuram_to_displayram(buf_display[2] + 7, display_ram + 30);
 323   1              if (*(display_ram + 24) != 0)
 324   1                      mcuram_to_displayram(buf_display[2] + 3, display_ram + 24);
 325   1              if (*(display_ram + 18) != 0)
 326   1                      mcuram_to_displayram(buf_display[1] + 7, display_ram + 18);
 327   1              if (*(display_ram + 12) != 0)
 328   1                      mcuram_to_displayram(buf_display[1] + 3, display_ram + 12);
 329   1              if (*(display_ram + 6) != 0)
 330   1                      mcuram_to_displayram(buf_display[0] + 7, display_ram + 6);
 331   1              if (*(display_ram + 0) != 0)
 332   1                      mcuram_to_displayram(buf_display[0] + 3, display_ram);
 333   1      }
 334          
 335          void mcuram_to_displayram(unsigned char a[48], unsigned char* b)  //´ÓRAMÇøÓòÒÆµ½ÏÔ´æÇøÓò,Ë³´ø·­Òë³ÉÊýÂë¹Ü
             -ÏÔÊ¾µÄÂë
 336          {
 337   1              /*
 338   1              A// Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 339   1              B// Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 340   1              */
 341   1              *(a) = CODE[*(b + 1)];
 342   1              *(a - 1) = CODE[*(b + 2)];
 343   1              *(a - 2) = CODE[*(b + 3)];
 344   1              *(a - 3) = CODE[*(b + 4)];
 345   1      }
 346          
 347          void decoder_temp_to_mcuram(unsigned char* a, unsigned char* index)//aÎªMCU»º´æÇø   indexÎª½âÂëºóÈ¡³öµÄ8×Ö
             -½ÚÁÙÊ±Êý×é
 348          {
 349   1              *(a + 0) = *(index);
 350   1              *(a + 1) = *(index + 1);
 351   1              *(a + 2) = *(index + 2);
 352   1              *(a + 3) = *(index + 3);
 353   1              *(a + 4) = *(index + 4);
 354   1              *(a + 5) = *(index + 7);//±£´æ°´¼üµÄ¼üÖµ
 355   1      }
 356          
 357          void mcuram_to_mcuram_down(unsigned char* a) //aÎªMCURAM»º´æÇøÇø   ÏòÏÂÑ¹Ò»×éÊý¾Ý
 358          {
 359   1              *(a + 6) = *(a);                //ramÇøÔªËØÏÂÒÆ6¸ö
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 7   

 360   1              *(a + 7) = *(a + 1);
 361   1              *(a + 8) = *(a + 2);
 362   1              *(a + 9) = *(a + 3);
 363   1              *(a + 10) = *(a + 4);
 364   1              *(a + 11) = *(a + 5);
 365   1      
 366   1      }
 367          
 368          void mcuram_to_mcuram_up(unsigned char* a) //aÎªMCURAM»º´æÇøÇø   ÏòÉÏÑ¹Ò»×éÊý¾Ý
 369          {
 370   1              *(a) = *(a + 6);   //ramÇøÔªËØÉÏÒÆ6¸ö
 371   1              *(a + 1) = *(a + 7);
 372   1              *(a + 2) = *(a + 8);
 373   1              *(a + 3) = *(a + 9);
 374   1              *(a + 4) = *(a + 10);
 375   1              *(a + 5) = *(a + 11);
 376   1      }
 377          
 378          void CycleProcess(void)
 379          {
 380   1              unsigned char i, index;
 381   1              unsigned char f5_xunhuan, f4_xiaohao, logout_cycle_table_temp;
 382   1              unsigned char temp[6] = { 0 };
 383   1              unsigned char Two_Menu_F6_E3_temp = 0;
 384   1              unsigned char Two_Menu_F6_E1_temp = 0;
 385   1      
 386   1              Two_Menu_F6_E3_temp = return_Two_Menu_F6_E3();
 387   1              Two_Menu_F6_E1_temp = return_Two_Menu_F6_E1();
 388   1      
 389   1              f5_xunhuan = return_Two_Menu_F5_E1();
 390   1              f4_xiaohao = return_Two_Menu_F4_E1();
 391   1              logout_cycle_table_temp = return_logout_cycle_table();
 392   1              /*Ñ­»·´¦Àíº¯Êý*/
 393   1              if ((f5_xunhuan<f4_xiaohao && logout_cycle_table_temp>f5_xunhuan && f4_xiaohao && f5_xunhuan) || (f4_xiao
             -hao == 0 && f5_xunhuan &&logout_cycle_table_temp>f5_xunhuan))
 394   1              {
 395   2                      for (i = 0; i<10; i++)
 396   2                      {
 397   3                              if (display_ram[i * 6 ] == 0)
 398   3                              {
 399   4                                      index = i;
 400   4                                      break;
 401   4                              }
 402   3                      }
 403   2      
 404   2                      for (i = 0; i<6; i++)
 405   2                      {
 406   3                              temp[i] = display_ram[(index - 1) * 6 + i];
 407   3                      }
 408   2      
 409   2                      for (i = index; i>1; i--)
 410   2                      {
 411   3                              mcuram_to_mcuram_down(display_ram + (i - 2) * 6);
 412   3                      }
 413   2                      for (i = 0; i<6; i++)
 414   2                      {
 415   3                              display_ram[i] = temp[i];
 416   3                      }
 417   2                      tm1629_load();
 418   2                      display();
 419   2                      set_logout_cycle_table(0);
 420   2                      if (Two_Menu_F6_E3_temp == 1)
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 8   

 421   2                      {
 422   3                                      submenuf6_1(Two_Menu_F6_E1_temp, display_ram, display_ram[0], display_ram[5] & 0x0f);
 423   3                      }
 424   2              }
 425   1      }
 426          
 427          void LogoutProcess(void)
 428          {
 429   1              unsigned char i;
 430   1              unsigned char f5_xunhuan, f4_xiaohao, logout_cycle_table_temp, Two_Menu_F3_E2_temp, Two_Menu_F3_E1_temp;
 431   1              unsigned char Two_Menu_F6_E1_temp = 0;
 432   1              unsigned char Two_Menu_F6_E2_temp = 0;
 433   1      
 434   1              f5_xunhuan = return_Two_Menu_F5_E1();
 435   1              f4_xiaohao = return_Two_Menu_F4_E1();
 436   1              logout_cycle_table_temp = return_logout_cycle_table();
 437   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 438   1              Two_Menu_F3_E1_temp = return_Two_Menu_F3_E1();
 439   1              Two_Menu_F6_E2_temp = return_Two_Menu_F6_E2();
 440   1              /*ÏúºÅ´¦Àíº¯Êý*/
 441   1              if ((f4_xiaohao<f5_xunhuan&& logout_cycle_table_temp>f4_xiaohao && f5_xunhuan && f4_xiaohao) || (f5_xunhu
             -an == 0 && f4_xiaohao && logout_cycle_table_temp>f4_xiaohao))
 442   1              {
 443   2                      for (i = 0; i<(Two_Menu_F3_E2_temp - 1); i++)
 444   2                      {
 445   3                              mcuram_to_mcuram_up(display_ram + i * 6);
 446   3                      }
 447   2                      for (i = (Two_Menu_F3_E2_temp - 1) * 6; i<Two_Menu_F3_E2_temp * 6; i++)
 448   2                      {
 449   3                              display_ram[i] = 0;
 450   3                      }
 451   2                      tm1629_load();
 452   2                      display();
 453   2                      set_logout_cycle_table(0);
 454   2                      if (display_ram[0] == 0)
 455   2                      {
 456   3                              set_func_index(MENU_STANDBY);
 457   3                      }
 458   2                      else if (Two_Menu_F3_E1_temp == 2)
 459   2                      {
 460   3                              for (i = 0; i < Two_Menu_F6_E2_temp; i++)
 461   3                              {
 462   4                                      submenuf6_1(Two_Menu_F6_E1_temp, display_ram, display_ram[0], display_ram[5] & 0x0f);
 463   4                              }
 464   3                      }
 465   2              }
 466   1      }
 467          
 468          
 469          
 470          
 471          
 472          void Logout(void)
 473          {
 474   1              unsigned char i;
 475   1              unsigned char Two_Menu_F3_E2_temp= 0;
 476   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 477   1              /*ÏúºÅ´¦Àíº¯Êý*/
 478   1              for (i = 0; i<(Two_Menu_F3_E2_temp - 1); i++)
 479   1              {
 480   2                      mcuram_to_mcuram_up(display_ram + i * 6);
 481   2              }
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 9   

 482   1              for (i = (Two_Menu_F3_E2_temp - 1) * 6; i<Two_Menu_F3_E2_temp * 6; i++)
 483   1              {
 484   2                      display_ram[i] = 0;
 485   2              }
 486   1              tm1629_load();
 487   1              display();
 488   1              if (display_ram[0] == 0)
 489   1              {
 490   2                      set_func_index(MENU_STANDBY);
 491   2              }
 492   1      }
 493          
 494          void CycleUp(void)
 495          {
 496   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 497   1              unsigned char temp[6] = { 0 };
 498   1              index = return_Two_Menu_F3_E2();
 499   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 500   1              /*Ñ­»·´¦Àíº¯Êý*/
 501   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 502   1              {
 503   2                      if (display_ram[i * 6 ] == 0)
 504   2                      {
 505   3                              index = i;
 506   3                              break;
 507   3                      }
 508   2              }
 509   1              for (i = 0; i<6; i++)
 510   1              {
 511   2                      temp[i] = display_ram[i];
 512   2              }
 513   1              for (i = 0; i<index; i++)
 514   1              {
 515   2                      mcuram_to_mcuram_up(display_ram + i * 6);
 516   2              }
 517   1              for (i = 0; i<6; i++)
 518   1              {
 519   2                      display_ram[(index - 1) * 6 + i] = temp[i];
 520   2              }
 521   1              tm1629_load();
 522   1              display();
 523   1      }
 524          
 525          void CycleDown(void)
 526          {
 527   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 528   1              unsigned char temp[6] = { 0 };
 529   1              index = return_Two_Menu_F3_E2();
 530   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 531   1              /*Ñ­»·´¦Àíº¯Êý*/
 532   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 533   1              {
 534   2                      if (display_ram[i * 6 ] == 0)
 535   2                      {
 536   3                              index = i;
 537   3                              break;
 538   3                      }
 539   2              }
 540   1      
 541   1              for (i = 0; i<6; i++)
 542   1              {
 543   2                      temp[i] = display_ram[(index - 1) * 6 + i];
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 10  

 544   2              }
 545   1      
 546   1              for (i = index; i>1; i--)
 547   1              {
 548   2                      mcuram_to_mcuram_down(display_ram + (i - 2) * 6);
 549   2              }
 550   1              for (i = 0; i<6; i++)
 551   1              {
 552   2                      display_ram[i] = temp[i];
 553   2              }
 554   1              tm1629_load();
 555   1              display();
 556   1      }
 557          
 558          void Cancel_funtion(unsigned char* id_number, unsigned char* buff)//id_numberÎª½âÂëµÄtempÊý×é£¬buffÎªÏÔÊ¾»
             -º´æ
 559          {
 560   1              /*
 561   1              id_number  //  ÐòºÅ¡¢½ÓÊÕºÅ*3¡¢ID*3¡¢ÇøºÅ
 562   1              buff    //                ÐòºÅ¡¢Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 563   1              */
 564   1      
 565   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 566   1              unsigned char temp[6] = { 0 };
 567   1              index = return_Two_Menu_F3_E2();
 568   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 569   1      
 570   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 571   1              {
 572   2                      if (*(id_number + 1) == *(buff + i * 6 + 1) && *(id_number + 2) == *(buff + i * 6 + 2) && *(id_number + 
             -3) == *(buff + i * 6 + 3) && *(id_number + 4) == *(buff + i * 6 + 4))
 573   2                      {
 574   3                              index = i;
 575   3                              break;
 576   3                      }
 577   2              }
 578   1              for (i = index; i<Two_Menu_F3_E2_temp; i++)
 579   1              {
 580   2                      mcuram_to_mcuram_up(buff + i * 6);
 581   2              }
 582   1              if (index != Two_Menu_F3_E2_temp)
 583   1              {
 584   2                      for (i = 0; i<6; i++)
 585   2                      {
 586   3                              *(buff + (Two_Menu_F3_E2_temp - 1) * 6 + i) = 0;
 587   3                      }
 588   2              }
 589   1              if (*(buff) == 0)
 590   1              {
 591   2                      set_func_index(MENU_STANDBY);
 592   2              }
 593   1      }
 594          
 595          
 596          void fun0(void) //´ý»úÏÔÊ¾º¯Êý
 597          {
 598   1              unsigned char temp = 0;
 599   1              temp = return_Two_Menu_FC_E1();
 600   1              if (temp == 1)
 601   1              {
 602   2                      tm1629_await();
 603   2              }
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 11  

 604   1              else
 605   1              {
 606   2                      Display_time();
 607   2              }
 608   1              tm1629_display_buff_clear();
 609   1      }
 610          
 611          void fun1(void) //Ò»¼¶²Ëµ¥F0
 612          {
 613   1              tm1629_f(0x00);
 614   1      }
 615          
 616          void fun2(void) //Ò»¼¶²Ëµ¥F1
 617          {
 618   1              tm1629_f(0x01);
 619   1      }
 620          
 621          void fun3(void) //Ò»¼¶²Ëµ¥F2
 622          {
 623   1              tm1629_f(0x02);
 624   1      }
 625          
 626          void fun4(void) //Ò»¼¶²Ëµ¥F3
 627          {
 628   1              tm1629_f(0x03);
 629   1      }
 630          
 631          void fun5(void) //Ò»¼¶²Ëµ¥F4
 632          {
 633   1              tm1629_f(0x04);
 634   1      }
 635          
 636          void fun6(void) //Ò»¼¶²Ëµ¥F5
 637          {
 638   1              tm1629_f(0x05);
 639   1      }
 640          
 641          void fun7(void) //Ò»¼¶²Ëµ¥F6
 642          {
 643   1              tm1629_f(0x06);
 644   1      }
 645          
 646          void fun8(void) //Ò»¼¶²Ëµ¥F7
 647          {
 648   1              tm1629_f(0x07);
 649   1      }
 650          
 651          void fun9(void) //Ò»¼¶²Ëµ¥F8
 652          {
 653   1              tm1629_f(0x08);
 654   1      }
 655          
 656          void fun10(void) //Ò»¼¶²Ëµ¥F9
 657          {
 658   1              tm1629_f(0x09);
 659   1      }
 660          
 661          void fun11(void) //Ò»¼¶²Ëµ¥FA
 662          {
 663   1              tm1629_f(0x0a);
 664   1      }
 665          
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 12  

 666          void fun12(void) //Ò»¼¶²Ëµ¥Fb
 667          {
 668   1              tm1629_f(0x0b);
 669   1      }
 670          
 671          void fun13(void) //Ò»¼¶²Ëµ¥FC
 672          {
 673   1              tm1629_f(0x0c);
 674   1      }
 675          
 676          void fun14(void) //Ò»¼¶²Ëµ¥Fd
 677          {
 678   1              tm1629_f(0x0d);
 679   1      }
 680          
 681          void fun15(void) //ÉèÖÃÄê·Ý
 682          {
 683   1              unsigned char temp;
 684   1              temp = return_Two_Menu_FC_E1();
 685   1              if (temp == 1)//Èç¹ûÎª----  Ôò²»ÈÃ½øÈëF0
 686   1              {
 687   2                      set_func_index(ONE_MENU_F0);
 688   2              }
 689   1              else
 690   1              {
 691   2                      if (return_await_number_table() == 1)
 692   2                      {
 693   3                              Display_time();
 694   3                              set_await_number_table(2);
 695   3                      }
 696   2                      if (return_await_number_table() == 3)
 697   2                      {
 698   3                              buf_display[1][7] = 0;
 699   3                              buf_display[1][6] = 0;
 700   3                              buf_display[1][5] = 0;
 701   3                              buf_display[1][4] = 0;
 702   3                              display();
 703   3                              set_await_number_table(0);
 704   3                      }
 705   2                      Ds1302_Write_Time();
 706   2              }
 707   1      }
 708          
 709          void fun16(void) //ÉèÖÃÔÂ·Ý
 710          {
 711   1              if (return_await_number_table() == 1)
 712   1              {
 713   2                      Display_time();
 714   2                      set_await_number_table(2);
 715   2              }
 716   1              if (return_await_number_table() == 3)
 717   1              {
 718   2                      buf_display[1][2] = 0;
 719   2                      buf_display[1][1] = 0;
 720   2                      display();
 721   2                      set_await_number_table(0);
 722   2              }
 723   1              Ds1302_Write_Time();
 724   1      }
 725          
 726          void fun17(void) //ÉèÖÃÈÕÆÚ
 727          {
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 13  

 728   1              if (return_await_number_table() == 1)
 729   1              {
 730   2                      Display_time();
 731   2                      set_await_number_table(2);
 732   2              }
 733   1              if (return_await_number_table() == 3)
 734   1              {
 735   2                      buf_display[0][7] = 0;
 736   2                      buf_display[0][6] = 0;
 737   2                      display();
 738   2                      set_await_number_table(0);
 739   2              }
 740   1              Ds1302_Write_Time();
 741   1      }
 742          
 743          void fun18(void) //ÉèÖÃÐÇÆÚ
 744          {
 745   1              if (return_await_number_table() == 1)
 746   1              {
 747   2                      Display_time();
 748   2                      set_await_number_table(2);
 749   2              }
 750   1              if (return_await_number_table() == 3)
 751   1              {
 752   2                      buf_display[0][5] = 0;
 753   2                      display();
 754   2                      set_await_number_table(0);
 755   2              }
 756   1              Ds1302_Write_Time();
 757   1      }
 758          
 759          void fun19(void) //ÉèÖÃÐ¡Ê±
 760          {
 761   1              if (return_await_number_table() == 1)
 762   1              {
 763   2                      Display_time();
 764   2                      set_await_number_table(2);
 765   2              }
 766   1              if (return_await_number_table() == 3)
 767   1              {
 768   2                      buf_display[0][3] = 0;
 769   2                      buf_display[0][2] = 0;
 770   2                      display();
 771   2                      set_await_number_table(0);
 772   2              }
 773   1              Ds1302_Write_Time();
 774   1      }
 775          
 776          void fun20(void) //ÉèÖÃ·ÖÖÓ
 777          {
 778   1              if (return_await_number_table() == 1)
 779   1              {
 780   2                      Display_time();
 781   2                      set_await_number_table(2);
 782   2              }
 783   1              if (return_await_number_table() == 3)
 784   1              {
 785   2                      buf_display[0][1] = 0;
 786   2                      buf_display[0][0] = 0;
 787   2                      display();
 788   2                      set_await_number_table(0);
 789   2              }
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 14  

 790   1              Ds1302_Write_Time();
 791   1      }
 792          
 793          void fun21(void) //¶þ¼¶²Ëµ¥F1-E1
 794          {
 795   1              tm1629_E(0x01);
 796   1              Two_Menu_F1_E1[0] = 0;
 797   1              Two_Menu_F1_E1[1] = 0;
 798   1              Two_Menu_F1_E1[2] = 0;
 799   1              Two_Menu_F1_E1[3] = 1;
 800   1      }
 801          
 802          void fun22(void) //¶þ¼¶²Ëµ¥F1-E2
 803          {
 804   1              tm1629_E(0x02);
 805   1              Two_Menu_F1_E2[0] = 0;
 806   1              Two_Menu_F1_E2[1] = 0;
 807   1              Two_Menu_F1_E2[2] = 0;
 808   1              Two_Menu_F1_E2[3] = 1;
 809   1      }
 810          
 811          void fun23(void) //¶þ¼¶²Ëµ¥F1-E3
 812          {
 813   1              tm1629_E(0x03);
 814   1              Two_Menu_F1_E3[0] = 0;
 815   1              Two_Menu_F1_E3[1] = 0;
 816   1              Two_Menu_F1_E3[2] = 0;
 817   1              Two_Menu_F1_E3[3] = 1;
 818   1      }
 819          
 820          void fun24(void) //¶þ¼¶²Ëµ¥F1-E4
 821          {
 822   1              tm1629_E(0x04);
 823   1              Two_Menu_F1_E4[0] = 0;
 824   1              Two_Menu_F1_E4[1] = 0;
 825   1              Two_Menu_F1_E4[2] = 0;
 826   1              Two_Menu_F1_E4[3] = 1;
 827   1      }
 828          
 829          void fun25(void) //¶þ¼¶²Ëµ¥F2-E1
 830          {
 831   1              tm1629_E(0x01);
 832   1              Two_Menu_F2_E1[0] = 0;
 833   1              Two_Menu_F2_E1[1] = 0;
 834   1              Two_Menu_F2_E1[2] = 0;
 835   1              Two_Menu_F2_E1[3] = 1;
 836   1      }
 837          
 838          void fun26(void) //¶þ¼¶²Ëµ¥F2-E2
 839          {
 840   1              tm1629_E(0x02);
 841   1              Two_Menu_F2_E2[0] = 0;
 842   1              Two_Menu_F2_E2[1] = 0;
 843   1              Two_Menu_F2_E2[2] = 0;
 844   1              Two_Menu_F2_E2[3] = 1;
 845   1      }
 846          
 847          void fun27(void) //¶þ¼¶²Ëµ¥F2-E3
 848          {
 849   1              tm1629_E(0x03);
 850   1              Two_Menu_F2_E3[0] = 0;
 851   1              Two_Menu_F2_E3[1] = 0;
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 15  

 852   1              Two_Menu_F2_E3[2] = 0;
 853   1              Two_Menu_F2_E3[3] = 1;
 854   1      }
 855          
 856          void fun28(void) //¶þ¼¶²Ëµ¥F2-E4
 857          {
 858   1              tm1629_E(0x04);
 859   1              Two_Menu_F2_E4[0] = 0;
 860   1              Two_Menu_F2_E4[1] = 0;
 861   1              Two_Menu_F2_E4[2] = 0;
 862   1              Two_Menu_F2_E4[3] = 1;
 863   1      }
 864          
 865          void fun29(void) //¶þ¼¶²Ëµ¥F3-E1
 866          {
 867   1              tm1629_E(0x01);
 868   1      }
 869          
 870          void fun30(void) //¶þ¼¶²Ëµ¥F3-E2
 871          {
 872   1              tm1629_E(0x02);
 873   1      }
 874          
 875          void fun31(void) //¶þ¼¶²Ëµ¥F4
 876          {
 877   1              unsigned char temp = 0;
 878   1              temp = return_Two_Menu_F4_E1();
 879   1              Show_two_number(temp);
 880   1      }
 881          
 882          void fun32(void) //¶þ¼¶²Ëµ¥F5
 883          {
 884   1              unsigned char temp = 0;
 885   1              temp = return_Two_Menu_F5_E1();
 886   1              Show_two_number(temp);
 887   1      }
 888          
 889          void fun33(void) //¶þ¼¶²Ëµ¥F6-E1
 890          {
 891   1              tm1629_E(0x01);
 892   1      }
 893          
 894          void fun34(void) //¶þ¼¶²Ëµ¥F6-E2
 895          {
 896   1              tm1629_E(0x02);
 897   1      }
 898          
 899          void fun35(void) //¶þ¼¶²Ëµ¥F6-E3
 900          {
 901   1              tm1629_E(0x03);
 902   1      }
 903          
 904          void fun36(void) //¶þ¼¶²Ëµ¥F6-E4
 905          {
 906   1              tm1629_E(0x04);
 907   1      }
 908          
 909          void fun37(void) //¶þ¼¶²Ëµ¥F6-E5
 910          {
 911   1              tm1629_E(0x05);
 912   1      }
 913          
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 16  

 914          void fun38(void) //¶þ¼¶²Ëµ¥F7-E1
 915          {
 916   1              tm1629_E(0x01);
 917   1      }
 918          
 919          void fun39(void) //¶þ¼¶²Ëµ¥F7-E2
 920          {
 921   1              tm1629_E(0x02);
 922   1      }
 923          
 924          void fun40(void) //¶þ¼¶²Ëµ¥F7-E3
 925          {
 926   1              tm1629_E(0x03);
 927   1      }
 928          
 929          void fun41(void) //¶þ¼¶²Ëµ¥F7-E4
 930          {
 931   1              tm1629_E(0x04);
 932   1      }
 933          
 934          void fun42(void) //¶þ¼¶²Ëµ¥F8-E1
 935          {
 936   1              tm1629_E(0x01);
 937   1              Two_Menu_F8_E1_save = return_Two_Menu_F8_E1();
 938   1      }
 939          
 940          void fun43(void) //¶þ¼¶²Ëµ¥F8-E2
 941          {
 942   1              tm1629_E(0x02);
 943   1      }
 944          
 945          void fun44(void) //¶þ¼¶²Ëµ¥F9-E1
 946          {
 947   1              tm1629_E(0x01);
 948   1      }
 949          
 950          void fun45(void) //¶þ¼¶²Ëµ¥F9-E2
 951          {
 952   1              tm1629_E(0x02);
 953   1      }
 954          
 955          void fun46(void) //¶þ¼¶²Ëµ¥FA
 956          {
 957   1              tm1629_f(0x0f);
 958   1      }
 959          
 960          
 961          void fun47(void) //¶þ¼¶²Ëµ¥Fb
 962          {
 963   1              unsigned char temp = 0;
 964   1              temp = return_Two_Menu_Fb_E1();
 965   1              Show_one_number(temp);
 966   1      }
 967          
 968          void fun48(void) //¶þ¼¶²Ëµ¥FC
 969          {
 970   1              unsigned char temp = 0;
 971   1              temp = return_Two_Menu_FC_E1();
 972   1              Show_one_number(temp);
 973   1      }
 974          
 975          void fun49(void) //¶þ¼¶²Ëµ¥Fd
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 17  

 976          {
 977   1              tm1629_f(0x0f);
 978   1      }
 979          
 980          void fun50(void) //F1_E1 Ç§Î»ÉÁË¸
 981          {
 982   1              if (return_await_number_table() == 1)
 983   1              {
 984   2                      Show_four_number(Two_Menu_F1_E1);
 985   2                      set_await_number_table(2);
 986   2              }
 987   1              if (return_await_number_table() == 3)
 988   1              {
 989   2                      buf_display[0][3] = 0;
 990   2                      display();
 991   2                      set_await_number_table(0);
 992   2              }
 993   1      }
 994          
 995          void fun51(void) //F1_E1 °ÙÎ»ÉÁË¸
 996          {
 997   1              if (return_await_number_table() == 1)
 998   1              {
 999   2                      Show_four_number(Two_Menu_F1_E1);
1000   2                      set_await_number_table(2);
1001   2              }
1002   1              if (return_await_number_table() == 3)
1003   1              {
1004   2                      buf_display[0][2] = 0;
1005   2                      display();
1006   2                      set_await_number_table(0);
1007   2              }
1008   1      }
1009          
1010          void fun52(void)  //F1_E1 Ê®Î»ÉÁË¸
1011          {
1012   1              if (return_await_number_table() == 1)
1013   1              {
1014   2                      Show_four_number(Two_Menu_F1_E1);
1015   2                      set_await_number_table(2);
1016   2              }
1017   1              if (return_await_number_table() == 3)
1018   1              {
1019   2                      buf_display[0][1] = 0;
1020   2                      display();
1021   2                      set_await_number_table(0);
1022   2              }
1023   1      }
1024          
1025          void fun53(void) //F1_E1 ¸öÎ»ÉÁË¸
1026          {
1027   1              if (return_await_number_table() == 1)
1028   1              {
1029   2                      Show_four_number(Two_Menu_F1_E1);
1030   2                      set_await_number_table(2);
1031   2              }
1032   1              if (return_await_number_table() == 3)
1033   1              {
1034   2                      buf_display[0][0] = 0;
1035   2                      display();
1036   2                      set_await_number_table(0);
1037   2              }
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 18  

1038   1      }
1039          
1040          void fun54(void) //F1_E2 Ç§Î»ÉÁË¸
1041          {
1042   1              if (return_await_number_table() == 1)
1043   1              {
1044   2                      Show_four_number(Two_Menu_F1_E2);
1045   2                      set_await_number_table(2);
1046   2              }
1047   1              if (return_await_number_table() == 3)
1048   1              {
1049   2                      buf_display[0][3] = 0;
1050   2                      display();
1051   2                      set_await_number_table(0);
1052   2              }
1053   1      }
1054          
1055          void fun55(void) //F1_E2 °ÙÎ»ÉÁË¸
1056          {
1057   1              if (return_await_number_table() == 1)
1058   1              {
1059   2                      Show_four_number(Two_Menu_F1_E2);
1060   2                      set_await_number_table(2);
1061   2              }
1062   1              if (return_await_number_table() == 3)
1063   1              {
1064   2                      buf_display[0][2] = 0;
1065   2                      display();
1066   2                      set_await_number_table(0);
1067   2              }
1068   1      }
1069          
1070          void fun56(void) //F1_E2 Ê®Î»ÉÁË¸
1071          {
1072   1              if (return_await_number_table() == 1)
1073   1              {
1074   2                      Show_four_number(Two_Menu_F1_E2);
1075   2                      set_await_number_table(2);
1076   2              }
1077   1              if (return_await_number_table() == 3)
1078   1              {
1079   2                      buf_display[0][1] = 0;
1080   2                      display();
1081   2                      set_await_number_table(0);
1082   2              }
1083   1      }
1084          
1085          void fun57(void) //F1_E2 ¸öÎ»ÉÁË¸
1086          {
1087   1              if (return_await_number_table() == 1)
1088   1              {
1089   2                      Show_four_number(Two_Menu_F1_E2);
1090   2                      set_await_number_table(2);
1091   2              }
1092   1              if (return_await_number_table() == 3)
1093   1              {
1094   2                      buf_display[0][0] = 0;
1095   2                      display();
1096   2                      set_await_number_table(0);
1097   2              }
1098   1      }
1099          
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 19  

1100          void fun58(void) //F1_E3 Ç§Î»ÉÁË¸
1101          {
1102   1              if (return_await_number_table() == 1)
1103   1              {
1104   2                      Show_four_number(Two_Menu_F1_E3);
1105   2                      set_await_number_table(2);
1106   2              }
1107   1              if (return_await_number_table() == 3)
1108   1              {
1109   2                      buf_display[0][3] = 0;
1110   2                      display();
1111   2                      set_await_number_table(0);
1112   2              }
1113   1      }
1114          
1115          void fun59(void) //F1_E3 °ÙÎ»ÉÁË¸
1116          {
1117   1              if (return_await_number_table() == 1)
1118   1              {
1119   2                      Show_four_number(Two_Menu_F1_E3);
1120   2                      set_await_number_table(2);
1121   2              }
1122   1              if (return_await_number_table() == 3)
1123   1              {
1124   2                      buf_display[0][2] = 0;
1125   2                      display();
1126   2                      set_await_number_table(0);
1127   2              }
1128   1      }
1129          
1130          void fun60(void) //F1_E3 Ê®Î»ÉÁË¸
1131          {
1132   1              if (return_await_number_table() == 1)
1133   1              {
1134   2                      Show_four_number(Two_Menu_F1_E3);
1135   2                      set_await_number_table(2);
1136   2              }
1137   1              if (return_await_number_table() == 3)
1138   1              {
1139   2                      buf_display[0][1] = 0;
1140   2                      display();
1141   2                      set_await_number_table(0);
1142   2              }
1143   1      }
1144          
1145          void fun61(void) //F1_E3 ¸öÎ»ÉÁË¸
1146          {
1147   1              if (return_await_number_table() == 1)
1148   1              {
1149   2                      Show_four_number(Two_Menu_F1_E3);
1150   2                      set_await_number_table(2);
1151   2              }
1152   1              if (return_await_number_table() == 3)
1153   1              {
1154   2                      buf_display[0][0] = 0;
1155   2                      display();
1156   2                      set_await_number_table(0);
1157   2              }
1158   1      }
1159          
1160          void fun62(void) //F1_E4 Ç§Î»ÉÁË¸
1161          {
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 20  

1162   1              if (return_await_number_table() == 1)
1163   1              {
1164   2                      Show_four_number(Two_Menu_F1_E4);
1165   2                      set_await_number_table(2);
1166   2              }
1167   1              if (return_await_number_table() == 3)
1168   1              {
1169   2                      buf_display[0][3] = 0;
1170   2                      display();
1171   2                      set_await_number_table(0);
1172   2              }
1173   1      }
1174          
1175          void fun63(void) //F1_E4 °ÙÎ»ÉÁË¸
1176          {
1177   1              if (return_await_number_table() == 1)
1178   1              {
1179   2                      Show_four_number(Two_Menu_F1_E4);
1180   2                      set_await_number_table(2);
1181   2              }
1182   1              if (return_await_number_table() == 3)
1183   1              {
1184   2                      buf_display[0][2] = 0;
1185   2                      display();
1186   2                      set_await_number_table(0);
1187   2              }
1188   1      }
1189          
1190          void fun64(void) //F1_E4 Ê®Î»ÉÁË¸
1191          {
1192   1              if (return_await_number_table() == 1)
1193   1              {
1194   2                      Show_four_number(Two_Menu_F1_E4);
1195   2                      set_await_number_table(2);
1196   2              }
1197   1              if (return_await_number_table() == 3)
1198   1              {
1199   2                      buf_display[0][1] = 0;
1200   2                      display();
1201   2                      set_await_number_table(0);
1202   2              }
1203   1      }
1204          
1205          void fun65(void) //F1_E4 ¸öÎ»ÉÁË¸
1206          {
1207   1              if (return_await_number_table() == 1)
1208   1              {
1209   2                      Show_four_number(Two_Menu_F1_E4);
1210   2                      set_await_number_table(2);
1211   2              }
1212   1              if (return_await_number_table() == 3)
1213   1              {
1214   2                      buf_display[0][0] = 0;
1215   2                      display();
1216   2                      set_await_number_table(0);
1217   2              }
1218   1      }
1219          
1220          void fun66(void) //F2_E1 Ç§Î»ÉÁË¸
1221          {
1222   1              if (return_await_number_table() == 1)
1223   1              {
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 21  

1224   2                      Show_four_number(Two_Menu_F2_E1);
1225   2                      set_await_number_table(2);
1226   2              }
1227   1              if (return_await_number_table() == 3)
1228   1              {
1229   2                      buf_display[0][3] = 0;
1230   2                      display();
1231   2                      set_await_number_table(0);
1232   2              }
1233   1      }
1234          
1235          void fun67(void) //F2_E1 °ÙÎ»ÉÁË¸
1236          {
1237   1              if (return_await_number_table() == 1)
1238   1              {
1239   2                      Show_four_number(Two_Menu_F2_E1);
1240   2                      set_await_number_table(2);
1241   2              }
1242   1              if (return_await_number_table() == 3)
1243   1              {
1244   2                      buf_display[0][2] = 0;
1245   2                      display();
1246   2                      set_await_number_table(0);
1247   2              }
1248   1      }
1249          
1250          void fun68(void) //F2_E1 Ê®Î»ÉÁË¸
1251          {
1252   1              if (return_await_number_table() == 1)
1253   1              {
1254   2                      Show_four_number(Two_Menu_F2_E1);
1255   2                      set_await_number_table(2);
1256   2              }
1257   1              if (return_await_number_table() == 3)
1258   1              {
1259   2                      buf_display[0][1] = 0;
1260   2                      display();
1261   2                      set_await_number_table(0);
1262   2              }
1263   1      }
1264          
1265          void fun69(void) //F2_E1 ¸öÎ»ÉÁË¸
1266          {
1267   1              if (return_await_number_table() == 1)
1268   1              {
1269   2                      Show_four_number(Two_Menu_F2_E1);
1270   2                      set_await_number_table(2);
1271   2              }
1272   1              if (return_await_number_table() == 3)
1273   1              {
1274   2                      buf_display[0][0] = 0;
1275   2                      display();
1276   2                      set_await_number_table(0);
1277   2              }
1278   1      }
1279          
1280          void fun70(void) //F2_E2 Ç§Î»ÉÁË¸
1281          {
1282   1              if (return_await_number_table() == 1)
1283   1              {
1284   2                      Show_four_number(Two_Menu_F2_E2);
1285   2                      set_await_number_table(2);
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 22  

1286   2              }
1287   1              if (return_await_number_table() == 3)
1288   1              {
1289   2                      buf_display[0][3] = 0;
1290   2                      display();
1291   2                      set_await_number_table(0);
1292   2              }
1293   1      }
1294          
1295          void fun71(void) //F2_E2 °ÙÎ»ÉÁË¸
1296          {
1297   1              if (return_await_number_table() == 1)
1298   1              {
1299   2                      Show_four_number(Two_Menu_F2_E2);
1300   2                      set_await_number_table(2);
1301   2              }
1302   1              if (return_await_number_table() == 3)
1303   1              {
1304   2                      buf_display[0][2] = 0;
1305   2                      display();
1306   2                      set_await_number_table(0);
1307   2              }
1308   1      }
1309          
1310          void fun72(void) //F2_E2 Ê®Î»ÉÁË¸
1311          {
1312   1              if (return_await_number_table() == 1)
1313   1              {
1314   2                      Show_four_number(Two_Menu_F2_E2);
1315   2                      set_await_number_table(2);
1316   2              }
1317   1              if (return_await_number_table() == 3)
1318   1              {
1319   2                      buf_display[0][1] = 0;
1320   2                      display();
1321   2                      set_await_number_table(0);
1322   2              }
1323   1      }
1324          
1325          void fun73(void) //F2_E2 ¸öÎ»ÉÁË¸
1326          {
1327   1              if (return_await_number_table() == 1)
1328   1              {
1329   2                      Show_four_number(Two_Menu_F2_E2);
1330   2                      set_await_number_table(2);
1331   2              }
1332   1              if (return_await_number_table() == 3)
1333   1              {
1334   2                      buf_display[0][0] = 0;
1335   2                      display();
1336   2                      set_await_number_table(0);
1337   2              }
1338   1      }
1339          
1340          void fun74(void) //F2_E3 Ç§Î»ÉÁË¸
1341          {
1342   1              if (return_await_number_table() == 1)
1343   1              {
1344   2                      Show_four_number(Two_Menu_F2_E3);
1345   2                      set_await_number_table(2);
1346   2              }
1347   1              if (return_await_number_table() == 3)
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 23  

1348   1              {
1349   2                      buf_display[0][3] = 0;
1350   2                      display();
1351   2                      set_await_number_table(0);
1352   2              }
1353   1      }
1354          
1355          void fun75(void) //F2_E3 °ÙÎ»ÉÁË¸
1356          {
1357   1              if (return_await_number_table() == 1)
1358   1              {
1359   2                      Show_four_number(Two_Menu_F2_E3);
1360   2                      set_await_number_table(2);
1361   2              }
1362   1              if (return_await_number_table() == 3)
1363   1              {
1364   2                      buf_display[0][2] = 0;
1365   2                      display();
1366   2                      set_await_number_table(0);
1367   2              }
1368   1      }
1369          
1370          void fun76(void) //F2_E3 Ê®Î»ÉÁË¸
1371          {
1372   1              if (return_await_number_table() == 1)
1373   1              {
1374   2                      Show_four_number(Two_Menu_F2_E3);
1375   2                      set_await_number_table(2);
1376   2              }
1377   1              if (return_await_number_table() == 3)
1378   1              {
1379   2                      buf_display[0][1] = 0;
1380   2                      display();
1381   2                      set_await_number_table(0);
1382   2              }
1383   1      }
1384          
1385          void fun77(void) //F2_E3 ¸öÎ»ÉÁË¸
1386          {
1387   1              if (return_await_number_table() == 1)
1388   1              {
1389   2                      Show_four_number(Two_Menu_F2_E3);
1390   2                      set_await_number_table(2);
1391   2              }
1392   1              if (return_await_number_table() == 3)
1393   1              {
1394   2                      buf_display[0][0] = 0;
1395   2                      display();
1396   2                      set_await_number_table(0);
1397   2              }
1398   1      }
1399          
1400          void fun78(void) //F2_E4 Ç§Î»ÉÁË¸
1401          {
1402   1              if (return_await_number_table() == 1)
1403   1              {
1404   2                      Show_four_number(Two_Menu_F2_E4);
1405   2                      set_await_number_table(2);
1406   2              }
1407   1              if (return_await_number_table() == 3)
1408   1              {
1409   2                      buf_display[0][3] = 0;
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 24  

1410   2                      display();
1411   2                      set_await_number_table(0);
1412   2              }
1413   1      }
1414          
1415          void fun79(void) //F2_E4 °ÙÎ»ÉÁË¸
1416          {
1417   1              if (return_await_number_table() == 1)
1418   1              {
1419   2                      Show_four_number(Two_Menu_F2_E4);
1420   2                      set_await_number_table(2);
1421   2              }
1422   1              if (return_await_number_table() == 3)
1423   1              {
1424   2                      buf_display[0][2] = 0;
1425   2                      display();
1426   2                      set_await_number_table(0);
1427   2              }
1428   1      }
1429          
1430          void fun80(void) //F2_E4 Ê®Î»ÉÁË¸
1431          {
1432   1              if (return_await_number_table() == 1)
1433   1              {
1434   2                      Show_four_number(Two_Menu_F2_E4);
1435   2                      set_await_number_table(2);
1436   2              }
1437   1              if (return_await_number_table() == 3)
1438   1              {
1439   2                      buf_display[0][1] = 0;
1440   2                      display();
1441   2                      set_await_number_table(0);
1442   2              }
1443   1      }
1444          
1445          void fun81(void) //F2_E4 ¸öÎ»ÉÁË¸
1446          {
1447   1              if (return_await_number_table() == 1)
1448   1              {
1449   2                      Show_four_number(Two_Menu_F2_E4);
1450   2                      set_await_number_table(2);
1451   2              }
1452   1              if (return_await_number_table() == 3)
1453   1              {
1454   2                      buf_display[0][0] = 0;
1455   2                      display();
1456   2                      set_await_number_table(0);
1457   2              }
1458   1      }
1459          
1460          void fun82(void) //ÏÔÊ¾¼´Ê±ÏÔÊ¾ »¹ÊÇÑ­»·ÏÔÊ¾
1461          {
1462   1              unsigned char temp=0;
1463   1              temp = return_Two_Menu_F3_E1();
1464   1              Show_one_number(temp);
1465   1      }
1466          
1467          void fun83(void) //¶ÓÁÐ´æ´¢¸öÊý
1468          {
1469   1              unsigned char temp = 0;
1470   1              temp = return_Two_Menu_F3_E2();
1471   1              Show_two_number(temp);
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 25  

1472   1      }
1473          
1474          void fun84(void) //F6_E1ÓïÒôÑ¡Ôñ
1475          {
1476   1              unsigned char temp = 0;
1477   1              temp = return_Two_Menu_F6_E1();
1478   1              Show_one_number(temp);
1479   1      }
1480          
1481          void fun85(void) //F6_E2ÓïÒô±¨¶Á´ÎÊý
1482          {
1483   1              unsigned char temp = 0;
1484   1              temp = return_Two_Menu_F6_E2();
1485   1              Show_one_number(temp);
1486   1      }
1487          
1488          void fun86(void) //F6_E3Ñ­»·Ê±ºòÊÇ·ñ±¨¶Á
1489          {
1490   1              unsigned char temp = 0;
1491   1              temp = return_Two_Menu_F6_E3();
1492   1              Show_one_number(temp);
1493   1      }
1494          
1495          void fun87(void) //F6_E4ÒôÁ¿´óÐ¡µ÷Õû
1496          {
1497   1              unsigned char temp = 0;
1498   1              temp = return_Two_Menu_F6_E4();
1499   1              GD5800_sound_volume(temp * 3);
1500   1              Show_one_number(temp);
1501   1      }
1502          
1503          void fun88(void) //F6_E5ÆÁÄ»ÁÁ¶Èµ÷Õû
1504          {
1505   1              unsigned char temp = 0;
1506   1              temp = return_Two_Menu_F6_E5();
1507   1              Show_one_number(temp);
1508   1      }
1509          
1510          void fun89(void) //F7_E1 999*9
1511          {
1512   1              unsigned char temp = 0;
1513   1              temp = return_Two_Menu_F7_E1();
1514   1              if (temp < 10)
1515   1              {
1516   2                      Show_one_number(temp);
1517   2              }
1518   1              else if (temp<11)
1519   1              {
1520   2                      Show_on();
1521   2              }
1522   1              else
1523   1              {
1524   2                      Show_off();
1525   2              }
1526   1      }
1527          
1528          void fun90(void) //F7_E2 9999*9
1529          {
1530   1              unsigned char temp = 0;
1531   1              temp = return_Two_Menu_F7_E2();
1532   1              Show_one_number(temp);
1533   1      }
C51 COMPILER V9.00   TM1629                                                                10/06/2015 11:04:13 PAGE 26  

1534          
1535          void fun91(void) //F7_E3 999*99
1536          {
1537   1              unsigned char temp = 0;
1538   1              temp = return_Two_Menu_F7_E3();
1539   1              Show_one_number(temp);
1540   1      }
1541          
1542          void fun92(void) //F7_E4 9999*99
1543          {
1544   1              unsigned char temp = 0;
1545   1              temp = return_Two_Menu_F7_E4();
1546   1              Show_one_number(temp);
1547   1      }
1548          
1549          void fun93(void) //F8_E1µ¥¼üÎ»¸ú¶à¼üÎ»ÇÐ»»
1550          {
1551   1              unsigned char temp = 0;
1552   1              temp = return_Two_Menu_F8_E1();
1553   1              Show_one_number(temp);
1554   1              if (temp != Two_Menu_F8_E1_save)
1555   1              {
1556   2                      Delete_all_data();
1557   2                      Two_Menu_F8_E1_save = temp;
1558   2              }
1559   1      }
1560          
1561          void fun94(void) //F8_E2¼üÎ»ÉèÖÃ
1562          {
1563   1              unsigned char temp = 0;
1564   1              temp = return_Two_Menu_F8_E2();
1565   1              Show_two_number(temp);
1566   1              if (return_sound_table() == 1)
1567   1              {
1568   2                      delay10ms();
1569   2                      GD5800_stop_music();
1570   2                      delay10ms();
1571   2                      GD5800_select_chapter(temp + QUXIAO);
1572   2                      delay10ms();
1573   2                      //GD5800_play_music();
1574   2                      set_sound_table(0);
1575   2              }
1576   1      }
1577          
1578          void fun95(void) //½âÂë²Ëµ¥
1579          {
1580   1              tm1629_load();
1581   1              display();;
1582   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   5698    ----
   CONSTANT SIZE    =     24    ----
   XDATA SIZE       =    353      70
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
