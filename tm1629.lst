C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE TM1629
OBJECT MODULE PLACED IN tm1629.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Receiver\tm1629.c LARGE BROWSE INCDIR(.\Receiver) DEBUG OBJECTEXTEND PRINT(
                    -.\tm1629.lst) OBJECT(tm1629.obj)

line level    source

   1          #include "tm1629.h"
   2          #include "timer.h"
   3          #include "usart.h"
   4          #include "ds1302.h"
   5          #include "key.h"
   6          #include "menu.h"
   7          #include "gd5800.h"
   8          #include "at24c256.h"
   9          
  10          unsigned char const CODE[] = { 0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07, 0x7F, 0x6F, 0x77, 0x7C, 0x3
             -9, 0x5E, 0x79, 0x71, 0x76, 0x38, 0x5c, 0x73, 0x3e };//0-9 abcdef ÏÔÊ¾Æ÷ÂëÊý×é
  11          unsigned char const INIT_CODE[] = { 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80 };//Öð¶ÎµãÁÁÊýÂë¹ÜÊý×é
  12          unsigned char const SHANGSHUO[] = { 0x40, 0x00 }; // µãÁÁÊýÂë¹ÜÖÐ¼ä¶ÎÒÔ¼°Ãð
  13          unsigned char buf_display[6][8] = { 0 }; //3¸öTM1629ÏÔ´æÊý×é
  14          unsigned char display_ram[240] = { 0 }; //³ÌÐòÔËÐÐÊ±¼ÇÂ¼ÏÔÊ¾Êý¾ÝµÄÄÚ´æ 
  15          unsigned char await_time_table= 0 ;//ÓÃÓÚ¼ÇÂ¼´ý»úÏÔÊ¾ºá¸ÜÊýÂë¹Ü´ÎÊý 
  16          unsigned char Two_Menu_F8_E1_save =0;
  17          
  18          unsigned char single_key[16]   = { 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
             - 0x01, 0x01, 0x01, 0x01 };//µ¥¼üÎ»ÉèÖÃ´æ´¢Êý×é
  19          unsigned char multiple_key[16] = { 0x01, QUXIAO-QUXIAO, JIEZHANG-QUXIAO, 0x01, JIUSHUI-QUXIAO, 0X01, 0x01,
             - 0x01, HUJIAO - QUXIAO, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01 };//¶à¼üÎ»ÉèÖÃ´æ´¢Êý×é
  20          
  21          void writeDataTo1629(unsigned char p) //Ð´Êý¾Ý¸øµÚÒ»¸öTM1629
  22          {
  23   1              unsigned int i;
  24   1              TM1629_STB = 0;
  25   1              for (i = 0; i<8; i++)
  26   1              {
  27   2                      TM1629_CLK = 0;
  28   2                      if (p & 0x01)
  29   2                              TM1629_DIO = 1;
  30   2                      else
  31   2                              TM1629_DIO = 0;
  32   2                      _nop_();
  33   2                      _nop_();
  34   2                      _nop_();
  35   2                      _nop_();
  36   2                      TM1629_CLK = 1;
  37   2                      p = p >> 1;
  38   2              }
  39   1              TM1629_CLK = 0;
  40   1              TM1629_DIO = 0;
  41   1      }
  42          
  43          void writeDataTo1629_2(unsigned char p) //Ð´Êý¾Ý¸øµÚ¶þ¸öTM1629
  44          {
  45   1              unsigned int i;
  46   1              TM1629_STB2 = 0;
  47   1              for (i = 0; i<8; i++)
  48   1              {
  49   2                      TM1629_CLK = 0;
  50   2                      if (p & 0x01)
  51   2                              TM1629_DIO = 1;
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 2   

  52   2                      else
  53   2                              TM1629_DIO = 0;
  54   2                      _nop_();
  55   2                      _nop_();
  56   2                      _nop_();
  57   2                      _nop_();
  58   2                      TM1629_CLK = 1;
  59   2                      p = p >> 1;
  60   2              }
  61   1              TM1629_CLK = 0;
  62   1              TM1629_DIO = 0;
  63   1      }
  64          
  65          void writeDataTo1629_3(unsigned char p) //Ð´Êý¾Ý¸øµÚÈý¸öTM1629
  66          {
  67   1              unsigned int i;
  68   1              TM1629_STB3 = 0;
  69   1              for (i = 0; i<8; i++)
  70   1              {
  71   2                      TM1629_CLK = 0;
  72   2                      if (p & 0x01)
  73   2                              TM1629_DIO = 1;
  74   2                      else
  75   2                              TM1629_DIO = 0;
  76   2                      _nop_();
  77   2                      _nop_();
  78   2                      _nop_();
  79   2                      _nop_();
  80   2                      TM1629_CLK = 1;
  81   2                      p = p >> 1;
  82   2              }
  83   1              TM1629_CLK = 0;
  84   1              TM1629_DIO = 0;
  85   1      }
  86          
  87          void send_command(unsigned char word) //Ð´ÃüÁî¸øµÚÒ»¸öTM1629
  88          {
  89   1              TM1629_STB = 1;
  90   1              nop;
  91   1              TM1629_STB = 0;
  92   1              writeDataTo1629(word);
  93   1      }
  94          
  95          void send_command_2(unsigned char word) //Ð´ÃüÁî¸øµÚ¶þ¸öTM1629
  96          {
  97   1              TM1629_STB2 = 1;
  98   1              nop;
  99   1              TM1629_STB2 = 0;
 100   1              writeDataTo1629_2(word);
 101   1      }
 102          
 103          void send_command_3(unsigned char word) //Ð´ÃüÁî¸øµÚÈý¸öTM1629
 104          {
 105   1              TM1629_STB3 = 1;
 106   1              nop;
 107   1              TM1629_STB3 = 0;
 108   1              writeDataTo1629_3(word);
 109   1      }
 110          
 111          void display(void) //3¸öTM1629ÏÔÊ¾º¯Êý
 112          {
 113   1              unsigned char i,temp;
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 3   

 114   1              temp = return_Two_Menu_F6_E5();
 115   1              send_command(0x40);     //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 116   1              send_command(0xc0);     //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 117   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 118   1              {
 119   2                      writeDataTo1629(buf_display[0][i]);
 120   2                      writeDataTo1629(buf_display[1][i]);
 121   2              }
 122   1              send_command(0x88 + temp);      //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 123   1              TM1629_STB = 1;
 124   1      
 125   1              send_command_2(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 126   1              send_command_2(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 127   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 128   1              {
 129   2                      writeDataTo1629_2(buf_display[2][i]);
 130   2                      writeDataTo1629_2(buf_display[3][i]);
 131   2              }
 132   1              send_command_2(0x88 + temp);    //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 133   1              TM1629_STB2 = 1;
 134   1      
 135   1              send_command_3(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 136   1              send_command_3(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 137   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 138   1              {
 139   2                      writeDataTo1629_3(buf_display[4][i]);
 140   2                      writeDataTo1629_3(buf_display[5][i]);
 141   2              }
 142   1              send_command_3(0x88 + temp);    //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 143   1              TM1629_STB3 = 1;
 144   1      }
 145          
 146          
 147          void tm1629_init(void) //TM1629¿ª»ú³õÊ¼»¯º¯Êý
 148          {
 149   1              unsigned char i, j, k;          //k¿ØÖÆÏÔÊ¾µÄ¾ßÌåÊý×Ö£¬iºÍj¿ØÖÆbuf_displayµÄË¢ÐÂ
 150   1              for (k = 0; k<8; k++)
 151   1              {
 152   2                      for (i = 0; i<6; i++)
 153   2                      {
 154   3                              for (j = 0; j<8; j++)
 155   3                              {
 156   4                                      buf_display[i][j] = INIT_CODE[k];
 157   4                              }
 158   3                      }
 159   2                      display();
 160   2                      Tm1629_delay(30);
 161   2              }
 162   1      }
 163          
 164          
 165          void Tm1629_delay(unsigned char k) //ÑÓÊ±º¯Êý
 166          {
 167   1              unsigned char i, j;
 168   1              for (; k>0; k--)
 169   1              {
 170   2                      for (i = 255; i>0; i--)
 171   2                      {
 172   3                              for (j = 255; j>0; j--)
 173   3                              {
 174   4                                      ;
 175   4      
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 4   

 176   4                              }
 177   3                      }
 178   2              }
 179   1      }
 180          
 181          void tm1629_clear(void)//È«²¿¹éÁã
 182          {
 183   1              unsigned char i, j;
 184   1              for (i = 0; i<6; i++)
 185   1              {
 186   2                      for (j = 0; j<8; j++)
 187   2                      {
 188   3                              buf_display[i][j] = 0x00;
 189   3                      }
 190   2              }
 191   1      }
 192          
 193          void tm1629_display_buff_clear(void)//Çå³ý¶ÓÁÐ»º´æ
 194          {
 195   1              unsigned char i;
 196   1              for (i = 0; i<120; i++)
 197   1                      display_ram[i] = 0;
 198   1      }
 199          
 200          void tm1629_await(void)
 201          {
 202   1              unsigned char i;        //k¿ØÖÆÏÔÊ¾µÄ¾ßÌåÊý×Ö£¬iºÍj¿ØÖÆbuf_displayµÄË¢ÐÂ
 203   1              unsigned char await_number_table_temp = 0;
 204   1              await_number_table_temp = return_await_number_table();
 205   1              if (await_number_table_temp == 1)
 206   1              {
 207   2                      //GD5800_select_chapter(0x0008) ;
 208   2                      tm1629_clear();
 209   2                      i = await_time_table & 0x03;
 210   2                      buf_display[0][i] = 0x40;
 211   2                      display();
 212   2                      set_await_number_table(0);
 213   2                      await_time_table++;
 214   2                      if (await_time_table == 4)
 215   2                              await_time_table = 0;
 216   2              }
 217   1      }
 218          
 219          void Display_time(void)
 220          {
 221   1              tm1629_clear();
 222   1              Ds1302_Read_Time(); 
 223   1              buf_display[1][7] = CODE[2];                            //Äê
 224   1              buf_display[1][6] = CODE[0];
 225   1              buf_display[1][5] = CODE[time_buf1[1] / 10];
 226   1              buf_display[1][4] = CODE[time_buf1[1] % 10];
 227   1      
 228   1              buf_display[1][3] = 0x40;                                        // -
 229   1              
 230   1              buf_display[1][2] = CODE[time_buf1[2] / 10]; //ÔÂ
 231   1              buf_display[1][1] = CODE[time_buf1[2] % 10];
 232   1      
 233   1              buf_display[1][0] = 0x40;                                        // -
 234   1      
 235   1              buf_display[0][7] = CODE[time_buf1[3] / 10];
 236   1              buf_display[0][6] = CODE[time_buf1[3] % 10];//ÈÕ
 237   1      
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 5   

 238   1              buf_display[0][5] = CODE[time_buf1[7]];         //ÐÇÆÚ
 239   1      
 240   1              buf_display[0][3] = CODE[time_buf1[4] / 10]; //Ð¡Ê±
 241   1              buf_display[0][2] = CODE[time_buf1[4] % 10];
 242   1              buf_display[0][1] = CODE[time_buf1[5] / 10]; //Ð¡Ê±
 243   1              buf_display[0][0] = CODE[time_buf1[5] % 10];
 244   1      
 245   1              display();
 246   1      
 247   1      }
 248          
 249          void tm1629_f(unsigned char f_number) //µÚÒ»ÐÐµ¹Êý¶þ¸öÏÔÊ¾F,µ¹ÊýµÚÒ»¸öÏÔÊ¾f_number
 250          {
 251   1              tm1629_clear();
 252   1              buf_display[0][1] = CODE[0x0f];
 253   1              buf_display[0][0] = CODE[f_number];
 254   1              display();
 255   1      }
 256          
 257          void tm1629_E(unsigned char f_number) //µÚÒ»ÐÐµ¹Êý¶þ¸öÏÔÊ¾F,µ¹ÊýµÚÒ»¸öÏÔÊ¾f_number
 258          {
 259   1              tm1629_clear();
 260   1              buf_display[0][1] = CODE[0x0E];
 261   1              buf_display[0][0] = CODE[f_number];
 262   1              display();
 263   1      }
 264          void Show_on(void)
 265          {
 266   1              tm1629_clear();
 267   1              buf_display[0][1] = CODE[0];
 268   1              buf_display[0][0] = 0x54;
 269   1              display();
 270   1      }
 271          
 272          void Show_off(void)
 273          {
 274   1              tm1629_clear();
 275   1              buf_display[0][1] = CODE[0x00];
 276   1              buf_display[0][0] = CODE[0x0f];
 277   1              display();
 278   1      }
 279          
 280          void Show_one_number(unsigned char f_number) //ÏÔÊ¾Ò»¸öÊý×Ö
 281          {
 282   1              tm1629_clear();
 283   1              //buf_display[0][1] = CODE[0x0E];
 284   1              buf_display[0][0] = CODE[f_number];
 285   1              display();
 286   1      }
 287          
 288          void Show_two_number(unsigned char f_number) //ÏÔÊ¾Á½¸öÊý×Ö
 289          {
 290   1              tm1629_clear();
 291   1              buf_display[0][1] = CODE[f_number / 10];
 292   1              buf_display[0][0] = CODE[f_number % 10];
 293   1              display();
 294   1      }
 295          
 296          void Show_four_number(unsigned char* temp)
 297          {
 298   1              tm1629_clear();
 299   1              buf_display[0][3] = CODE[*(temp)];
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 6   

 300   1              buf_display[0][2] = CODE[*(temp+1)];
 301   1              buf_display[0][1] = CODE[*(temp+2)];
 302   1              buf_display[0][0] = CODE[*(temp+3)];
 303   1              display();
 304   1      }
 305          
 306          void tm1629_load(void)
 307          {
 308   1              tm1629_clear();
 309   1              if (*(display_ram + 66) != 0)
 310   1                      mcuram_to_displayram(buf_display[5] + 7, display_ram + 66);
 311   1              if (*(display_ram + 60) != 0)
 312   1                      mcuram_to_displayram(buf_display[5] + 3, display_ram + 60);
 313   1              if (*(display_ram + 54) != 0)
 314   1                      mcuram_to_displayram(buf_display[4] + 7, display_ram + 54);
 315   1              if (*(display_ram + 48) != 0)
 316   1                      mcuram_to_displayram(buf_display[4] + 3, display_ram + 48);
 317   1              if (*(display_ram + 42) != 0)
 318   1                      mcuram_to_displayram(buf_display[3] + 7, display_ram + 42);
 319   1              if (*(display_ram + 36) != 0)
 320   1                      mcuram_to_displayram(buf_display[3] + 3, display_ram + 36);
 321   1              if (*(display_ram + 30) != 0)
 322   1                      mcuram_to_displayram(buf_display[2] + 7, display_ram + 30);
 323   1              if (*(display_ram + 24) != 0)
 324   1                      mcuram_to_displayram(buf_display[2] + 3, display_ram + 24);
 325   1              if (*(display_ram + 18) != 0)
 326   1                      mcuram_to_displayram(buf_display[1] + 7, display_ram + 18);
 327   1              if (*(display_ram + 12) != 0)
 328   1                      mcuram_to_displayram(buf_display[1] + 3, display_ram + 12);
 329   1              if (*(display_ram + 6) != 0)
 330   1                      mcuram_to_displayram(buf_display[0] + 7, display_ram + 6);
 331   1              if (*(display_ram + 0) != 0)
 332   1                      mcuram_to_displayram(buf_display[0] + 3, display_ram);
 333   1      }
 334          
 335          void mcuram_to_displayram(unsigned char a[48], unsigned char* b)  //´ÓRAMÇøÓòÒÆµ½ÏÔ´æÇøÓò,Ë³´ø·­Òë³ÉÊýÂë¹Ü
             -ÏÔÊ¾µÄÂë
 336          {
 337   1              /*
 338   1              A// Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 339   1              B// Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 340   1              */
 341   1              *(a) = CODE[*(b + 1)];
 342   1              *(a - 1) = CODE[*(b + 2)];
 343   1              *(a - 2) = CODE[*(b + 3)];
 344   1              *(a - 3) = CODE[*(b + 4)];
 345   1      }
 346          
 347          void decoder_temp_to_mcuram(unsigned char* a, unsigned char* index)//aÎªMCU»º´æÇø   indexÎª½âÂëºóÈ¡³öµÄ8×Ö
             -½ÚÁÙÊ±Êý×é
 348          {
 349   1              *(a + 0) = *(index);
 350   1              *(a + 1) = *(index + 1);
 351   1              *(a + 2) = *(index + 2);
 352   1              *(a + 3) = *(index + 3);
 353   1              *(a + 4) = *(index + 4);
 354   1              *(a + 5) = *(index + 5);
 355   1      }
 356          
 357          void mcuram_to_mcuram_down(unsigned char* a) //aÎªMCURAM»º´æÇøÇø   ÏòÏÂÑ¹Ò»×éÊý¾Ý
 358          {
 359   1              *(a + 6) = *(a);                //ramÇøÔªËØÏÂÒÆ6¸ö
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 7   

 360   1              *(a + 7) = *(a + 1);
 361   1              *(a + 8) = *(a + 2);
 362   1              *(a + 9) = *(a + 3);
 363   1              *(a + 10) = *(a + 4);
 364   1              *(a + 11) = *(a + 5);
 365   1      
 366   1      }
 367          
 368          void mcuram_to_mcuram_up(unsigned char* a) //aÎªMCURAM»º´æÇøÇø   ÏòÉÏÑ¹Ò»×éÊý¾Ý
 369          {
 370   1              *(a) = *(a + 6);   //ramÇøÔªËØÉÏÒÆ6¸ö
 371   1              *(a + 1) = *(a + 7);
 372   1              *(a + 2) = *(a + 8);
 373   1              *(a + 3) = *(a + 9);
 374   1              *(a + 4) = *(a + 10);
 375   1              *(a + 5) = *(a + 11);
 376   1      }
 377          
 378          void CycleProcess(void)
 379          {
 380   1              unsigned char i, index;
 381   1              unsigned char f5_xunhuan, f4_xiaohao, logout_cycle_table_temp;
 382   1              unsigned char temp[6] = { 0 };
 383   1              f5_xunhuan = return_Two_Menu_F5_E1();
 384   1              f4_xiaohao = return_Two_Menu_F4_E1();
 385   1              logout_cycle_table_temp = return_logout_cycle_table();
 386   1              /*Ñ­»·´¦Àíº¯Êý*/
 387   1              if ((f5_xunhuan<f4_xiaohao && logout_cycle_table_temp>f5_xunhuan && f4_xiaohao && f5_xunhuan) || (f4_xiao
             -hao == 0 && f5_xunhuan &&logout_cycle_table_temp>f5_xunhuan))
 388   1              {
 389   2                      for (i = 0; i<10; i++)
 390   2                      {
 391   3                              if (display_ram[i * 6 ] == 0)
 392   3                              {
 393   4                                      index = i;
 394   4                                      break;
 395   4                              }
 396   3                      }
 397   2      
 398   2                      for (i = 0; i<6; i++)
 399   2                      {
 400   3                              temp[i] = display_ram[(index - 1) * 6 + i];
 401   3                      }
 402   2      
 403   2                      for (i = index; i>1; i--)
 404   2                      {
 405   3                              mcuram_to_mcuram_down(display_ram + (i - 2) * 6);
 406   3                      }
 407   2                      for (i = 0; i<6; i++)
 408   2                      {
 409   3                              display_ram[i] = temp[i];
 410   3                      }
 411   2                      tm1629_load();
 412   2                      display();
 413   2                      set_logout_cycle_table(0);
 414   2              }
 415   1      }
 416          
 417          void LogoutProcess(void)
 418          {
 419   1              unsigned char i;
 420   1              unsigned char f5_xunhuan, f4_xiaohao, logout_cycle_table_temp, Two_Menu_F3_E2_temp;
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 8   

 421   1              f5_xunhuan = return_Two_Menu_F5_E1();
 422   1              f4_xiaohao = return_Two_Menu_F4_E1();
 423   1              logout_cycle_table_temp = return_logout_cycle_table();
 424   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 425   1              /*ÏúºÅ´¦Àíº¯Êý*/
 426   1              if ((f4_xiaohao<f5_xunhuan&& logout_cycle_table_temp>f4_xiaohao && f5_xunhuan && f4_xiaohao) || (f5_xunhu
             -an == 0 && f4_xiaohao && logout_cycle_table_temp>f4_xiaohao))
 427   1              {
 428   2                      for (i = 0; i<(Two_Menu_F3_E2_temp - 1); i++)
 429   2                      {
 430   3                              mcuram_to_mcuram_up(display_ram + i * 6);
 431   3                      }
 432   2                      for (i = (Two_Menu_F3_E2_temp - 1) * 6; i<Two_Menu_F3_E2_temp * 6; i++)
 433   2                      {
 434   3                              display_ram[i] = 0;
 435   3                      }
 436   2                      tm1629_load();
 437   2                      display();
 438   2                      set_logout_cycle_table(0);
 439   2                      if (display_ram[0] == 0)
 440   2                      {
 441   3                              set_func_index(MENU_STANDBY);
 442   3                      }
 443   2              }
 444   1      }
 445          
 446          
 447          
 448          
 449          
 450          void Logout(void)
 451          {
 452   1              unsigned char i;
 453   1              unsigned char Two_Menu_F3_E2_temp= 0;
 454   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 455   1              /*ÏúºÅ´¦Àíº¯Êý*/
 456   1              for (i = 0; i<(Two_Menu_F3_E2_temp - 1); i++)
 457   1              {
 458   2                      mcuram_to_mcuram_up(display_ram + i * 6);
 459   2              }
 460   1              for (i = (Two_Menu_F3_E2_temp - 1) * 6; i<Two_Menu_F3_E2_temp * 6; i++)
 461   1              {
 462   2                      display_ram[i] = 0;
 463   2              }
 464   1              tm1629_load();
 465   1              display();
 466   1              if (display_ram[0] == 0)
 467   1              {
 468   2                      set_func_index(MENU_STANDBY);
 469   2              }
 470   1      }
 471          
 472          void CycleUp(void)
 473          {
 474   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 475   1              unsigned char temp[6] = { 0 };
 476   1              index = return_Two_Menu_F3_E2();
 477   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 478   1              /*Ñ­»·´¦Àíº¯Êý*/
 479   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 480   1              {
 481   2                      if (display_ram[i * 6 ] == 0)
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 9   

 482   2                      {
 483   3                              index = i;
 484   3                              break;
 485   3                      }
 486   2              }
 487   1              for (i = 0; i<6; i++)
 488   1              {
 489   2                      temp[i] = display_ram[i];
 490   2              }
 491   1              for (i = 0; i<index; i++)
 492   1              {
 493   2                      mcuram_to_mcuram_up(display_ram + i * 6);
 494   2              }
 495   1              for (i = 0; i<6; i++)
 496   1              {
 497   2                      display_ram[(index - 1) * 6 + i] = temp[i];
 498   2              }
 499   1              tm1629_load();
 500   1              display();
 501   1      }
 502          
 503          void CycleDown(void)
 504          {
 505   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 506   1              unsigned char temp[6] = { 0 };
 507   1              index = return_Two_Menu_F3_E2();
 508   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 509   1              /*Ñ­»·´¦Àíº¯Êý*/
 510   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 511   1              {
 512   2                      if (display_ram[i * 6 ] == 0)
 513   2                      {
 514   3                              index = i;
 515   3                              break;
 516   3                      }
 517   2              }
 518   1      
 519   1              for (i = 0; i<6; i++)
 520   1              {
 521   2                      temp[i] = display_ram[(index - 1) * 6 + i];
 522   2              }
 523   1      
 524   1              for (i = index; i>1; i--)
 525   1              {
 526   2                      mcuram_to_mcuram_down(display_ram + (i - 2) * 6);
 527   2              }
 528   1              for (i = 0; i<6; i++)
 529   1              {
 530   2                      display_ram[i] = temp[i];
 531   2              }
 532   1              tm1629_load();
 533   1              display();
 534   1      }
 535          
 536          void Cancel_funtion(unsigned char* id_number, unsigned char* buff)//id_numberÎª½âÂëµÄtempÊý×é£¬buffÎªÏÔÊ¾»
             -º´æ
 537          {
 538   1              /*
 539   1              id_number  //  ÐòºÅ¡¢½ÓÊÕºÅ*3¡¢ID*3¡¢ÇøºÅ
 540   1              buff    //                ÐòºÅ¡¢Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 541   1              */
 542   1      
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 10  

 543   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 544   1              unsigned char temp[6] = { 0 };
 545   1              index = return_Two_Menu_F3_E2();
 546   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 547   1      
 548   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 549   1              {
 550   2                      if (*(id_number + 1) == *(buff + i * 6 + 1) && *(id_number + 2) == *(buff + i * 6 + 2) && *(id_number + 
             -3) == *(buff + i * 6 + 3) && *(id_number + 4) == *(buff + i * 6 + 4))
 551   2                      {
 552   3                              index = i;
 553   3                              break;
 554   3                      }
 555   2              }
 556   1              for (i = index; i<Two_Menu_F3_E2_temp; i++)
 557   1              {
 558   2                      mcuram_to_mcuram_up(buff + i * 6);
 559   2              }
 560   1              if (index != Two_Menu_F3_E2_temp)
 561   1              {
 562   2                      for (i = 0; i<6; i++)
 563   2                      {
 564   3                              *(buff + (Two_Menu_F3_E2_temp - 1) * 6 + i) = 0;
 565   3                      }
 566   2              }
 567   1              if (*(buff) == 0)
 568   1              {
 569   2                      set_func_index(MENU_STANDBY);
 570   2              }
 571   1      }
 572          
 573          
 574          void fun0(void) //´ý»úÏÔÊ¾º¯Êý
 575          {
 576   1              unsigned char temp = 0;
 577   1              temp = return_Two_Menu_FC_E1();
 578   1              if (temp == 1)
 579   1              {
 580   2                      tm1629_await();
 581   2              }
 582   1              else
 583   1              {
 584   2                      Display_time();
 585   2              }
 586   1              tm1629_display_buff_clear();
 587   1      }
 588          
 589          void fun1(void) //Ò»¼¶²Ëµ¥F0
 590          {
 591   1              tm1629_f(0x00);
 592   1      }
 593          
 594          void fun2(void) //Ò»¼¶²Ëµ¥F1
 595          {
 596   1              tm1629_f(0x01);
 597   1      }
 598          
 599          void fun3(void) //Ò»¼¶²Ëµ¥F2
 600          {
 601   1              tm1629_f(0x02);
 602   1      }
 603          
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 11  

 604          void fun4(void) //Ò»¼¶²Ëµ¥F3
 605          {
 606   1              tm1629_f(0x03);
 607   1      }
 608          
 609          void fun5(void) //Ò»¼¶²Ëµ¥F4
 610          {
 611   1              tm1629_f(0x04);
 612   1      }
 613          
 614          void fun6(void) //Ò»¼¶²Ëµ¥F5
 615          {
 616   1              tm1629_f(0x05);
 617   1      }
 618          
 619          void fun7(void) //Ò»¼¶²Ëµ¥F6
 620          {
 621   1              tm1629_f(0x06);
 622   1      }
 623          
 624          void fun8(void) //Ò»¼¶²Ëµ¥F7
 625          {
 626   1              tm1629_f(0x07);
 627   1      }
 628          
 629          void fun9(void) //Ò»¼¶²Ëµ¥F8
 630          {
 631   1              tm1629_f(0x08);
 632   1      }
 633          
 634          void fun10(void) //Ò»¼¶²Ëµ¥F9
 635          {
 636   1              tm1629_f(0x09);
 637   1      }
 638          
 639          void fun11(void) //Ò»¼¶²Ëµ¥FA
 640          {
 641   1              tm1629_f(0x0a);
 642   1      }
 643          
 644          void fun12(void) //Ò»¼¶²Ëµ¥Fb
 645          {
 646   1              tm1629_f(0x0b);
 647   1      }
 648          
 649          void fun13(void) //Ò»¼¶²Ëµ¥FC
 650          {
 651   1              tm1629_f(0x0c);
 652   1      }
 653          
 654          void fun14(void) //Ò»¼¶²Ëµ¥Fd
 655          {
 656   1              tm1629_f(0x0d);
 657   1      }
 658          
 659          void fun15(void) //ÉèÖÃÄê·Ý
 660          {
 661   1              unsigned char temp;
 662   1              temp = return_Two_Menu_FC_E1();
 663   1              if (temp == 1)//Èç¹ûÎª----  Ôò²»ÈÃ½øÈëF0
 664   1              {
 665   2                      set_func_index(ONE_MENU_F0);
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 12  

 666   2              }
 667   1              else
 668   1              {
 669   2                      if (return_await_number_table() == 1)
 670   2                      {
 671   3                              Display_time();
 672   3                              set_await_number_table(2);
 673   3                      }
 674   2                      if (return_await_number_table() == 3)
 675   2                      {
 676   3                              buf_display[1][7] = 0;
 677   3                              buf_display[1][6] = 0;
 678   3                              buf_display[1][5] = 0;
 679   3                              buf_display[1][4] = 0;
 680   3                              display();
 681   3                              set_await_number_table(0);
 682   3                      }
 683   2                      Ds1302_Write_Time();
 684   2              }
 685   1      }
 686          
 687          void fun16(void) //ÉèÖÃÔÂ·Ý
 688          {
 689   1              if (return_await_number_table() == 1)
 690   1              {
 691   2                      Display_time();
 692   2                      set_await_number_table(2);
 693   2              }
 694   1              if (return_await_number_table() == 3)
 695   1              {
 696   2                      buf_display[1][2] = 0;
 697   2                      buf_display[1][1] = 0;
 698   2                      display();
 699   2                      set_await_number_table(0);
 700   2              }
 701   1              Ds1302_Write_Time();
 702   1      }
 703          
 704          void fun17(void) //ÉèÖÃÈÕÆÚ
 705          {
 706   1              if (return_await_number_table() == 1)
 707   1              {
 708   2                      Display_time();
 709   2                      set_await_number_table(2);
 710   2              }
 711   1              if (return_await_number_table() == 3)
 712   1              {
 713   2                      buf_display[0][7] = 0;
 714   2                      buf_display[0][6] = 0;
 715   2                      display();
 716   2                      set_await_number_table(0);
 717   2              }
 718   1              Ds1302_Write_Time();
 719   1      }
 720          
 721          void fun18(void) //ÉèÖÃÐÇÆÚ
 722          {
 723   1              if (return_await_number_table() == 1)
 724   1              {
 725   2                      Display_time();
 726   2                      set_await_number_table(2);
 727   2              }
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 13  

 728   1              if (return_await_number_table() == 3)
 729   1              {
 730   2                      buf_display[0][5] = 0;
 731   2                      display();
 732   2                      set_await_number_table(0);
 733   2              }
 734   1              Ds1302_Write_Time();
 735   1      }
 736          
 737          void fun19(void) //ÉèÖÃÐ¡Ê±
 738          {
 739   1              if (return_await_number_table() == 1)
 740   1              {
 741   2                      Display_time();
 742   2                      set_await_number_table(2);
 743   2              }
 744   1              if (return_await_number_table() == 3)
 745   1              {
 746   2                      buf_display[0][3] = 0;
 747   2                      buf_display[0][2] = 0;
 748   2                      display();
 749   2                      set_await_number_table(0);
 750   2              }
 751   1              Ds1302_Write_Time();
 752   1      }
 753          
 754          void fun20(void) //ÉèÖÃ·ÖÖÓ
 755          {
 756   1              if (return_await_number_table() == 1)
 757   1              {
 758   2                      Display_time();
 759   2                      set_await_number_table(2);
 760   2              }
 761   1              if (return_await_number_table() == 3)
 762   1              {
 763   2                      buf_display[0][1] = 0;
 764   2                      buf_display[0][0] = 0;
 765   2                      display();
 766   2                      set_await_number_table(0);
 767   2              }
 768   1              Ds1302_Write_Time();
 769   1      }
 770          
 771          void fun21(void) //¶þ¼¶²Ëµ¥F1-E1
 772          {
 773   1              tm1629_E(0x01);
 774   1              Two_Menu_F1_E1[0] = 0;
 775   1              Two_Menu_F1_E1[1] = 0;
 776   1              Two_Menu_F1_E1[2] = 0;
 777   1              Two_Menu_F1_E1[3] = 1;
 778   1      }
 779          
 780          void fun22(void) //¶þ¼¶²Ëµ¥F1-E2
 781          {
 782   1              tm1629_E(0x02);
 783   1              Two_Menu_F1_E2[0] = 0;
 784   1              Two_Menu_F1_E2[1] = 0;
 785   1              Two_Menu_F1_E2[2] = 0;
 786   1              Two_Menu_F1_E2[3] = 1;
 787   1      }
 788          
 789          void fun23(void) //¶þ¼¶²Ëµ¥F1-E3
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 14  

 790          {
 791   1              tm1629_E(0x03);
 792   1              Two_Menu_F1_E3[0] = 0;
 793   1              Two_Menu_F1_E3[1] = 0;
 794   1              Two_Menu_F1_E3[2] = 0;
 795   1              Two_Menu_F1_E3[3] = 1;
 796   1      }
 797          
 798          void fun24(void) //¶þ¼¶²Ëµ¥F1-E4
 799          {
 800   1              tm1629_E(0x04);
 801   1              Two_Menu_F1_E4[0] = 0;
 802   1              Two_Menu_F1_E4[1] = 0;
 803   1              Two_Menu_F1_E4[2] = 0;
 804   1              Two_Menu_F1_E4[3] = 1;
 805   1      }
 806          
 807          void fun25(void) //¶þ¼¶²Ëµ¥F2-E1
 808          {
 809   1              tm1629_E(0x01);
 810   1              Two_Menu_F2_E1[0] = 0;
 811   1              Two_Menu_F2_E1[1] = 0;
 812   1              Two_Menu_F2_E1[2] = 0;
 813   1              Two_Menu_F2_E1[3] = 1;
 814   1      }
 815          
 816          void fun26(void) //¶þ¼¶²Ëµ¥F2-E2
 817          {
 818   1              tm1629_E(0x02);
 819   1              Two_Menu_F2_E2[0] = 0;
 820   1              Two_Menu_F2_E2[1] = 0;
 821   1              Two_Menu_F2_E2[2] = 0;
 822   1              Two_Menu_F2_E2[3] = 1;
 823   1      }
 824          
 825          void fun27(void) //¶þ¼¶²Ëµ¥F2-E3
 826          {
 827   1              tm1629_E(0x03);
 828   1              Two_Menu_F2_E3[0] = 0;
 829   1              Two_Menu_F2_E3[1] = 0;
 830   1              Two_Menu_F2_E3[2] = 0;
 831   1              Two_Menu_F2_E3[3] = 1;
 832   1      }
 833          
 834          void fun28(void) //¶þ¼¶²Ëµ¥F2-E4
 835          {
 836   1              tm1629_E(0x04);
 837   1              Two_Menu_F2_E4[0] = 0;
 838   1              Two_Menu_F2_E4[1] = 0;
 839   1              Two_Menu_F2_E4[2] = 0;
 840   1              Two_Menu_F2_E4[3] = 1;
 841   1      }
 842          
 843          void fun29(void) //¶þ¼¶²Ëµ¥F3-E1
 844          {
 845   1              tm1629_E(0x01);
 846   1      }
 847          
 848          void fun30(void) //¶þ¼¶²Ëµ¥F3-E2
 849          {
 850   1              tm1629_E(0x02);
 851   1      }
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 15  

 852          
 853          void fun31(void) //¶þ¼¶²Ëµ¥F4
 854          {
 855   1              unsigned char temp = 0;
 856   1              temp = return_Two_Menu_F4_E1();
 857   1              Show_two_number(temp);
 858   1      }
 859          
 860          void fun32(void) //¶þ¼¶²Ëµ¥F5
 861          {
 862   1              unsigned char temp = 0;
 863   1              temp = return_Two_Menu_F5_E1();
 864   1              Show_two_number(temp);
 865   1      }
 866          
 867          void fun33(void) //¶þ¼¶²Ëµ¥F6-E1
 868          {
 869   1              tm1629_E(0x01);
 870   1      }
 871          
 872          void fun34(void) //¶þ¼¶²Ëµ¥F6-E2
 873          {
 874   1              tm1629_E(0x02);
 875   1      }
 876          
 877          void fun35(void) //¶þ¼¶²Ëµ¥F6-E3
 878          {
 879   1              tm1629_E(0x03);
 880   1      }
 881          
 882          void fun36(void) //¶þ¼¶²Ëµ¥F6-E4
 883          {
 884   1              tm1629_E(0x04);
 885   1      }
 886          
 887          void fun37(void) //¶þ¼¶²Ëµ¥F6-E5
 888          {
 889   1              tm1629_E(0x05);
 890   1      }
 891          
 892          void fun38(void) //¶þ¼¶²Ëµ¥F7-E1
 893          {
 894   1              tm1629_E(0x01);
 895   1      }
 896          
 897          void fun39(void) //¶þ¼¶²Ëµ¥F7-E2
 898          {
 899   1              tm1629_E(0x02);
 900   1      }
 901          
 902          void fun40(void) //¶þ¼¶²Ëµ¥F7-E3
 903          {
 904   1              tm1629_E(0x03);
 905   1      }
 906          
 907          void fun41(void) //¶þ¼¶²Ëµ¥F7-E4
 908          {
 909   1              tm1629_E(0x04);
 910   1      }
 911          
 912          void fun42(void) //¶þ¼¶²Ëµ¥F8-E1
 913          {
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 16  

 914   1              tm1629_E(0x01);
 915   1              Two_Menu_F8_E1_save = return_Two_Menu_F8_E1();
 916   1      }
 917          
 918          void fun43(void) //¶þ¼¶²Ëµ¥F8-E2
 919          {
 920   1              tm1629_E(0x02);
 921   1      }
 922          
 923          void fun44(void) //¶þ¼¶²Ëµ¥F9-E1
 924          {
 925   1              tm1629_E(0x01);
 926   1      }
 927          
 928          void fun45(void) //¶þ¼¶²Ëµ¥F9-E2
 929          {
 930   1              tm1629_E(0x02);
 931   1      }
 932          
 933          void fun46(void) //¶þ¼¶²Ëµ¥FA
 934          {
 935   1              tm1629_f(0x0f);
 936   1      }
 937          
 938          
 939          void fun47(void) //¶þ¼¶²Ëµ¥Fb
 940          {
 941   1              unsigned char temp = 0;
 942   1              temp = return_Two_Menu_Fb_E1();
 943   1              Show_one_number(temp);
 944   1      }
 945          
 946          void fun48(void) //¶þ¼¶²Ëµ¥FC
 947          {
 948   1              unsigned char temp = 0;
 949   1              temp = return_Two_Menu_FC_E1();
 950   1              Show_one_number(temp);
 951   1      }
 952          
 953          void fun49(void) //¶þ¼¶²Ëµ¥Fd
 954          {
 955   1              tm1629_f(0x0f);
 956   1      }
 957          
 958          void fun50(void) //F1_E1 Ç§Î»ÉÁË¸
 959          {
 960   1              if (return_await_number_table() == 1)
 961   1              {
 962   2                      Show_four_number(Two_Menu_F1_E1);
 963   2                      set_await_number_table(2);
 964   2              }
 965   1              if (return_await_number_table() == 3)
 966   1              {
 967   2                      buf_display[0][3] = 0;
 968   2                      display();
 969   2                      set_await_number_table(0);
 970   2              }
 971   1      }
 972          
 973          void fun51(void) //F1_E1 °ÙÎ»ÉÁË¸
 974          {
 975   1              if (return_await_number_table() == 1)
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 17  

 976   1              {
 977   2                      Show_four_number(Two_Menu_F1_E1);
 978   2                      set_await_number_table(2);
 979   2              }
 980   1              if (return_await_number_table() == 3)
 981   1              {
 982   2                      buf_display[0][2] = 0;
 983   2                      display();
 984   2                      set_await_number_table(0);
 985   2              }
 986   1      }
 987          
 988          void fun52(void)  //F1_E1 Ê®Î»ÉÁË¸
 989          {
 990   1              if (return_await_number_table() == 1)
 991   1              {
 992   2                      Show_four_number(Two_Menu_F1_E1);
 993   2                      set_await_number_table(2);
 994   2              }
 995   1              if (return_await_number_table() == 3)
 996   1              {
 997   2                      buf_display[0][1] = 0;
 998   2                      display();
 999   2                      set_await_number_table(0);
1000   2              }
1001   1      }
1002          
1003          void fun53(void) //F1_E1 ¸öÎ»ÉÁË¸
1004          {
1005   1              if (return_await_number_table() == 1)
1006   1              {
1007   2                      Show_four_number(Two_Menu_F1_E1);
1008   2                      set_await_number_table(2);
1009   2              }
1010   1              if (return_await_number_table() == 3)
1011   1              {
1012   2                      buf_display[0][0] = 0;
1013   2                      display();
1014   2                      set_await_number_table(0);
1015   2              }
1016   1      }
1017          
1018          void fun54(void) //F1_E2 Ç§Î»ÉÁË¸
1019          {
1020   1              if (return_await_number_table() == 1)
1021   1              {
1022   2                      Show_four_number(Two_Menu_F1_E2);
1023   2                      set_await_number_table(2);
1024   2              }
1025   1              if (return_await_number_table() == 3)
1026   1              {
1027   2                      buf_display[0][3] = 0;
1028   2                      display();
1029   2                      set_await_number_table(0);
1030   2              }
1031   1      }
1032          
1033          void fun55(void) //F1_E2 °ÙÎ»ÉÁË¸
1034          {
1035   1              if (return_await_number_table() == 1)
1036   1              {
1037   2                      Show_four_number(Two_Menu_F1_E2);
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 18  

1038   2                      set_await_number_table(2);
1039   2              }
1040   1              if (return_await_number_table() == 3)
1041   1              {
1042   2                      buf_display[0][2] = 0;
1043   2                      display();
1044   2                      set_await_number_table(0);
1045   2              }
1046   1      }
1047          
1048          void fun56(void) //F1_E2 Ê®Î»ÉÁË¸
1049          {
1050   1              if (return_await_number_table() == 1)
1051   1              {
1052   2                      Show_four_number(Two_Menu_F1_E2);
1053   2                      set_await_number_table(2);
1054   2              }
1055   1              if (return_await_number_table() == 3)
1056   1              {
1057   2                      buf_display[0][1] = 0;
1058   2                      display();
1059   2                      set_await_number_table(0);
1060   2              }
1061   1      }
1062          
1063          void fun57(void) //F1_E2 ¸öÎ»ÉÁË¸
1064          {
1065   1              if (return_await_number_table() == 1)
1066   1              {
1067   2                      Show_four_number(Two_Menu_F1_E2);
1068   2                      set_await_number_table(2);
1069   2              }
1070   1              if (return_await_number_table() == 3)
1071   1              {
1072   2                      buf_display[0][0] = 0;
1073   2                      display();
1074   2                      set_await_number_table(0);
1075   2              }
1076   1      }
1077          
1078          void fun58(void) //F1_E3 Ç§Î»ÉÁË¸
1079          {
1080   1              if (return_await_number_table() == 1)
1081   1              {
1082   2                      Show_four_number(Two_Menu_F1_E3);
1083   2                      set_await_number_table(2);
1084   2              }
1085   1              if (return_await_number_table() == 3)
1086   1              {
1087   2                      buf_display[0][3] = 0;
1088   2                      display();
1089   2                      set_await_number_table(0);
1090   2              }
1091   1      }
1092          
1093          void fun59(void) //F1_E3 °ÙÎ»ÉÁË¸
1094          {
1095   1              if (return_await_number_table() == 1)
1096   1              {
1097   2                      Show_four_number(Two_Menu_F1_E3);
1098   2                      set_await_number_table(2);
1099   2              }
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 19  

1100   1              if (return_await_number_table() == 3)
1101   1              {
1102   2                      buf_display[0][2] = 0;
1103   2                      display();
1104   2                      set_await_number_table(0);
1105   2              }
1106   1      }
1107          
1108          void fun60(void) //F1_E3 Ê®Î»ÉÁË¸
1109          {
1110   1              if (return_await_number_table() == 1)
1111   1              {
1112   2                      Show_four_number(Two_Menu_F1_E3);
1113   2                      set_await_number_table(2);
1114   2              }
1115   1              if (return_await_number_table() == 3)
1116   1              {
1117   2                      buf_display[0][1] = 0;
1118   2                      display();
1119   2                      set_await_number_table(0);
1120   2              }
1121   1      }
1122          
1123          void fun61(void) //F1_E3 ¸öÎ»ÉÁË¸
1124          {
1125   1              if (return_await_number_table() == 1)
1126   1              {
1127   2                      Show_four_number(Two_Menu_F1_E3);
1128   2                      set_await_number_table(2);
1129   2              }
1130   1              if (return_await_number_table() == 3)
1131   1              {
1132   2                      buf_display[0][0] = 0;
1133   2                      display();
1134   2                      set_await_number_table(0);
1135   2              }
1136   1      }
1137          
1138          void fun62(void) //F1_E4 Ç§Î»ÉÁË¸
1139          {
1140   1              if (return_await_number_table() == 1)
1141   1              {
1142   2                      Show_four_number(Two_Menu_F1_E4);
1143   2                      set_await_number_table(2);
1144   2              }
1145   1              if (return_await_number_table() == 3)
1146   1              {
1147   2                      buf_display[0][3] = 0;
1148   2                      display();
1149   2                      set_await_number_table(0);
1150   2              }
1151   1      }
1152          
1153          void fun63(void) //F1_E4 °ÙÎ»ÉÁË¸
1154          {
1155   1              if (return_await_number_table() == 1)
1156   1              {
1157   2                      Show_four_number(Two_Menu_F1_E4);
1158   2                      set_await_number_table(2);
1159   2              }
1160   1              if (return_await_number_table() == 3)
1161   1              {
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 20  

1162   2                      buf_display[0][2] = 0;
1163   2                      display();
1164   2                      set_await_number_table(0);
1165   2              }
1166   1      }
1167          
1168          void fun64(void) //F1_E4 Ê®Î»ÉÁË¸
1169          {
1170   1              if (return_await_number_table() == 1)
1171   1              {
1172   2                      Show_four_number(Two_Menu_F1_E4);
1173   2                      set_await_number_table(2);
1174   2              }
1175   1              if (return_await_number_table() == 3)
1176   1              {
1177   2                      buf_display[0][1] = 0;
1178   2                      display();
1179   2                      set_await_number_table(0);
1180   2              }
1181   1      }
1182          
1183          void fun65(void) //F1_E4 ¸öÎ»ÉÁË¸
1184          {
1185   1              if (return_await_number_table() == 1)
1186   1              {
1187   2                      Show_four_number(Two_Menu_F1_E4);
1188   2                      set_await_number_table(2);
1189   2              }
1190   1              if (return_await_number_table() == 3)
1191   1              {
1192   2                      buf_display[0][0] = 0;
1193   2                      display();
1194   2                      set_await_number_table(0);
1195   2              }
1196   1      }
1197          
1198          void fun66(void) //F2_E1 Ç§Î»ÉÁË¸
1199          {
1200   1              if (return_await_number_table() == 1)
1201   1              {
1202   2                      Show_four_number(Two_Menu_F2_E1);
1203   2                      set_await_number_table(2);
1204   2              }
1205   1              if (return_await_number_table() == 3)
1206   1              {
1207   2                      buf_display[0][3] = 0;
1208   2                      display();
1209   2                      set_await_number_table(0);
1210   2              }
1211   1      }
1212          
1213          void fun67(void) //F2_E1 °ÙÎ»ÉÁË¸
1214          {
1215   1              if (return_await_number_table() == 1)
1216   1              {
1217   2                      Show_four_number(Two_Menu_F2_E1);
1218   2                      set_await_number_table(2);
1219   2              }
1220   1              if (return_await_number_table() == 3)
1221   1              {
1222   2                      buf_display[0][2] = 0;
1223   2                      display();
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 21  

1224   2                      set_await_number_table(0);
1225   2              }
1226   1      }
1227          
1228          void fun68(void) //F2_E1 Ê®Î»ÉÁË¸
1229          {
1230   1              if (return_await_number_table() == 1)
1231   1              {
1232   2                      Show_four_number(Two_Menu_F2_E1);
1233   2                      set_await_number_table(2);
1234   2              }
1235   1              if (return_await_number_table() == 3)
1236   1              {
1237   2                      buf_display[0][1] = 0;
1238   2                      display();
1239   2                      set_await_number_table(0);
1240   2              }
1241   1      }
1242          
1243          void fun69(void) //F2_E1 ¸öÎ»ÉÁË¸
1244          {
1245   1              if (return_await_number_table() == 1)
1246   1              {
1247   2                      Show_four_number(Two_Menu_F2_E1);
1248   2                      set_await_number_table(2);
1249   2              }
1250   1              if (return_await_number_table() == 3)
1251   1              {
1252   2                      buf_display[0][0] = 0;
1253   2                      display();
1254   2                      set_await_number_table(0);
1255   2              }
1256   1      }
1257          
1258          void fun70(void) //F2_E2 Ç§Î»ÉÁË¸
1259          {
1260   1              if (return_await_number_table() == 1)
1261   1              {
1262   2                      Show_four_number(Two_Menu_F2_E2);
1263   2                      set_await_number_table(2);
1264   2              }
1265   1              if (return_await_number_table() == 3)
1266   1              {
1267   2                      buf_display[0][3] = 0;
1268   2                      display();
1269   2                      set_await_number_table(0);
1270   2              }
1271   1      }
1272          
1273          void fun71(void) //F2_E2 °ÙÎ»ÉÁË¸
1274          {
1275   1              if (return_await_number_table() == 1)
1276   1              {
1277   2                      Show_four_number(Two_Menu_F2_E2);
1278   2                      set_await_number_table(2);
1279   2              }
1280   1              if (return_await_number_table() == 3)
1281   1              {
1282   2                      buf_display[0][2] = 0;
1283   2                      display();
1284   2                      set_await_number_table(0);
1285   2              }
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 22  

1286   1      }
1287          
1288          void fun72(void) //F2_E2 Ê®Î»ÉÁË¸
1289          {
1290   1              if (return_await_number_table() == 1)
1291   1              {
1292   2                      Show_four_number(Two_Menu_F2_E2);
1293   2                      set_await_number_table(2);
1294   2              }
1295   1              if (return_await_number_table() == 3)
1296   1              {
1297   2                      buf_display[0][1] = 0;
1298   2                      display();
1299   2                      set_await_number_table(0);
1300   2              }
1301   1      }
1302          
1303          void fun73(void) //F2_E2 ¸öÎ»ÉÁË¸
1304          {
1305   1              if (return_await_number_table() == 1)
1306   1              {
1307   2                      Show_four_number(Two_Menu_F2_E2);
1308   2                      set_await_number_table(2);
1309   2              }
1310   1              if (return_await_number_table() == 3)
1311   1              {
1312   2                      buf_display[0][0] = 0;
1313   2                      display();
1314   2                      set_await_number_table(0);
1315   2              }
1316   1      }
1317          
1318          void fun74(void) //F2_E3 Ç§Î»ÉÁË¸
1319          {
1320   1              if (return_await_number_table() == 1)
1321   1              {
1322   2                      Show_four_number(Two_Menu_F2_E3);
1323   2                      set_await_number_table(2);
1324   2              }
1325   1              if (return_await_number_table() == 3)
1326   1              {
1327   2                      buf_display[0][3] = 0;
1328   2                      display();
1329   2                      set_await_number_table(0);
1330   2              }
1331   1      }
1332          
1333          void fun75(void) //F2_E3 °ÙÎ»ÉÁË¸
1334          {
1335   1              if (return_await_number_table() == 1)
1336   1              {
1337   2                      Show_four_number(Two_Menu_F2_E3);
1338   2                      set_await_number_table(2);
1339   2              }
1340   1              if (return_await_number_table() == 3)
1341   1              {
1342   2                      buf_display[0][2] = 0;
1343   2                      display();
1344   2                      set_await_number_table(0);
1345   2              }
1346   1      }
1347          
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 23  

1348          void fun76(void) //F2_E3 Ê®Î»ÉÁË¸
1349          {
1350   1              if (return_await_number_table() == 1)
1351   1              {
1352   2                      Show_four_number(Two_Menu_F2_E3);
1353   2                      set_await_number_table(2);
1354   2              }
1355   1              if (return_await_number_table() == 3)
1356   1              {
1357   2                      buf_display[0][1] = 0;
1358   2                      display();
1359   2                      set_await_number_table(0);
1360   2              }
1361   1      }
1362          
1363          void fun77(void) //F2_E3 ¸öÎ»ÉÁË¸
1364          {
1365   1              if (return_await_number_table() == 1)
1366   1              {
1367   2                      Show_four_number(Two_Menu_F2_E3);
1368   2                      set_await_number_table(2);
1369   2              }
1370   1              if (return_await_number_table() == 3)
1371   1              {
1372   2                      buf_display[0][0] = 0;
1373   2                      display();
1374   2                      set_await_number_table(0);
1375   2              }
1376   1      }
1377          
1378          void fun78(void) //F2_E4 Ç§Î»ÉÁË¸
1379          {
1380   1              if (return_await_number_table() == 1)
1381   1              {
1382   2                      Show_four_number(Two_Menu_F2_E4);
1383   2                      set_await_number_table(2);
1384   2              }
1385   1              if (return_await_number_table() == 3)
1386   1              {
1387   2                      buf_display[0][3] = 0;
1388   2                      display();
1389   2                      set_await_number_table(0);
1390   2              }
1391   1      }
1392          
1393          void fun79(void) //F2_E4 °ÙÎ»ÉÁË¸
1394          {
1395   1              if (return_await_number_table() == 1)
1396   1              {
1397   2                      Show_four_number(Two_Menu_F2_E4);
1398   2                      set_await_number_table(2);
1399   2              }
1400   1              if (return_await_number_table() == 3)
1401   1              {
1402   2                      buf_display[0][2] = 0;
1403   2                      display();
1404   2                      set_await_number_table(0);
1405   2              }
1406   1      }
1407          
1408          void fun80(void) //F2_E4 Ê®Î»ÉÁË¸
1409          {
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 24  

1410   1              if (return_await_number_table() == 1)
1411   1              {
1412   2                      Show_four_number(Two_Menu_F2_E4);
1413   2                      set_await_number_table(2);
1414   2              }
1415   1              if (return_await_number_table() == 3)
1416   1              {
1417   2                      buf_display[0][1] = 0;
1418   2                      display();
1419   2                      set_await_number_table(0);
1420   2              }
1421   1      }
1422          
1423          void fun81(void) //F2_E4 ¸öÎ»ÉÁË¸
1424          {
1425   1              if (return_await_number_table() == 1)
1426   1              {
1427   2                      Show_four_number(Two_Menu_F2_E4);
1428   2                      set_await_number_table(2);
1429   2              }
1430   1              if (return_await_number_table() == 3)
1431   1              {
1432   2                      buf_display[0][0] = 0;
1433   2                      display();
1434   2                      set_await_number_table(0);
1435   2              }
1436   1      }
1437          
1438          void fun82(void) //ÏÔÊ¾¼´Ê±ÏÔÊ¾ »¹ÊÇÑ­»·ÏÔÊ¾
1439          {
1440   1              unsigned char temp=0;
1441   1              temp = return_Two_Menu_F3_E1();
1442   1              Show_one_number(temp);
1443   1      }
1444          
1445          void fun83(void) //¶ÓÁÐ´æ´¢¸öÊý
1446          {
1447   1              unsigned char temp = 0;
1448   1              temp = return_Two_Menu_F3_E2();
1449   1              Show_two_number(temp);
1450   1      }
1451          
1452          void fun84(void) //F6_E1ÓïÒôÑ¡Ôñ
1453          {
1454   1              unsigned char temp = 0;
1455   1              temp = return_Two_Menu_F6_E1();
1456   1              Show_one_number(temp);
1457   1      }
1458          
1459          void fun85(void) //F6_E2ÓïÒô±¨¶Á´ÎÊý
1460          {
1461   1              unsigned char temp = 0;
1462   1              temp = return_Two_Menu_F6_E2();
1463   1              Show_one_number(temp);
1464   1      }
1465          
1466          void fun86(void) //F6_E3Ñ­»·Ê±ºòÊÇ·ñ±¨¶Á
1467          {
1468   1              unsigned char temp = 0;
1469   1              temp = return_Two_Menu_F6_E3();
1470   1              Show_one_number(temp);
1471   1      }
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 25  

1472          
1473          void fun87(void) //F6_E4ÒôÁ¿´óÐ¡µ÷Õû
1474          {
1475   1              unsigned char temp = 0;
1476   1              temp = return_Two_Menu_F6_E4();
1477   1              GD5800_sound_volume(temp * 3);
1478   1              Show_one_number(temp);
1479   1      }
1480          
1481          void fun88(void) //F6_E5ÆÁÄ»ÁÁ¶Èµ÷Õû
1482          {
1483   1              unsigned char temp = 0;
1484   1              temp = return_Two_Menu_F6_E5();
1485   1              Show_one_number(temp);
1486   1      }
1487          
1488          void fun89(void) //F7_E1 999*9
1489          {
1490   1              unsigned char temp = 0;
1491   1              temp = return_Two_Menu_F7_E1();
1492   1              if (temp < 10)
1493   1              {
1494   2                      Show_one_number(temp);
1495   2              }
1496   1              else if (temp<11)
1497   1              {
1498   2                      Show_on();
1499   2              }
1500   1              else
1501   1              {
1502   2                      Show_off();
1503   2              }
1504   1      }
1505          
1506          void fun90(void) //F7_E2 9999*9
1507          {
1508   1              unsigned char temp = 0;
1509   1              temp = return_Two_Menu_F7_E2();
1510   1              Show_one_number(temp);
1511   1      }
1512          
1513          void fun91(void) //F7_E3 999*99
1514          {
1515   1              unsigned char temp = 0;
1516   1              temp = return_Two_Menu_F7_E3();
1517   1              Show_one_number(temp);
1518   1      }
1519          
1520          void fun92(void) //F7_E4 9999*99
1521          {
1522   1              unsigned char temp = 0;
1523   1              temp = return_Two_Menu_F7_E4();
1524   1              Show_one_number(temp);
1525   1      }
1526          
1527          void fun93(void) //F8_E1µ¥¼üÎ»¸ú¶à¼üÎ»ÇÐ»»
1528          {
1529   1              unsigned char temp = 0;
1530   1              temp = return_Two_Menu_F8_E1();
1531   1              Show_one_number(temp);
1532   1              if (temp != Two_Menu_F8_E1_save)
1533   1              {
C51 COMPILER V9.00   TM1629                                                                10/05/2015 17:39:48 PAGE 26  

1534   2                      Delete_all_data();
1535   2                      Two_Menu_F8_E1_save = temp;
1536   2              }
1537   1      }
1538          
1539          void fun94(void) //F8_E2¼üÎ»ÉèÖÃ
1540          {
1541   1              unsigned char temp = 0;
1542   1              temp = return_Two_Menu_F8_E2();
1543   1              Show_two_number(temp);
1544   1              if (return_sound_table() == 1)
1545   1              {
1546   2                      delay10ms();
1547   2                      GD5800_stop_music();
1548   2                      delay10ms();
1549   2                      GD5800_select_chapter(temp + QUXIAO);
1550   2                      delay10ms();
1551   2                      //GD5800_play_music();
1552   2                      set_sound_table(0);
1553   2              }
1554   1      }
1555          
1556          void fun95(void) //½âÂë²Ëµ¥
1557          {
1558   1              tm1629_load();
1559   1              display();;
1560   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   5529    ----
   CONSTANT SIZE    =     24    ----
   XDATA SIZE       =    353      65
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
