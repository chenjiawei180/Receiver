C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE TM1629
OBJECT MODULE PLACED IN tm1629.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Receiver\tm1629.c LARGE BROWSE INCDIR(.\Receiver) DEBUG OBJECTEXTEND PRINT(
                    -.\tm1629.lst) OBJECT(tm1629.obj)

line level    source

   1          #include "tm1629.h"
   2          #include "timer.h"
   3          #include "usart.h"
   4          #include "ds1302.h"
   5          #include "key.h"
   6          #include "menu.h"
   7          #include "gd5800.h"
   8          #include "at24c256.h"
   9          #include "ev1527.h"
  10          #include "decoder.h"
  11          
  12          unsigned char const CODE[] = { 0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07, 0x7F, 0x6F, 0x77, 0x7C, 0x3
             -9, 0x5E, 0x79, 0x71, 0x76, 0x38, 0x5c, 0x73, 0x3e };//0-9 abcdef ÏÔÊ¾Æ÷ÂëÊý×é
  13          unsigned char const INIT_CODE[] = { 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80 };//Öð¶ÎµãÁÁÊýÂë¹ÜÊý×é
  14          unsigned char const SHANGSHUO[] = { 0x40, 0x00 }; // µãÁÁÊýÂë¹ÜÖÐ¼ä¶ÎÒÔ¼°Ãð
  15          unsigned char buf_display[6][8] = { 0 }; //3¸öTM1629ÏÔ´æÊý×é
  16          unsigned char display_ram[240] = { 0 }; //³ÌÐòÔËÐÐÊ±¼ÇÂ¼ÏÔÊ¾Êý¾ÝµÄÄÚ´æ 
  17          unsigned char await_time_table= 0 ;//ÓÃÓÚ¼ÇÂ¼´ý»úÏÔÊ¾ºá¸ÜÊýÂë¹Ü´ÎÊý 
  18          unsigned char Two_Menu_F8_E1_save =0;
  19          
  20          unsigned char single_key[16]   = { 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
             - 0x01, 0x01, 0x01, 0x01 };//µ¥¼üÎ»ÉèÖÃ´æ´¢Êý×é
  21          unsigned char multiple_key[16] = { 0x01, QUXIAO-QUXIAO, JIEZHANG-QUXIAO, 0x01, JIUSHUI-QUXIAO, 0X01, 0x01,
             - 0x01, HUJIAO - QUXIAO, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01 };//¶à¼üÎ»ÉèÖÃ´æ´¢Êý×é
  22          
  23          void writeDataTo1629(unsigned char p) //Ð´Êý¾Ý¸øµÚÒ»¸öTM1629
  24          {
  25   1              unsigned int i;
  26   1              TM1629_STB = 0;
  27   1              for (i = 0; i<8; i++)
  28   1              {
  29   2                      TM1629_CLK = 0;
  30   2                      if (p & 0x01)
  31   2                              TM1629_DIO = 1;
  32   2                      else
  33   2                              TM1629_DIO = 0;
  34   2                      _nop_();
  35   2                      _nop_();
  36   2                      _nop_();
  37   2                      _nop_();
  38   2                      TM1629_CLK = 1;
  39   2                      p = p >> 1;
  40   2              }
  41   1              TM1629_CLK = 0;
  42   1              TM1629_DIO = 0;
  43   1      }
  44          
  45          void writeDataTo1629_2(unsigned char p) //Ð´Êý¾Ý¸øµÚ¶þ¸öTM1629
  46          {
  47   1              unsigned int i;
  48   1              TM1629_STB2 = 0;
  49   1              for (i = 0; i<8; i++)
  50   1              {
  51   2                      TM1629_CLK = 0;
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 2   

  52   2                      if (p & 0x01)
  53   2                              TM1629_DIO = 1;
  54   2                      else
  55   2                              TM1629_DIO = 0;
  56   2                      _nop_();
  57   2                      _nop_();
  58   2                      _nop_();
  59   2                      _nop_();
  60   2                      TM1629_CLK = 1;
  61   2                      p = p >> 1;
  62   2              }
  63   1              TM1629_CLK = 0;
  64   1              TM1629_DIO = 0;
  65   1      }
  66          
  67          void writeDataTo1629_3(unsigned char p) //Ð´Êý¾Ý¸øµÚÈý¸öTM1629
  68          {
  69   1              unsigned int i;
  70   1              TM1629_STB3 = 0;
  71   1              for (i = 0; i<8; i++)
  72   1              {
  73   2                      TM1629_CLK = 0;
  74   2                      if (p & 0x01)
  75   2                              TM1629_DIO = 1;
  76   2                      else
  77   2                              TM1629_DIO = 0;
  78   2                      _nop_();
  79   2                      _nop_();
  80   2                      _nop_();
  81   2                      _nop_();
  82   2                      TM1629_CLK = 1;
  83   2                      p = p >> 1;
  84   2              }
  85   1              TM1629_CLK = 0;
  86   1              TM1629_DIO = 0;
  87   1      }
  88          
  89          void send_command(unsigned char word) //Ð´ÃüÁî¸øµÚÒ»¸öTM1629
  90          {
  91   1              TM1629_STB = 1;
  92   1              nop;
  93   1              TM1629_STB = 0;
  94   1              writeDataTo1629(word);
  95   1      }
  96          
  97          void send_command_2(unsigned char word) //Ð´ÃüÁî¸øµÚ¶þ¸öTM1629
  98          {
  99   1              TM1629_STB2 = 1;
 100   1              nop;
 101   1              TM1629_STB2 = 0;
 102   1              writeDataTo1629_2(word);
 103   1      }
 104          
 105          void send_command_3(unsigned char word) //Ð´ÃüÁî¸øµÚÈý¸öTM1629
 106          {
 107   1              TM1629_STB3 = 1;
 108   1              nop;
 109   1              TM1629_STB3 = 0;
 110   1              writeDataTo1629_3(word);
 111   1      }
 112          
 113          void display(void) //3¸öTM1629ÏÔÊ¾º¯Êý
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 3   

 114          {
 115   1              unsigned char i,temp;
 116   1              temp = return_Two_Menu_F6_E5();
 117   1              send_command(0x40);     //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 118   1              send_command(0xc0);     //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 119   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 120   1              {
 121   2                      writeDataTo1629(buf_display[0][i]);
 122   2                      writeDataTo1629(buf_display[1][i]);
 123   2              }
 124   1              send_command(0x88 + temp);      //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 125   1              TM1629_STB = 1;
 126   1      
 127   1              send_command_2(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 128   1              send_command_2(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 129   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 130   1              {
 131   2                      writeDataTo1629_2(buf_display[2][i]);
 132   2                      writeDataTo1629_2(buf_display[3][i]);
 133   2              }
 134   1              send_command_2(0x88 + temp);    //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 135   1              TM1629_STB2 = 1;
 136   1      
 137   1              send_command_3(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 138   1              send_command_3(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 139   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 140   1              {
 141   2                      writeDataTo1629_3(buf_display[4][i]);
 142   2                      writeDataTo1629_3(buf_display[5][i]);
 143   2              }
 144   1              send_command_3(0x88 + temp);    //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 145   1              TM1629_STB3 = 1;
 146   1      }
 147          
 148          
 149          void tm1629_init(void) //TM1629¿ª»ú³õÊ¼»¯º¯Êý
 150          {
 151   1              unsigned char i, j, k;          //k¿ØÖÆÏÔÊ¾µÄ¾ßÌåÊý×Ö£¬iºÍj¿ØÖÆbuf_displayµÄË¢ÐÂ
 152   1              for (k = 0; k<8; k++)
 153   1              {
 154   2                      for (i = 0; i<6; i++)
 155   2                      {
 156   3                              for (j = 0; j<8; j++)
 157   3                              {
 158   4                                      buf_display[i][j] = INIT_CODE[k];
 159   4                              }
 160   3                      }
 161   2                      display();
 162   2                      Tm1629_delay(30);
 163   2              }
 164   1      }
 165          
 166          
 167          void Tm1629_delay(unsigned char k) //ÑÓÊ±º¯Êý
 168          {
 169   1              unsigned char i, j;
 170   1              for (; k>0; k--)
 171   1              {
 172   2                      for (i = 255; i>0; i--)
 173   2                      {
 174   3                              for (j = 255; j>0; j--)
 175   3                              {
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 4   

 176   4                                      ;
 177   4      
 178   4                              }
 179   3                      }
 180   2              }
 181   1      }
 182          
 183          void tm1629_clear(void)//È«²¿¹éÁã
 184          {
 185   1              unsigned char i, j;
 186   1              for (i = 0; i<6; i++)
 187   1              {
 188   2                      for (j = 0; j<8; j++)
 189   2                      {
 190   3                              buf_display[i][j] = 0x00;
 191   3                      }
 192   2              }
 193   1      }
 194          
 195          void tm1629_display_buff_clear(void)//Çå³ý¶ÓÁÐ»º´æ
 196          {
 197   1              unsigned char i;
 198   1              for (i = 0; i<120; i++)
 199   1                      display_ram[i] = 0;
 200   1      }
 201          
 202          void tm1629_await(void)
 203          {
 204   1              unsigned char i;        //k¿ØÖÆÏÔÊ¾µÄ¾ßÌåÊý×Ö£¬iºÍj¿ØÖÆbuf_displayµÄË¢ÐÂ
 205   1              unsigned char await_number_table_temp = 0;
 206   1              await_number_table_temp = return_await_number_table();
 207   1              if (await_number_table_temp == 1)
 208   1              {
 209   2                      //GD5800_select_chapter(0x0008) ;
 210   2                      tm1629_clear();
 211   2                      i = await_time_table & 0x03;
 212   2                      buf_display[0][i] = 0x40;
 213   2                      display();
 214   2                      set_await_number_table(0);
 215   2                      await_time_table++;
 216   2                      if (await_time_table == 4)
 217   2                              await_time_table = 0;
 218   2              }
 219   1      }
 220          
 221          void Display_time(void)
 222          {
 223   1              tm1629_clear();
 224   1              Ds1302_Read_Time(); 
 225   1              buf_display[1][7] = CODE[2];                            //Äê
 226   1              buf_display[1][6] = CODE[0];
 227   1              buf_display[1][5] = CODE[time_buf1[1] / 10];
 228   1              buf_display[1][4] = CODE[time_buf1[1] % 10];
 229   1      
 230   1              buf_display[1][3] = 0x40;                                        // -
 231   1              
 232   1              buf_display[1][2] = CODE[time_buf1[2] / 10]; //ÔÂ
 233   1              buf_display[1][1] = CODE[time_buf1[2] % 10];
 234   1      
 235   1              buf_display[1][0] = 0x40;                                        // -
 236   1      
 237   1              buf_display[0][7] = CODE[time_buf1[3] / 10];
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 5   

 238   1              buf_display[0][6] = CODE[time_buf1[3] % 10];//ÈÕ
 239   1      
 240   1              buf_display[0][5] = CODE[time_buf1[7]];         //ÐÇÆÚ
 241   1      
 242   1              buf_display[0][3] = CODE[time_buf1[4] / 10]; //Ð¡Ê±
 243   1              buf_display[0][2] = CODE[time_buf1[4] % 10];
 244   1              buf_display[0][1] = CODE[time_buf1[5] / 10]; //Ð¡Ê±
 245   1              buf_display[0][0] = CODE[time_buf1[5] % 10];
 246   1      
 247   1              display();
 248   1      
 249   1      }
 250          
 251          void tm1629_f(unsigned char f_number) //µÚÒ»ÐÐµ¹Êý¶þ¸öÏÔÊ¾F,µ¹ÊýµÚÒ»¸öÏÔÊ¾f_number
 252          {
 253   1              tm1629_clear();
 254   1              buf_display[0][1] = CODE[0x0f];
 255   1              buf_display[0][0] = CODE[f_number];
 256   1              display();
 257   1      }
 258          
 259          void tm1629_E(unsigned char f_number) //µÚÒ»ÐÐµ¹Êý¶þ¸öÏÔÊ¾F,µ¹ÊýµÚÒ»¸öÏÔÊ¾f_number
 260          {
 261   1              tm1629_clear();
 262   1              buf_display[0][1] = CODE[0x0E];
 263   1              buf_display[0][0] = CODE[f_number];
 264   1              display();
 265   1      }
 266          void Show_on(void)
 267          {
 268   1              tm1629_clear();
 269   1              buf_display[0][1] = CODE[0];
 270   1              buf_display[0][0] = 0x37;
 271   1              display();
 272   1      }
 273          
 274          void Show_off(void)
 275          {
 276   1              tm1629_clear();
 277   1              buf_display[0][1] = CODE[0x00];
 278   1              buf_display[0][0] = CODE[0x0f];
 279   1              display();
 280   1      }
 281          
 282          void Show_one_number(unsigned char f_number) //ÏÔÊ¾Ò»¸öÊý×Ö
 283          {
 284   1              tm1629_clear();
 285   1              //buf_display[0][1] = CODE[0x0E];
 286   1              buf_display[0][0] = CODE[f_number];
 287   1              display();
 288   1      }
 289          
 290          void Show_two_number(unsigned char f_number) //ÏÔÊ¾Á½¸öÊý×Ö
 291          {
 292   1              tm1629_clear();
 293   1              buf_display[0][1] = CODE[f_number / 10];
 294   1              buf_display[0][0] = CODE[f_number % 10];
 295   1              display();
 296   1      }
 297          
 298          
 299          void Show_three_number(unsigned int f_number) //ÏÔÊ¾Èý¸öÊý×Ö
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 6   

 300          {
 301   1              tm1629_clear();
 302   1              buf_display[0][2] = CODE[f_number / 100];
 303   1              buf_display[0][1] = CODE[(f_number / 10) %10];
 304   1              buf_display[0][0] = CODE[f_number % 10];
 305   1              display();
 306   1      }
 307          
 308          void Show_four_number(unsigned char* temp)
 309          {
 310   1              tm1629_clear();
 311   1              buf_display[0][3] = CODE[*(temp)];
 312   1              buf_display[0][2] = CODE[*(temp+1)];
 313   1              buf_display[0][1] = CODE[*(temp+2)];
 314   1              buf_display[0][0] = CODE[*(temp+3)];
 315   1              display();
 316   1      }
 317          
 318          void tm1629_load(void)
 319          {
 320   1              tm1629_clear();
 321   1              if (*(display_ram + 66) != 0)
 322   1                      mcuram_to_displayram(buf_display[5] + 7, display_ram + 66);
 323   1              if (*(display_ram + 60) != 0)
 324   1                      mcuram_to_displayram(buf_display[5] + 3, display_ram + 60);
 325   1              if (*(display_ram + 54) != 0)
 326   1                      mcuram_to_displayram(buf_display[4] + 7, display_ram + 54);
 327   1              if (*(display_ram + 48) != 0)
 328   1                      mcuram_to_displayram(buf_display[4] + 3, display_ram + 48);
 329   1              if (*(display_ram + 42) != 0)
 330   1                      mcuram_to_displayram(buf_display[3] + 7, display_ram + 42);
 331   1              if (*(display_ram + 36) != 0)
 332   1                      mcuram_to_displayram(buf_display[3] + 3, display_ram + 36);
 333   1              if (*(display_ram + 30) != 0)
 334   1                      mcuram_to_displayram(buf_display[2] + 7, display_ram + 30);
 335   1              if (*(display_ram + 24) != 0)
 336   1                      mcuram_to_displayram(buf_display[2] + 3, display_ram + 24);
 337   1              if (*(display_ram + 18) != 0)
 338   1                      mcuram_to_displayram(buf_display[1] + 7, display_ram + 18);
 339   1              if (*(display_ram + 12) != 0)
 340   1                      mcuram_to_displayram(buf_display[1] + 3, display_ram + 12);
 341   1              if (*(display_ram + 6) != 0)
 342   1                      mcuram_to_displayram(buf_display[0] + 7, display_ram + 6);
 343   1              if (*(display_ram + 0) != 0)
 344   1                      mcuram_to_displayram(buf_display[0] + 3, display_ram);
 345   1      }
 346          
 347          void mcuram_to_displayram(unsigned char a[48], unsigned char* b)  //´ÓRAMÇøÓòÒÆµ½ÏÔ´æÇøÓò,Ë³´ø·­Òë³ÉÊýÂë¹Ü
             -ÏÔÊ¾µÄÂë
 348          {
 349   1              /*
 350   1              A// Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 351   1              B// Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 352   1              */
 353   1              *(a) = CODE[*(b + 1)];
 354   1              *(a - 1) = CODE[*(b + 2)];
 355   1              *(a - 2) = CODE[*(b + 3)];
 356   1              *(a - 3) = CODE[*(b + 4)];
 357   1      }
 358          
 359          void decoder_temp_to_mcuram(unsigned char* a, unsigned char* index)//aÎªMCU»º´æÇø   indexÎª½âÂëºóÈ¡³öµÄ8×Ö
             -½ÚÁÙÊ±Êý×é
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 7   

 360          {
 361   1              *(a + 0) = *(index);
 362   1              *(a + 1) = *(index + 1);
 363   1              *(a + 2) = *(index + 2);
 364   1              *(a + 3) = *(index + 3);
 365   1              *(a + 4) = *(index + 4);
 366   1              *(a + 5) = *(index + 7);//±£´æ°´¼üµÄ¼üÖµ
 367   1      }
 368          
 369          void mcuram_to_mcuram_down(unsigned char* a) //aÎªMCURAM»º´æÇøÇø   ÏòÏÂÑ¹Ò»×éÊý¾Ý
 370          {
 371   1              *(a + 6) = *(a);                //ramÇøÔªËØÏÂÒÆ6¸ö
 372   1              *(a + 7) = *(a + 1);
 373   1              *(a + 8) = *(a + 2);
 374   1              *(a + 9) = *(a + 3);
 375   1              *(a + 10) = *(a + 4);
 376   1              *(a + 11) = *(a + 5);
 377   1      
 378   1      }
 379          
 380          void mcuram_to_mcuram_up(unsigned char* a) //aÎªMCURAM»º´æÇøÇø   ÏòÉÏÑ¹Ò»×éÊý¾Ý
 381          {
 382   1              *(a) = *(a + 6);   //ramÇøÔªËØÉÏÒÆ6¸ö
 383   1              *(a + 1) = *(a + 7);
 384   1              *(a + 2) = *(a + 8);
 385   1              *(a + 3) = *(a + 9);
 386   1              *(a + 4) = *(a + 10);
 387   1              *(a + 5) = *(a + 11);
 388   1      }
 389          
 390          void CycleProcess(void)
 391          {
 392   1              unsigned char i, index;
 393   1              unsigned char f5_xunhuan, f4_xiaohao, logout_cycle_table_temp;
 394   1              unsigned char temp[6] = { 0 };
 395   1              unsigned char Two_Menu_F6_E3_temp = 0;
 396   1              unsigned char Two_Menu_F6_E1_temp = 0;
 397   1      
 398   1              Two_Menu_F6_E3_temp = return_Two_Menu_F6_E3();
 399   1              Two_Menu_F6_E1_temp = return_Two_Menu_F6_E1();
 400   1      
 401   1              f5_xunhuan = return_Two_Menu_F5_E1();
 402   1              f4_xiaohao = return_Two_Menu_F4_E1();
 403   1              logout_cycle_table_temp = return_logout_cycle_table();
 404   1              /*Ñ­»·´¦Àíº¯Êý*/
 405   1              if ((f5_xunhuan<f4_xiaohao && logout_cycle_table_temp>f5_xunhuan && f4_xiaohao && f5_xunhuan) || (f4_xiao
             -hao == 0 && f5_xunhuan &&logout_cycle_table_temp>f5_xunhuan))
 406   1              {
 407   2                      for (i = 0; i<10; i++)
 408   2                      {
 409   3                              if (display_ram[i * 6 ] == 0)
 410   3                              {
 411   4                                      index = i;
 412   4                                      break;
 413   4                              }
 414   3                      }
 415   2      
 416   2                      for (i = 0; i<6; i++)
 417   2                      {
 418   3                              temp[i] = display_ram[(index - 1) * 6 + i];
 419   3                      }
 420   2      
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 8   

 421   2                      for (i = index; i>1; i--)
 422   2                      {
 423   3                              mcuram_to_mcuram_down(display_ram + (i - 2) * 6);
 424   3                      }
 425   2                      for (i = 0; i<6; i++)
 426   2                      {
 427   3                              display_ram[i] = temp[i];
 428   3                      }
 429   2                      tm1629_load();
 430   2                      display();
 431   2                      set_logout_cycle_table(0);
 432   2                      if (Two_Menu_F6_E3_temp == 1)
 433   2                      {
 434   3                                      submenuf6_1(Two_Menu_F6_E1_temp, display_ram, display_ram[0], display_ram[5] & 0x0f);
 435   3                      }
 436   2              }
 437   1      }
 438          
 439          void LogoutProcess(void)
 440          {
 441   1              unsigned char i;
 442   1              unsigned char f5_xunhuan, f4_xiaohao, logout_cycle_table_temp, Two_Menu_F3_E2_temp, Two_Menu_F3_E1_temp;
 443   1              unsigned char Two_Menu_F6_E1_temp = 0;
 444   1              unsigned char Two_Menu_F6_E2_temp = 0;
 445   1      
 446   1              f5_xunhuan = return_Two_Menu_F5_E1();
 447   1              f4_xiaohao = return_Two_Menu_F4_E1();
 448   1              logout_cycle_table_temp = return_logout_cycle_table();
 449   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 450   1              Two_Menu_F3_E1_temp = return_Two_Menu_F3_E1();
 451   1              Two_Menu_F6_E2_temp = return_Two_Menu_F6_E2();
 452   1              /*ÏúºÅ´¦Àíº¯Êý*/
 453   1              if ((f4_xiaohao<f5_xunhuan&& logout_cycle_table_temp>f4_xiaohao && f5_xunhuan && f4_xiaohao) || (f5_xunhu
             -an == 0 && f4_xiaohao && logout_cycle_table_temp>f4_xiaohao))
 454   1              {
 455   2                      for (i = 0; i<(Two_Menu_F3_E2_temp - 1); i++)
 456   2                      {
 457   3                              mcuram_to_mcuram_up(display_ram + i * 6);
 458   3                      }
 459   2                      for (i = (Two_Menu_F3_E2_temp - 1) * 6; i<Two_Menu_F3_E2_temp * 6; i++)
 460   2                      {
 461   3                              display_ram[i] = 0;
 462   3                      }
 463   2                      tm1629_load();
 464   2                      display();
 465   2                      set_logout_cycle_table(0);
 466   2                      if (display_ram[0] == 0)
 467   2                      {
 468   3                              set_func_index(MENU_STANDBY);
 469   3                      }
 470   2                      else if (Two_Menu_F3_E1_temp == 2)
 471   2                      {
 472   3                              for (i = 0; i < Two_Menu_F6_E2_temp; i++)
 473   3                              {
 474   4                                      submenuf6_1(Two_Menu_F6_E1_temp, display_ram, display_ram[0], display_ram[5] & 0x0f);
 475   4                              }
 476   3                      }
 477   2              }
 478   1      }
 479          
 480          
 481          
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 9   

 482          
 483          
 484          void Logout(void)
 485          {
 486   1              unsigned char i;
 487   1              unsigned char Two_Menu_F3_E2_temp= 0;
 488   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 489   1              /*ÏúºÅ´¦Àíº¯Êý*/
 490   1              for (i = 0; i<(Two_Menu_F3_E2_temp - 1); i++)
 491   1              {
 492   2                      mcuram_to_mcuram_up(display_ram + i * 6);
 493   2              }
 494   1              for (i = (Two_Menu_F3_E2_temp - 1) * 6; i<Two_Menu_F3_E2_temp * 6; i++)
 495   1              {
 496   2                      display_ram[i] = 0;
 497   2              }
 498   1              tm1629_load();
 499   1              display();
 500   1              if (display_ram[0] == 0)
 501   1              {
 502   2                      set_func_index(MENU_STANDBY);
 503   2              }
 504   1      }
 505          
 506          void CycleUp(void)
 507          {
 508   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 509   1              unsigned char temp[6] = { 0 };
 510   1              index = return_Two_Menu_F3_E2();
 511   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 512   1              /*Ñ­»·´¦Àíº¯Êý*/
 513   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 514   1              {
 515   2                      if (display_ram[i * 6 ] == 0)
 516   2                      {
 517   3                              index = i;
 518   3                              break;
 519   3                      }
 520   2              }
 521   1              for (i = 0; i<6; i++)
 522   1              {
 523   2                      temp[i] = display_ram[i];
 524   2              }
 525   1              for (i = 0; i<index; i++)
 526   1              {
 527   2                      mcuram_to_mcuram_up(display_ram + i * 6);
 528   2              }
 529   1              for (i = 0; i<6; i++)
 530   1              {
 531   2                      display_ram[(index - 1) * 6 + i] = temp[i];
 532   2              }
 533   1              tm1629_load();
 534   1              display();
 535   1      }
 536          
 537          void CycleDown(void)
 538          {
 539   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 540   1              unsigned char temp[6] = { 0 };
 541   1              index = return_Two_Menu_F3_E2();
 542   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 543   1              /*Ñ­»·´¦Àíº¯Êý*/
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 10  

 544   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 545   1              {
 546   2                      if (display_ram[i * 6 ] == 0)
 547   2                      {
 548   3                              index = i;
 549   3                              break;
 550   3                      }
 551   2              }
 552   1      
 553   1              for (i = 0; i<6; i++)
 554   1              {
 555   2                      temp[i] = display_ram[(index - 1) * 6 + i];
 556   2              }
 557   1      
 558   1              for (i = index; i>1; i--)
 559   1              {
 560   2                      mcuram_to_mcuram_down(display_ram + (i - 2) * 6);
 561   2              }
 562   1              for (i = 0; i<6; i++)
 563   1              {
 564   2                      display_ram[i] = temp[i];
 565   2              }
 566   1              tm1629_load();
 567   1              display();
 568   1      }
 569          
 570          void Cancel_funtion(unsigned char* id_number, unsigned char* buff)//id_numberÎª½âÂëµÄtempÊý×é£¬buffÎªÏÔÊ¾»
             -º´æ
 571          {
 572   1              /*
 573   1              id_number  //  ÐòºÅ¡¢½ÓÊÕºÅ*3¡¢ID*3¡¢ÇøºÅ
 574   1              buff    //                ÐòºÅ¡¢Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 575   1              */
 576   1      
 577   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 578   1              unsigned char temp[6] = { 0 };
 579   1              index = return_Two_Menu_F3_E2();
 580   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 581   1      
 582   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 583   1              {
 584   2                      if (*(id_number + 1) == *(buff + i * 6 + 1) && *(id_number + 2) == *(buff + i * 6 + 2) && *(id_number + 
             -3) == *(buff + i * 6 + 3) && *(id_number + 4) == *(buff + i * 6 + 4))
 585   2                      {
 586   3                              index = i;
 587   3                              break;
 588   3                      }
 589   2              }
 590   1              if (index == 0)
 591   1              {
 592   2                      GD5800_stop_music();
 593   2              }
 594   1              for (i = index; i<Two_Menu_F3_E2_temp; i++)
 595   1              {
 596   2                      mcuram_to_mcuram_up(buff + i * 6);
 597   2              }
 598   1              if (index != Two_Menu_F3_E2_temp)
 599   1              {
 600   2                      for (i = 0; i<6; i++)
 601   2                      {
 602   3                              *(buff + (Two_Menu_F3_E2_temp - 1) * 6 + i) = 0;
 603   3                      }
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 11  

 604   2              }
 605   1              if (*(buff) == 0)
 606   1              {
 607   2                      set_func_index(MENU_STANDBY);
 608   2              }
 609   1      }
 610          
 611          
 612          void fun0(void) //´ý»úÏÔÊ¾º¯Êý
 613          {
 614   1              unsigned char temp = 0;
 615   1              temp = return_Two_Menu_FC_E1();
 616   1              if (temp == 1)
 617   1              {
 618   2                      tm1629_await();
 619   2              }
 620   1              else
 621   1              {
 622   2                      Display_time();
 623   2              }
 624   1              tm1629_display_buff_clear();
 625   1      }
 626          
 627          void fun1(void) //Ò»¼¶²Ëµ¥F0
 628          {
 629   1              tm1629_f(0x00);
 630   1      }
 631          
 632          void fun2(void) //Ò»¼¶²Ëµ¥F1
 633          {
 634   1              tm1629_f(0x01);
 635   1      }
 636          
 637          void fun3(void) //Ò»¼¶²Ëµ¥F2
 638          {
 639   1              tm1629_f(0x02);
 640   1      }
 641          
 642          void fun4(void) //Ò»¼¶²Ëµ¥F3
 643          {
 644   1              tm1629_f(0x03);
 645   1      }
 646          
 647          void fun5(void) //Ò»¼¶²Ëµ¥F4
 648          {
 649   1              tm1629_f(0x04);
 650   1      }
 651          
 652          void fun6(void) //Ò»¼¶²Ëµ¥F5
 653          {
 654   1              tm1629_f(0x05);
 655   1      }
 656          
 657          void fun7(void) //Ò»¼¶²Ëµ¥F6
 658          {
 659   1              tm1629_f(0x06);
 660   1      }
 661          
 662          void fun8(void) //Ò»¼¶²Ëµ¥F7
 663          {
 664   1              tm1629_f(0x07);
 665   1      }
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 12  

 666          
 667          void fun9(void) //Ò»¼¶²Ëµ¥F8
 668          {
 669   1              tm1629_f(0x08);
 670   1      }
 671          
 672          void fun10(void) //Ò»¼¶²Ëµ¥F9
 673          {
 674   1              tm1629_f(0x09);
 675   1      }
 676          
 677          void fun11(void) //Ò»¼¶²Ëµ¥FA
 678          {
 679   1              tm1629_f(0x0a);
 680   1      }
 681          
 682          void fun12(void) //Ò»¼¶²Ëµ¥Fb
 683          {
 684   1              tm1629_f(0x0b);
 685   1      }
 686          
 687          void fun13(void) //Ò»¼¶²Ëµ¥FC
 688          {
 689   1              tm1629_f(0x0c);
 690   1      }
 691          
 692          void fun14(void) //Ò»¼¶²Ëµ¥Fd
 693          {
 694   1              tm1629_f(0x0d);
 695   1      }
 696          
 697          void fun15(void) //ÉèÖÃÄê·Ý
 698          {
 699   1              unsigned char temp;
 700   1              temp = return_Two_Menu_FC_E1();
 701   1              if (temp == 1)//Èç¹ûÎª----  Ôò²»ÈÃ½øÈëF0
 702   1              {
 703   2                      set_func_index(ONE_MENU_F0);
 704   2              }
 705   1              else
 706   1              {
 707   2                      if (return_await_number_table() == 1)
 708   2                      {
 709   3                              Display_time();
 710   3                              set_await_number_table(2);
 711   3                      }
 712   2                      if (return_await_number_table() == 3)
 713   2                      {
 714   3                              buf_display[1][7] = 0;
 715   3                              buf_display[1][6] = 0;
 716   3                              buf_display[1][5] = 0;
 717   3                              buf_display[1][4] = 0;
 718   3                              display();
 719   3                              set_await_number_table(0);
 720   3                      }
 721   2                      Ds1302_Write_Time();
 722   2              }
 723   1      }
 724          
 725          void fun16(void) //ÉèÖÃÔÂ·Ý
 726          {
 727   1              if (return_await_number_table() == 1)
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 13  

 728   1              {
 729   2                      Display_time();
 730   2                      set_await_number_table(2);
 731   2              }
 732   1              if (return_await_number_table() == 3)
 733   1              {
 734   2                      buf_display[1][2] = 0;
 735   2                      buf_display[1][1] = 0;
 736   2                      display();
 737   2                      set_await_number_table(0);
 738   2              }
 739   1              Ds1302_Write_Time();
 740   1      }
 741          
 742          void fun17(void) //ÉèÖÃÈÕÆÚ
 743          {
 744   1              if (return_await_number_table() == 1)
 745   1              {
 746   2                      Display_time();
 747   2                      set_await_number_table(2);
 748   2              }
 749   1              if (return_await_number_table() == 3)
 750   1              {
 751   2                      buf_display[0][7] = 0;
 752   2                      buf_display[0][6] = 0;
 753   2                      display();
 754   2                      set_await_number_table(0);
 755   2              }
 756   1              Ds1302_Write_Time();
 757   1      }
 758          
 759          void fun18(void) //ÉèÖÃÐÇÆÚ
 760          {
 761   1              if (return_await_number_table() == 1)
 762   1              {
 763   2                      Display_time();
 764   2                      set_await_number_table(2);
 765   2              }
 766   1              if (return_await_number_table() == 3)
 767   1              {
 768   2                      buf_display[0][5] = 0;
 769   2                      display();
 770   2                      set_await_number_table(0);
 771   2              }
 772   1              Ds1302_Write_Time();
 773   1      }
 774          
 775          void fun19(void) //ÉèÖÃÐ¡Ê±
 776          {
 777   1              if (return_await_number_table() == 1)
 778   1              {
 779   2                      Display_time();
 780   2                      set_await_number_table(2);
 781   2              }
 782   1              if (return_await_number_table() == 3)
 783   1              {
 784   2                      buf_display[0][3] = 0;
 785   2                      buf_display[0][2] = 0;
 786   2                      display();
 787   2                      set_await_number_table(0);
 788   2              }
 789   1              Ds1302_Write_Time();
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 14  

 790   1      }
 791          
 792          void fun20(void) //ÉèÖÃ·ÖÖÓ
 793          {
 794   1              if (return_await_number_table() == 1)
 795   1              {
 796   2                      Display_time();
 797   2                      set_await_number_table(2);
 798   2              }
 799   1              if (return_await_number_table() == 3)
 800   1              {
 801   2                      buf_display[0][1] = 0;
 802   2                      buf_display[0][0] = 0;
 803   2                      display();
 804   2                      set_await_number_table(0);
 805   2              }
 806   1              Ds1302_Write_Time();
 807   1      }
 808          
 809          void fun21(void) //¶þ¼¶²Ëµ¥F1-E1
 810          {
 811   1              tm1629_E(0x01);
 812   1              Two_Menu_F1_E1[0] = 0;
 813   1              Two_Menu_F1_E1[1] = 0;
 814   1              Two_Menu_F1_E1[2] = 0;
 815   1              Two_Menu_F1_E1[3] = 1;
 816   1      }
 817          
 818          void fun22(void) //¶þ¼¶²Ëµ¥F1-E2
 819          {
 820   1              tm1629_E(0x02);
 821   1              Two_Menu_F1_E2[0] = 0;
 822   1              Two_Menu_F1_E2[1] = 0;
 823   1              Two_Menu_F1_E2[2] = 0;
 824   1              Two_Menu_F1_E2[3] = 1;
 825   1      }
 826          
 827          void fun23(void) //¶þ¼¶²Ëµ¥F1-E3
 828          {
 829   1              tm1629_E(0x03);
 830   1              Two_Menu_F1_E3[0] = 0;
 831   1              Two_Menu_F1_E3[1] = 0;
 832   1              Two_Menu_F1_E3[2] = 0;
 833   1              Two_Menu_F1_E3[3] = 1;
 834   1      }
 835          
 836          void fun24(void) //¶þ¼¶²Ëµ¥F1-E4
 837          {
 838   1              tm1629_E(0x04);
 839   1              Two_Menu_F1_E4[0] = 0;
 840   1              Two_Menu_F1_E4[1] = 0;
 841   1              Two_Menu_F1_E4[2] = 0;
 842   1              Two_Menu_F1_E4[3] = 1;
 843   1      }
 844          
 845          void fun25(void) //¶þ¼¶²Ëµ¥F2-E1
 846          {
 847   1              tm1629_E(0x01);
 848   1              Two_Menu_F2_E1[0] = 0;
 849   1              Two_Menu_F2_E1[1] = 0;
 850   1              Two_Menu_F2_E1[2] = 0;
 851   1              Two_Menu_F2_E1[3] = 1;
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 15  

 852   1      }
 853          
 854          void fun26(void) //¶þ¼¶²Ëµ¥F2-E2
 855          {
 856   1              tm1629_E(0x02);
 857   1              Two_Menu_F2_E2[0] = 0;
 858   1              Two_Menu_F2_E2[1] = 0;
 859   1              Two_Menu_F2_E2[2] = 0;
 860   1              Two_Menu_F2_E2[3] = 1;
 861   1      }
 862          
 863          void fun27(void) //¶þ¼¶²Ëµ¥F2-E3
 864          {
 865   1              tm1629_E(0x03);
 866   1              Two_Menu_F2_E3[0] = 0;
 867   1              Two_Menu_F2_E3[1] = 0;
 868   1              Two_Menu_F2_E3[2] = 0;
 869   1              Two_Menu_F2_E3[3] = 1;
 870   1      }
 871          
 872          void fun28(void) //¶þ¼¶²Ëµ¥F2-E4
 873          {
 874   1              tm1629_E(0x04);
 875   1              Two_Menu_F2_E4[0] = 0;
 876   1              Two_Menu_F2_E4[1] = 0;
 877   1              Two_Menu_F2_E4[2] = 0;
 878   1              Two_Menu_F2_E4[3] = 1;
 879   1      }
 880          
 881          void fun29(void) //¶þ¼¶²Ëµ¥F3-E1
 882          {
 883   1              tm1629_E(0x01);
 884   1      }
 885          
 886          void fun30(void) //¶þ¼¶²Ëµ¥F3-E2
 887          {
 888   1              tm1629_E(0x02);
 889   1      }
 890          
 891          void fun31(void) //¶þ¼¶²Ëµ¥F4
 892          {
 893   1              unsigned char temp = 0;
 894   1              temp = return_Two_Menu_F4_E1();
 895   1              Show_two_number(temp);
 896   1      }
 897          
 898          void fun32(void) //¶þ¼¶²Ëµ¥F5
 899          {
 900   1              unsigned char temp = 0;
 901   1              temp = return_Two_Menu_F5_E1();
 902   1              Show_two_number(temp);
 903   1      }
 904          
 905          void fun33(void) //¶þ¼¶²Ëµ¥F6-E1
 906          {
 907   1              tm1629_E(0x01);
 908   1      }
 909          
 910          void fun34(void) //¶þ¼¶²Ëµ¥F6-E2
 911          {
 912   1              tm1629_E(0x02);
 913   1      }
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 16  

 914          
 915          void fun35(void) //¶þ¼¶²Ëµ¥F6-E3
 916          {
 917   1              tm1629_E(0x03);
 918   1      }
 919          
 920          void fun36(void) //¶þ¼¶²Ëµ¥F6-E4
 921          {
 922   1              tm1629_E(0x04);
 923   1      }
 924          
 925          void fun37(void) //¶þ¼¶²Ëµ¥F6-E5
 926          {
 927   1              tm1629_E(0x05);
 928   1      }
 929          
 930          void fun38(void) //¶þ¼¶²Ëµ¥F7-E1
 931          {
 932   1              tm1629_E(0x01);
 933   1      }
 934          
 935          void fun39(void) //¶þ¼¶²Ëµ¥F7-E2
 936          {
 937   1              tm1629_E(0x02);
 938   1      }
 939          
 940          void fun40(void) //¶þ¼¶²Ëµ¥F7-E3
 941          {
 942   1              tm1629_E(0x03);
 943   1      }
 944          
 945          void fun41(void) //¶þ¼¶²Ëµ¥F7-E4
 946          {
 947   1              tm1629_E(0x04);
 948   1      }
 949          
 950          void fun42(void) //¶þ¼¶²Ëµ¥F8-E1
 951          {
 952   1              tm1629_E(0x01);
 953   1              Two_Menu_F8_E1_save = return_Two_Menu_F8_E1();
 954   1      }
 955          
 956          void fun43(void) //¶þ¼¶²Ëµ¥F8-E2
 957          {
 958   1              tm1629_E(0x02);
 959   1      }
 960          
 961          void fun44(void) //¶þ¼¶²Ëµ¥F9-E1
 962          {
 963   1              tm1629_E(0x01);
 964   1      }
 965          
 966          void fun45(void) //¶þ¼¶²Ëµ¥F9-E2
 967          {
 968   1              tm1629_E(0x02);
 969   1      }
 970          
 971          void fun46(void) //¶þ¼¶²Ëµ¥FA
 972          {
 973   1              unsigned int measure_sync_saved_temp = 0;
 974   1              unsigned int show_temp = 0;
 975   1      
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 17  

 976   1                      measure_sync_saved_temp = return_RF_trans_count();
 977   1                      show_temp = 10000 / measure_sync_saved_temp;
 978   1                      Show_three_number(show_temp);
 979   1      
 980   1      //              uart_printf("measure_sync_saved_tempÎª %d ! \n\r", measure_sync_saved_temp);
 981   1      //              uart_printf("show_tempÎª %d ! \n\r", show_temp);
 982   1      
 983   1      }
 984          
 985          
 986          void fun47(void) //¶þ¼¶²Ëµ¥Fb
 987          {
 988   1              unsigned char temp = 0;
 989   1              temp = return_Two_Menu_Fb_E1();
 990   1              Show_one_number(temp);
 991   1      }
 992          
 993          void fun48(void) //¶þ¼¶²Ëµ¥FC
 994          {
 995   1              unsigned char temp = 0;
 996   1              temp = return_Two_Menu_FC_E1();
 997   1              Show_one_number(temp);
 998   1      }
 999          
1000          void fun49(void) //¶þ¼¶²Ëµ¥Fd
1001          {
1002   1              tm1629_f(0x0f);
1003   1      }
1004          
1005          void fun50(void) //F1_E1 Ç§Î»ÉÁË¸
1006          {
1007   1              if (return_await_number_table() == 1)
1008   1              {
1009   2                      Show_four_number(Two_Menu_F1_E1);
1010   2                      set_await_number_table(2);
1011   2              }
1012   1              if (return_await_number_table() == 3)
1013   1              {
1014   2                      buf_display[0][3] = 0;
1015   2                      display();
1016   2                      set_await_number_table(0);
1017   2              }
1018   1      }
1019          
1020          void fun51(void) //F1_E1 °ÙÎ»ÉÁË¸
1021          {
1022   1              if (return_await_number_table() == 1)
1023   1              {
1024   2                      Show_four_number(Two_Menu_F1_E1);
1025   2                      set_await_number_table(2);
1026   2              }
1027   1              if (return_await_number_table() == 3)
1028   1              {
1029   2                      buf_display[0][2] = 0;
1030   2                      display();
1031   2                      set_await_number_table(0);
1032   2              }
1033   1      }
1034          
1035          void fun52(void)  //F1_E1 Ê®Î»ÉÁË¸
1036          {
1037   1              if (return_await_number_table() == 1)
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 18  

1038   1              {
1039   2                      Show_four_number(Two_Menu_F1_E1);
1040   2                      set_await_number_table(2);
1041   2              }
1042   1              if (return_await_number_table() == 3)
1043   1              {
1044   2                      buf_display[0][1] = 0;
1045   2                      display();
1046   2                      set_await_number_table(0);
1047   2              }
1048   1      }
1049          
1050          void fun53(void) //F1_E1 ¸öÎ»ÉÁË¸
1051          {
1052   1              if (return_await_number_table() == 1)
1053   1              {
1054   2                      Show_four_number(Two_Menu_F1_E1);
1055   2                      set_await_number_table(2);
1056   2              }
1057   1              if (return_await_number_table() == 3)
1058   1              {
1059   2                      buf_display[0][0] = 0;
1060   2                      display();
1061   2                      set_await_number_table(0);
1062   2              }
1063   1      }
1064          
1065          void fun54(void) //F1_E2 Ç§Î»ÉÁË¸
1066          {
1067   1              if (return_await_number_table() == 1)
1068   1              {
1069   2                      Show_four_number(Two_Menu_F1_E2);
1070   2                      set_await_number_table(2);
1071   2              }
1072   1              if (return_await_number_table() == 3)
1073   1              {
1074   2                      buf_display[0][3] = 0;
1075   2                      display();
1076   2                      set_await_number_table(0);
1077   2              }
1078   1      }
1079          
1080          void fun55(void) //F1_E2 °ÙÎ»ÉÁË¸
1081          {
1082   1              if (return_await_number_table() == 1)
1083   1              {
1084   2                      Show_four_number(Two_Menu_F1_E2);
1085   2                      set_await_number_table(2);
1086   2              }
1087   1              if (return_await_number_table() == 3)
1088   1              {
1089   2                      buf_display[0][2] = 0;
1090   2                      display();
1091   2                      set_await_number_table(0);
1092   2              }
1093   1      }
1094          
1095          void fun56(void) //F1_E2 Ê®Î»ÉÁË¸
1096          {
1097   1              if (return_await_number_table() == 1)
1098   1              {
1099   2                      Show_four_number(Two_Menu_F1_E2);
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 19  

1100   2                      set_await_number_table(2);
1101   2              }
1102   1              if (return_await_number_table() == 3)
1103   1              {
1104   2                      buf_display[0][1] = 0;
1105   2                      display();
1106   2                      set_await_number_table(0);
1107   2              }
1108   1      }
1109          
1110          void fun57(void) //F1_E2 ¸öÎ»ÉÁË¸
1111          {
1112   1              if (return_await_number_table() == 1)
1113   1              {
1114   2                      Show_four_number(Two_Menu_F1_E2);
1115   2                      set_await_number_table(2);
1116   2              }
1117   1              if (return_await_number_table() == 3)
1118   1              {
1119   2                      buf_display[0][0] = 0;
1120   2                      display();
1121   2                      set_await_number_table(0);
1122   2              }
1123   1      }
1124          
1125          void fun58(void) //F1_E3 Ç§Î»ÉÁË¸
1126          {
1127   1              if (return_await_number_table() == 1)
1128   1              {
1129   2                      Show_four_number(Two_Menu_F1_E3);
1130   2                      set_await_number_table(2);
1131   2              }
1132   1              if (return_await_number_table() == 3)
1133   1              {
1134   2                      buf_display[0][3] = 0;
1135   2                      display();
1136   2                      set_await_number_table(0);
1137   2              }
1138   1      }
1139          
1140          void fun59(void) //F1_E3 °ÙÎ»ÉÁË¸
1141          {
1142   1              if (return_await_number_table() == 1)
1143   1              {
1144   2                      Show_four_number(Two_Menu_F1_E3);
1145   2                      set_await_number_table(2);
1146   2              }
1147   1              if (return_await_number_table() == 3)
1148   1              {
1149   2                      buf_display[0][2] = 0;
1150   2                      display();
1151   2                      set_await_number_table(0);
1152   2              }
1153   1      }
1154          
1155          void fun60(void) //F1_E3 Ê®Î»ÉÁË¸
1156          {
1157   1              if (return_await_number_table() == 1)
1158   1              {
1159   2                      Show_four_number(Two_Menu_F1_E3);
1160   2                      set_await_number_table(2);
1161   2              }
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 20  

1162   1              if (return_await_number_table() == 3)
1163   1              {
1164   2                      buf_display[0][1] = 0;
1165   2                      display();
1166   2                      set_await_number_table(0);
1167   2              }
1168   1      }
1169          
1170          void fun61(void) //F1_E3 ¸öÎ»ÉÁË¸
1171          {
1172   1              if (return_await_number_table() == 1)
1173   1              {
1174   2                      Show_four_number(Two_Menu_F1_E3);
1175   2                      set_await_number_table(2);
1176   2              }
1177   1              if (return_await_number_table() == 3)
1178   1              {
1179   2                      buf_display[0][0] = 0;
1180   2                      display();
1181   2                      set_await_number_table(0);
1182   2              }
1183   1      }
1184          
1185          void fun62(void) //F1_E4 Ç§Î»ÉÁË¸
1186          {
1187   1              if (return_await_number_table() == 1)
1188   1              {
1189   2                      Show_four_number(Two_Menu_F1_E4);
1190   2                      set_await_number_table(2);
1191   2              }
1192   1              if (return_await_number_table() == 3)
1193   1              {
1194   2                      buf_display[0][3] = 0;
1195   2                      display();
1196   2                      set_await_number_table(0);
1197   2              }
1198   1      }
1199          
1200          void fun63(void) //F1_E4 °ÙÎ»ÉÁË¸
1201          {
1202   1              if (return_await_number_table() == 1)
1203   1              {
1204   2                      Show_four_number(Two_Menu_F1_E4);
1205   2                      set_await_number_table(2);
1206   2              }
1207   1              if (return_await_number_table() == 3)
1208   1              {
1209   2                      buf_display[0][2] = 0;
1210   2                      display();
1211   2                      set_await_number_table(0);
1212   2              }
1213   1      }
1214          
1215          void fun64(void) //F1_E4 Ê®Î»ÉÁË¸
1216          {
1217   1              if (return_await_number_table() == 1)
1218   1              {
1219   2                      Show_four_number(Two_Menu_F1_E4);
1220   2                      set_await_number_table(2);
1221   2              }
1222   1              if (return_await_number_table() == 3)
1223   1              {
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 21  

1224   2                      buf_display[0][1] = 0;
1225   2                      display();
1226   2                      set_await_number_table(0);
1227   2              }
1228   1      }
1229          
1230          void fun65(void) //F1_E4 ¸öÎ»ÉÁË¸
1231          {
1232   1              if (return_await_number_table() == 1)
1233   1              {
1234   2                      Show_four_number(Two_Menu_F1_E4);
1235   2                      set_await_number_table(2);
1236   2              }
1237   1              if (return_await_number_table() == 3)
1238   1              {
1239   2                      buf_display[0][0] = 0;
1240   2                      display();
1241   2                      set_await_number_table(0);
1242   2              }
1243   1      }
1244          
1245          void fun66(void) //F2_E1 Ç§Î»ÉÁË¸
1246          {
1247   1              if (return_await_number_table() == 1)
1248   1              {
1249   2                      Show_four_number(Two_Menu_F2_E1);
1250   2                      set_await_number_table(2);
1251   2              }
1252   1              if (return_await_number_table() == 3)
1253   1              {
1254   2                      buf_display[0][3] = 0;
1255   2                      display();
1256   2                      set_await_number_table(0);
1257   2              }
1258   1      }
1259          
1260          void fun67(void) //F2_E1 °ÙÎ»ÉÁË¸
1261          {
1262   1              if (return_await_number_table() == 1)
1263   1              {
1264   2                      Show_four_number(Two_Menu_F2_E1);
1265   2                      set_await_number_table(2);
1266   2              }
1267   1              if (return_await_number_table() == 3)
1268   1              {
1269   2                      buf_display[0][2] = 0;
1270   2                      display();
1271   2                      set_await_number_table(0);
1272   2              }
1273   1      }
1274          
1275          void fun68(void) //F2_E1 Ê®Î»ÉÁË¸
1276          {
1277   1              if (return_await_number_table() == 1)
1278   1              {
1279   2                      Show_four_number(Two_Menu_F2_E1);
1280   2                      set_await_number_table(2);
1281   2              }
1282   1              if (return_await_number_table() == 3)
1283   1              {
1284   2                      buf_display[0][1] = 0;
1285   2                      display();
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 22  

1286   2                      set_await_number_table(0);
1287   2              }
1288   1      }
1289          
1290          void fun69(void) //F2_E1 ¸öÎ»ÉÁË¸
1291          {
1292   1              if (return_await_number_table() == 1)
1293   1              {
1294   2                      Show_four_number(Two_Menu_F2_E1);
1295   2                      set_await_number_table(2);
1296   2              }
1297   1              if (return_await_number_table() == 3)
1298   1              {
1299   2                      buf_display[0][0] = 0;
1300   2                      display();
1301   2                      set_await_number_table(0);
1302   2              }
1303   1      }
1304          
1305          void fun70(void) //F2_E2 Ç§Î»ÉÁË¸
1306          {
1307   1              if (return_await_number_table() == 1)
1308   1              {
1309   2                      Show_four_number(Two_Menu_F2_E2);
1310   2                      set_await_number_table(2);
1311   2              }
1312   1              if (return_await_number_table() == 3)
1313   1              {
1314   2                      buf_display[0][3] = 0;
1315   2                      display();
1316   2                      set_await_number_table(0);
1317   2              }
1318   1      }
1319          
1320          void fun71(void) //F2_E2 °ÙÎ»ÉÁË¸
1321          {
1322   1              if (return_await_number_table() == 1)
1323   1              {
1324   2                      Show_four_number(Two_Menu_F2_E2);
1325   2                      set_await_number_table(2);
1326   2              }
1327   1              if (return_await_number_table() == 3)
1328   1              {
1329   2                      buf_display[0][2] = 0;
1330   2                      display();
1331   2                      set_await_number_table(0);
1332   2              }
1333   1      }
1334          
1335          void fun72(void) //F2_E2 Ê®Î»ÉÁË¸
1336          {
1337   1              if (return_await_number_table() == 1)
1338   1              {
1339   2                      Show_four_number(Two_Menu_F2_E2);
1340   2                      set_await_number_table(2);
1341   2              }
1342   1              if (return_await_number_table() == 3)
1343   1              {
1344   2                      buf_display[0][1] = 0;
1345   2                      display();
1346   2                      set_await_number_table(0);
1347   2              }
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 23  

1348   1      }
1349          
1350          void fun73(void) //F2_E2 ¸öÎ»ÉÁË¸
1351          {
1352   1              if (return_await_number_table() == 1)
1353   1              {
1354   2                      Show_four_number(Two_Menu_F2_E2);
1355   2                      set_await_number_table(2);
1356   2              }
1357   1              if (return_await_number_table() == 3)
1358   1              {
1359   2                      buf_display[0][0] = 0;
1360   2                      display();
1361   2                      set_await_number_table(0);
1362   2              }
1363   1      }
1364          
1365          void fun74(void) //F2_E3 Ç§Î»ÉÁË¸
1366          {
1367   1              if (return_await_number_table() == 1)
1368   1              {
1369   2                      Show_four_number(Two_Menu_F2_E3);
1370   2                      set_await_number_table(2);
1371   2              }
1372   1              if (return_await_number_table() == 3)
1373   1              {
1374   2                      buf_display[0][3] = 0;
1375   2                      display();
1376   2                      set_await_number_table(0);
1377   2              }
1378   1      }
1379          
1380          void fun75(void) //F2_E3 °ÙÎ»ÉÁË¸
1381          {
1382   1              if (return_await_number_table() == 1)
1383   1              {
1384   2                      Show_four_number(Two_Menu_F2_E3);
1385   2                      set_await_number_table(2);
1386   2              }
1387   1              if (return_await_number_table() == 3)
1388   1              {
1389   2                      buf_display[0][2] = 0;
1390   2                      display();
1391   2                      set_await_number_table(0);
1392   2              }
1393   1      }
1394          
1395          void fun76(void) //F2_E3 Ê®Î»ÉÁË¸
1396          {
1397   1              if (return_await_number_table() == 1)
1398   1              {
1399   2                      Show_four_number(Two_Menu_F2_E3);
1400   2                      set_await_number_table(2);
1401   2              }
1402   1              if (return_await_number_table() == 3)
1403   1              {
1404   2                      buf_display[0][1] = 0;
1405   2                      display();
1406   2                      set_await_number_table(0);
1407   2              }
1408   1      }
1409          
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 24  

1410          void fun77(void) //F2_E3 ¸öÎ»ÉÁË¸
1411          {
1412   1              if (return_await_number_table() == 1)
1413   1              {
1414   2                      Show_four_number(Two_Menu_F2_E3);
1415   2                      set_await_number_table(2);
1416   2              }
1417   1              if (return_await_number_table() == 3)
1418   1              {
1419   2                      buf_display[0][0] = 0;
1420   2                      display();
1421   2                      set_await_number_table(0);
1422   2              }
1423   1      }
1424          
1425          void fun78(void) //F2_E4 Ç§Î»ÉÁË¸
1426          {
1427   1              if (return_await_number_table() == 1)
1428   1              {
1429   2                      Show_four_number(Two_Menu_F2_E4);
1430   2                      set_await_number_table(2);
1431   2              }
1432   1              if (return_await_number_table() == 3)
1433   1              {
1434   2                      buf_display[0][3] = 0;
1435   2                      display();
1436   2                      set_await_number_table(0);
1437   2              }
1438   1      }
1439          
1440          void fun79(void) //F2_E4 °ÙÎ»ÉÁË¸
1441          {
1442   1              if (return_await_number_table() == 1)
1443   1              {
1444   2                      Show_four_number(Two_Menu_F2_E4);
1445   2                      set_await_number_table(2);
1446   2              }
1447   1              if (return_await_number_table() == 3)
1448   1              {
1449   2                      buf_display[0][2] = 0;
1450   2                      display();
1451   2                      set_await_number_table(0);
1452   2              }
1453   1      }
1454          
1455          void fun80(void) //F2_E4 Ê®Î»ÉÁË¸
1456          {
1457   1              if (return_await_number_table() == 1)
1458   1              {
1459   2                      Show_four_number(Two_Menu_F2_E4);
1460   2                      set_await_number_table(2);
1461   2              }
1462   1              if (return_await_number_table() == 3)
1463   1              {
1464   2                      buf_display[0][1] = 0;
1465   2                      display();
1466   2                      set_await_number_table(0);
1467   2              }
1468   1      }
1469          
1470          void fun81(void) //F2_E4 ¸öÎ»ÉÁË¸
1471          {
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 25  

1472   1              if (return_await_number_table() == 1)
1473   1              {
1474   2                      Show_four_number(Two_Menu_F2_E4);
1475   2                      set_await_number_table(2);
1476   2              }
1477   1              if (return_await_number_table() == 3)
1478   1              {
1479   2                      buf_display[0][0] = 0;
1480   2                      display();
1481   2                      set_await_number_table(0);
1482   2              }
1483   1      }
1484          
1485          void fun82(void) //ÏÔÊ¾¼´Ê±ÏÔÊ¾ »¹ÊÇÑ­»·ÏÔÊ¾
1486          {
1487   1              unsigned char temp=0;
1488   1              temp = return_Two_Menu_F3_E1();
1489   1              Show_one_number(temp);
1490   1      }
1491          
1492          void fun83(void) //¶ÓÁÐ´æ´¢¸öÊý
1493          {
1494   1              unsigned char temp = 0;
1495   1              temp = return_Two_Menu_F3_E2();
1496   1              Show_two_number(temp);
1497   1      }
1498          
1499          void fun84(void) //F6_E1ÓïÒôÑ¡Ôñ
1500          {
1501   1              unsigned char temp = 0;
1502   1              temp = return_Two_Menu_F6_E1();
1503   1              Show_one_number(temp);
1504   1      }
1505          
1506          void fun85(void) //F6_E2ÓïÒô±¨¶Á´ÎÊý
1507          {
1508   1              unsigned char temp = 0;
1509   1              temp = return_Two_Menu_F6_E2();
1510   1              Show_one_number(temp);
1511   1      }
1512          
1513          void fun86(void) //F6_E3Ñ­»·Ê±ºòÊÇ·ñ±¨¶Á
1514          {
1515   1              unsigned char temp = 0;
1516   1              temp = return_Two_Menu_F6_E3();
1517   1              Show_one_number(temp);
1518   1      }
1519          
1520          void fun87(void) //F6_E4ÒôÁ¿´óÐ¡µ÷Õû
1521          {
1522   1              unsigned char temp = 0;
1523   1              temp = return_Two_Menu_F6_E4();
1524   1              GD5800_sound_volume(temp * 3);
1525   1              Show_one_number(temp);
1526   1      }
1527          
1528          void fun88(void) //F6_E5ÆÁÄ»ÁÁ¶Èµ÷Õû
1529          {
1530   1              unsigned char temp = 0;
1531   1              temp = return_Two_Menu_F6_E5();
1532   1              Show_one_number(temp);
1533   1      }
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 26  

1534          
1535          void fun89(void) //F7_E1 999*9
1536          {
1537   1              unsigned char temp = 0;
1538   1              temp = return_Two_Menu_F7_E1();
1539   1              if (temp < 10)
1540   1              {
1541   2                      Show_one_number(temp);
1542   2              }
1543   1              else if (temp<11)
1544   1              {
1545   2                      Show_on();
1546   2              }
1547   1              else
1548   1              {
1549   2                      Show_off();
1550   2              }
1551   1      }
1552          
1553          void fun90(void) //F7_E2 9999*9
1554          {
1555   1              unsigned char temp = 0;
1556   1              temp = return_Two_Menu_F7_E2();
1557   1              Show_one_number(temp);
1558   1      }
1559          
1560          void fun91(void) //F7_E3 999*99
1561          {
1562   1              unsigned char temp = 0;
1563   1              temp = return_Two_Menu_F7_E3();
1564   1              Show_one_number(temp);
1565   1      }
1566          
1567          void fun92(void) //F7_E4 9999*99
1568          {
1569   1              unsigned char temp = 0;
1570   1              temp = return_Two_Menu_F7_E4();
1571   1              Show_one_number(temp);
1572   1      }
1573          
1574          void fun93(void) //F8_E1µ¥¼üÎ»¸ú¶à¼üÎ»ÇÐ»»
1575          {
1576   1              unsigned char temp = 0;
1577   1              temp = return_Two_Menu_F8_E1();
1578   1              Show_one_number(temp);
1579   1              if (temp != Two_Menu_F8_E1_save)
1580   1              {
1581   2                      Delete_all_data();
1582   2                      Two_Menu_F8_E1_save = temp;
1583   2                      if (return_sound_table() == 1)
1584   2                      {
1585   3                              GD5800_select_chapter(CHENGGONG);
1586   3      
1587   3                              set_sound_table(0);
1588   3                      }
1589   2              }
1590   1      }
1591          
1592          void fun94(void) //F8_E2¼üÎ»ÉèÖÃ
1593          {
1594   1              unsigned char temp = 0;
1595   1              temp = return_Two_Menu_F8_E2();
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 27  

1596   1              Show_two_number(temp);
1597   1              if (return_sound_table() == 1)
1598   1              {
1599   2                      delay10ms();
1600   2                      GD5800_stop_music();
1601   2                      delay10ms();
1602   2                      GD5800_select_chapter(temp + QUXIAO);
1603   2                      delay10ms();
1604   2                      set_sound_table(0);
1605   2              }
1606   1              if (return_Two_menu_set_success() == 1)
1607   1              {
1608   2                      GD5800_stop_music();
1609   2                      delay10ms();
1610   2                      GD5800_select_chapter(CHENGGONG);
1611   2                      set_Two_menu_set_success(0);
1612   2              }
1613   1      }
1614          
1615          void fun95(void) //½âÂë²Ëµ¥
1616          {
1617   1              tm1629_load();
1618   1              switch ( display_ram[5] & 0x0f)//ÏÔÊ¾ºô½ÐÀàÐÍ
1619   1              {
1620   2              case 2:
1621   2                              buf_display[0][0] |= 0x80;
1622   2                              buf_display[0][1] |= 0x80;
1623   2                              
1624   2                              break;//7¼ü
1625   2              case 3:
1626   2                              buf_display[0][0] |= 0x80;
1627   2                              buf_display[0][1] |= 0x80;
1628   2                              buf_display[0][2] |= 0x80;
1629   2                              buf_display[0][3] |= 0x80;
1630   2                              break;//78¼ü
1631   2              case 4:
1632   2                              buf_display[0][0] |= 0x80;
1633   2                              buf_display[0][1] |= 0x80;
1634   2                              buf_display[0][2] |= 0x80;
1635   2                              break;//6¼ü
1636   2              case 7:
1637   2                              buf_display[0][1] |= 0x80;
1638   2                              break;//678¼ü
1639   2              case 8: 
1640   2                              buf_display[0][0] |= 0x80; 
1641   2                              break;//5¼ü
1642   2              default:break;
1643   2              }
1644   1              display();
1645   1      
1646   1              
1647   1      
1648   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   5936    ----
   CONSTANT SIZE    =     24    ----
   XDATA SIZE       =    353      70
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
C51 COMPILER V9.00   TM1629                                                                10/16/2015 13:59:23 PAGE 28  

   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
