C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE TM1629
OBJECT MODULE PLACED IN tm1629.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Receiver\tm1629.c LARGE BROWSE INCDIR(.\Receiver) DEBUG OBJECTEXTEND PRINT(
                    -.\tm1629.lst) OBJECT(tm1629.obj)

line level    source

   1          #include "tm1629.h"
   2          #include "timer.h"
   3          #include "usart.h"
   4          #include "ds1302.h"
   5          #include "key.h"
   6          #include "menu.h"
   7          #include "gd5800.h"
   8          #include "at24c256.h"
   9          #include "ev1527.h"
  10          #include "decoder.h"
  11          
  12          unsigned char const CODE[] = { 0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07, 0x7F, 0x6F, 0x77, 0x7C, 0x3
             -9, 0x5E, 0x79, 0x71, 0x76, 0x38, 0x5c, 0x73, 0x3e };//0-9 abcdef ÏÔÊ¾Æ÷ÂëÊý×é
  13          unsigned char const INIT_CODE[] = { 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80 };//Öð¶ÎµãÁÁÊýÂë¹ÜÊý×é
  14          unsigned char const SHANGSHUO[] = { 0x40, 0x00 }; // µãÁÁÊýÂë¹ÜÖÐ¼ä¶ÎÒÔ¼°Ãð
  15          unsigned char buf_display[6][8] = { 0 }; //3¸öTM1629ÏÔ´æÊý×é
  16          unsigned char display_ram[800] = { 0 }; //³ÌÐòÔËÐÐÊ±¼ÇÂ¼ÏÔÊ¾Êý¾ÝµÄÄÚ´æ 
  17          unsigned char await_time_table= 0 ;//ÓÃÓÚ¼ÇÂ¼´ý»úÏÔÊ¾ºá¸ÜÊýÂë¹Ü´ÎÊý 
  18          unsigned char Two_Menu_F8_E1_save =0;
  19          
  20          unsigned char single_key[16]   = { 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
             - 0x01, 0x01, 0x01, 0x01 };//µ¥¼üÎ»ÉèÖÃ´æ´¢Êý×é
  21          unsigned char multiple_key[16] = { 0x01, QUXIAO-QUXIAO, JIEZHANG-QUXIAO, DIANDANG-QUXIAO, JIUSHUI-QUXIAO, 
             -0X01, 0x01, JIASHUI-QUXIAO, HUJIAO - QUXIAO, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01 };//¶à¼üÎ»ÉèÖÃ´æ´¢Êý×é
  22          
  23          void writeDataTo1629(unsigned char p) //Ð´Êý¾Ý¸øµÚÒ»¸öTM1629
  24          {
  25   1              unsigned int i;
  26   1              TM1629_STB = 0;
  27   1              for (i = 0; i<8; i++)
  28   1              {
  29   2                      TM1629_CLK = 0;
  30   2                      if (p & 0x01)
  31   2                              TM1629_DIO = 1;
  32   2                      else
  33   2                              TM1629_DIO = 0;
  34   2                      _nop_();
  35   2                      _nop_();
  36   2                      _nop_();
  37   2                      _nop_();
  38   2                      TM1629_CLK = 1;
  39   2                      p = p >> 1;
  40   2              }
  41   1              TM1629_CLK = 0;
  42   1              TM1629_DIO = 0;
  43   1      }
  44          
  45          void writeDataTo1629_2(unsigned char p) //Ð´Êý¾Ý¸øµÚ¶þ¸öTM1629
  46          {
  47   1              unsigned int i;
  48   1              TM1629_STB2 = 0;
  49   1              for (i = 0; i<8; i++)
  50   1              {
  51   2                      TM1629_CLK = 0;
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 2   

  52   2                      if (p & 0x01)
  53   2                              TM1629_DIO = 1;
  54   2                      else
  55   2                              TM1629_DIO = 0;
  56   2                      _nop_();
  57   2                      _nop_();
  58   2                      _nop_();
  59   2                      _nop_();
  60   2                      TM1629_CLK = 1;
  61   2                      p = p >> 1;
  62   2              }
  63   1              TM1629_CLK = 0;
  64   1              TM1629_DIO = 0;
  65   1      }
  66          
  67          void writeDataTo1629_3(unsigned char p) //Ð´Êý¾Ý¸øµÚÈý¸öTM1629
  68          {
  69   1              unsigned int i;
  70   1              TM1629_STB3 = 0;
  71   1              for (i = 0; i<8; i++)
  72   1              {
  73   2                      TM1629_CLK = 0;
  74   2                      if (p & 0x01)
  75   2                              TM1629_DIO = 1;
  76   2                      else
  77   2                              TM1629_DIO = 0;
  78   2                      _nop_();
  79   2                      _nop_();
  80   2                      _nop_();
  81   2                      _nop_();
  82   2                      TM1629_CLK = 1;
  83   2                      p = p >> 1;
  84   2              }
  85   1              TM1629_CLK = 0;
  86   1              TM1629_DIO = 0;
  87   1      }
  88          
  89          void send_command(unsigned char word) //Ð´ÃüÁî¸øµÚÒ»¸öTM1629
  90          {
  91   1              TM1629_STB = 1;
  92   1              nop;
  93   1              TM1629_STB = 0;
  94   1              writeDataTo1629(word);
  95   1      }
  96          
  97          void send_command_2(unsigned char word) //Ð´ÃüÁî¸øµÚ¶þ¸öTM1629
  98          {
  99   1              TM1629_STB2 = 1;
 100   1              nop;
 101   1              TM1629_STB2 = 0;
 102   1              writeDataTo1629_2(word);
 103   1      }
 104          
 105          void send_command_3(unsigned char word) //Ð´ÃüÁî¸øµÚÈý¸öTM1629
 106          {
 107   1              TM1629_STB3 = 1;
 108   1              nop;
 109   1              TM1629_STB3 = 0;
 110   1              writeDataTo1629_3(word);
 111   1      }
 112          
 113          void display(void) //3¸öTM1629ÏÔÊ¾º¯Êý
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 3   

 114          {
 115   1              unsigned char i,temp;
 116   1              temp = return_Two_Menu_F6_E5();
 117   1              send_command(0x40);     //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 118   1              send_command(0xc0);     //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 119   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 120   1              {
 121   2                      writeDataTo1629(buf_display[0][i]);
 122   2                      writeDataTo1629(buf_display[1][i]);
 123   2              }
 124   1              send_command(0x88 + temp);      //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 125   1              TM1629_STB = 1;
 126   1      
 127   1              send_command_2(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 128   1              send_command_2(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 129   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 130   1              {
 131   2                      writeDataTo1629_2(buf_display[2][i]);
 132   2                      writeDataTo1629_2(buf_display[3][i]);
 133   2              }
 134   1              send_command_2(0x88 + temp);    //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 135   1              TM1629_STB2 = 1;
 136   1      
 137   1              send_command_3(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 138   1              send_command_3(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 139   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 140   1              {
 141   2                      writeDataTo1629_3(buf_display[4][i]);
 142   2                      writeDataTo1629_3(buf_display[5][i]);
 143   2              }
 144   1              send_command_3(0x88 + temp);    //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 145   1              TM1629_STB3 = 1;
 146   1      }
 147          
 148          void display_light(unsigned char temp) //3¸öTM1629ÏÔÊ¾º¯Êý
 149          {
 150   1              unsigned char i;
 151   1              send_command(0x40);     //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 152   1              send_command(0xc0);     //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 153   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 154   1              {
 155   2                      writeDataTo1629(temp);
 156   2                      writeDataTo1629(temp);
 157   2              }
 158   1              send_command(0x8f);     //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 159   1              TM1629_STB = 1;
 160   1      
 161   1              send_command_2(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 162   1              send_command_2(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 163   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 164   1              {
 165   2                      writeDataTo1629_2(temp);
 166   2                      writeDataTo1629_2(temp);
 167   2              }
 168   1              send_command_2(0x8f);   //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 169   1              TM1629_STB2 = 1;
 170   1      
 171   1              send_command_3(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 172   1              send_command_3(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 173   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 174   1              {
 175   2                      writeDataTo1629_3(temp);
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 4   

 176   2                      writeDataTo1629_3(temp);
 177   2              }
 178   1              send_command_3(0x8f);   //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 179   1              TM1629_STB3 = 1;
 180   1      }
 181          
 182          void tm1629_init(void) //TM1629¿ª»ú³õÊ¼»¯º¯Êý
 183          {
 184   1              unsigned char i, j, k;          //k¿ØÖÆÏÔÊ¾µÄ¾ßÌåÊý×Ö£¬iºÍj¿ØÖÆbuf_displayµÄË¢ÐÂ
 185   1              for (k = 0; k<8; k++)
 186   1              {
 187   2                      for (i = 0; i<6; i++)
 188   2                      {
 189   3                              for (j = 0; j<8; j++)
 190   3                              {
 191   4                                      buf_display[i][j] = INIT_CODE[k];
 192   4                              }
 193   3                      }
 194   2                      display();
 195   2                      if (k == 1 )
 196   2                      GD5800_select_chapter(CHUSHIHUA);
 197   2                      Tm1629_delay(30);
 198   2              }
 199   1      }
 200          
 201          
 202          void Tm1629_delay(unsigned char k) //ÑÓÊ±º¯Êý
 203          {
 204   1              unsigned char i, j;
 205   1              for (; k>0; k--)
 206   1              {
 207   2                      for (i = 255; i>0; i--)
 208   2                      {
 209   3                              for (j = 255; j>0; j--)
 210   3                              {
 211   4                                      ;
 212   4      
 213   4                              }
 214   3                      }
 215   2              }
 216   1      }
 217          
 218          void tm1629_clear(void)//È«²¿¹éÁã
 219          {
 220   1              unsigned char i, j;
 221   1              for (i = 0; i<6; i++)
 222   1              {
 223   2                      for (j = 0; j<8; j++)
 224   2                      {
 225   3                              buf_display[i][j] = 0x00;
 226   3                      }
 227   2              }
 228   1      }
 229          
 230          void tm1629_display_buff_clear(void)//Çå³ý¶ÓÁÐ»º´æ
 231          {
 232   1              unsigned char i;
 233   1              for (i = 0; i<120; i++)
 234   1                      display_ram[i] = 0;
 235   1      }
 236          
 237          void tm1629_await(void)
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 5   

 238          {
 239   1              unsigned char i;        //k¿ØÖÆÏÔÊ¾µÄ¾ßÌåÊý×Ö£¬iºÍj¿ØÖÆbuf_displayµÄË¢ÐÂ
 240   1              unsigned char await_number_table_temp = 0;
 241   1              await_number_table_temp = return_await_number_table();
 242   1              if (await_number_table_temp == 1)
 243   1              {
 244   2                      //GD5800_select_chapter(0x0008) ;
 245   2                      tm1629_clear();
 246   2                      i = await_time_table & 0x03;
 247   2                      buf_display[0][i] = 0x40;
 248   2                      display();
 249   2                      set_await_number_table(0);
 250   2                      await_time_table++;
 251   2                      if (await_time_table == 4)
 252   2                              await_time_table = 0;
 253   2              }
 254   1      }
 255          
 256          void Display_time(void)
 257          {
 258   1              if (return_Two_Menu_F6_E7() == 0)
 259   1              {
 260   2                      tm1629_clear();
 261   2                      Ds1302_Read_Time();
 262   2                      buf_display[0][7] = CODE[2];                            //Äê
 263   2                      buf_display[0][6] = CODE[0];
 264   2                      buf_display[0][5] = CODE[time_buf1[1] / 10];
 265   2                      buf_display[0][4] = CODE[time_buf1[1] % 10];
 266   2      
 267   2      
 268   2                      buf_display[1][1] = CODE[time_buf1[2] / 10]; //ÔÂ
 269   2                      buf_display[1][0] = CODE[time_buf1[2] % 10];
 270   2      
 271   2      
 272   2                      buf_display[1][3] = CODE[time_buf1[3] / 10];
 273   2                      buf_display[1][2] = CODE[time_buf1[3] % 10];//ÈÕ
 274   2      
 275   2                      buf_display[1][4] = CODE[time_buf1[7]];         //ÐÇÆÚ
 276   2      
 277   2                      buf_display[0][3] = CODE[time_buf1[4] / 10]; //Ð¡Ê±
 278   2                      buf_display[0][2] = CODE[time_buf1[4] % 10];
 279   2                      buf_display[0][1] = CODE[time_buf1[5] / 10]; //Ð¡Ê±
 280   2                      buf_display[0][0] = CODE[time_buf1[5] % 10];
 281   2      
 282   2                      display();
 283   2      
 284   2              }
 285   1              else
 286   1              {
 287   2                      tm1629_clear();
 288   2                      Ds1302_Read_Time();
 289   2                      buf_display[1][3] = CODE[2];                            //Äê
 290   2                      buf_display[1][2] = CODE[0];
 291   2                      buf_display[1][1] = CODE[time_buf1[1] / 10];
 292   2                      buf_display[1][0] = CODE[time_buf1[1] % 10];
 293   2      
 294   2      
 295   2                      buf_display[0][7] = CODE[time_buf1[2] / 10]; //ÔÂ
 296   2                      buf_display[0][6] = CODE[time_buf1[2] % 10];
 297   2      
 298   2      
 299   2                      buf_display[0][5] = CODE[time_buf1[3] / 10];
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 6   

 300   2                      buf_display[0][4] = CODE[time_buf1[3] % 10];//ÈÕ
 301   2      
 302   2                      buf_display[1][4] = CODE[time_buf1[7]];         //ÐÇÆÚ
 303   2      
 304   2                      buf_display[0][3] = CODE[time_buf1[4] / 10]; //Ð¡Ê±
 305   2                      buf_display[0][2] = CODE[time_buf1[4] % 10];
 306   2                      buf_display[0][1] = CODE[time_buf1[5] / 10]; //Ð¡Ê±
 307   2                      buf_display[0][0] = CODE[time_buf1[5] % 10];
 308   2      
 309   2                      display();
 310   2              }
 311   1      }
 312          
 313          void tm1629_f(unsigned char f_number) //µÚÒ»ÐÐµ¹Êý¶þ¸öÏÔÊ¾F,µ¹ÊýµÚÒ»¸öÏÔÊ¾f_number
 314          {
 315   1              tm1629_clear();
 316   1              buf_display[0][1] = CODE[0x0f];
 317   1              buf_display[0][0] = CODE[f_number];
 318   1              display();
 319   1      }
 320          
 321          void tm1629_E(unsigned char f_number) //µÚÒ»ÐÐµ¹Êý¶þ¸öÏÔÊ¾F,µ¹ÊýµÚÒ»¸öÏÔÊ¾f_number
 322          {
 323   1              tm1629_clear();
 324   1              buf_display[0][1] = CODE[0x0E];
 325   1              buf_display[0][0] = CODE[f_number];
 326   1              display();
 327   1      }
 328          void Show_on(void)
 329          {
 330   1              tm1629_clear();
 331   1              buf_display[0][1] = CODE[0];
 332   1              buf_display[0][0] = 0x37;
 333   1              display();
 334   1      }
 335          
 336          void Show_off(void)
 337          {
 338   1              tm1629_clear();
 339   1              buf_display[0][1] = CODE[0x00];
 340   1              buf_display[0][0] = CODE[0x0f];
 341   1              display();
 342   1      }
 343          
 344          void Show_one_number(unsigned char f_number) //ÏÔÊ¾Ò»¸öÊý×Ö
 345          {
 346   1              tm1629_clear();
 347   1              //buf_display[0][1] = CODE[0x0E];
 348   1              buf_display[0][0] = CODE[f_number];
 349   1              display();
 350   1      }
 351          
 352          void Show_two_number(unsigned char f_number) //ÏÔÊ¾Á½¸öÊý×Ö
 353          {
 354   1              tm1629_clear();
 355   1              buf_display[0][1] = CODE[f_number / 10];
 356   1              buf_display[0][0] = CODE[f_number % 10];
 357   1              display();
 358   1      }
 359          
 360          
 361          void Show_three_number(unsigned int f_number) //ÏÔÊ¾Èý¸öÊý×Ö
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 7   

 362          {
 363   1              tm1629_clear();
 364   1              buf_display[0][2] = CODE[f_number / 100];
 365   1              buf_display[0][1] = CODE[(f_number / 10) %10];
 366   1              buf_display[0][0] = CODE[f_number % 10];
 367   1              display();
 368   1      }
 369          
 370          void Show_four_number(unsigned char* temp)
 371          {
 372   1              tm1629_clear();
 373   1              buf_display[0][3] = CODE[*(temp)];
 374   1              buf_display[0][2] = CODE[*(temp+1)];
 375   1              buf_display[0][1] = CODE[*(temp+2)];
 376   1              buf_display[0][0] = CODE[*(temp+3)];
 377   1              display();
 378   1      }
 379          
 380          void tm1629_load(void)
 381          {
 382   1              tm1629_clear();
 383   1              if (*(display_ram + 88) != 0)
 384   1                      mcuram_to_displayram(buf_display[5] + 7, display_ram + 88);
 385   1              if (*(display_ram + 80) != 0)
 386   1                      mcuram_to_displayram(buf_display[5] + 3, display_ram + 80);
 387   1              if (*(display_ram + 72) != 0)
 388   1                      mcuram_to_displayram(buf_display[4] + 7, display_ram + 72);
 389   1              if (*(display_ram + 64) != 0)
 390   1                      mcuram_to_displayram(buf_display[4] + 3, display_ram + 64);
 391   1              if (*(display_ram + 56) != 0)
 392   1                      mcuram_to_displayram(buf_display[3] + 7, display_ram + 56);
 393   1              if (*(display_ram + 48) != 0)
 394   1                      mcuram_to_displayram(buf_display[3] + 3, display_ram + 48);
 395   1              if (*(display_ram + 40) != 0)
 396   1                      mcuram_to_displayram(buf_display[2] + 7, display_ram + 40);
 397   1              if (*(display_ram + 32) != 0)
 398   1                      mcuram_to_displayram(buf_display[2] + 3, display_ram + 32);
 399   1              if (*(display_ram + 24) != 0)
 400   1                      mcuram_to_displayram(buf_display[1] + 7, display_ram + 24);
 401   1              if (*(display_ram + 16) != 0)
 402   1                      mcuram_to_displayram(buf_display[1] + 3, display_ram + 16);
 403   1              if (*(display_ram + 8) != 0)
 404   1                      mcuram_to_displayram(buf_display[0] + 7, display_ram + 8);
 405   1              if (*(display_ram + 0) != 0)
 406   1                      mcuram_to_displayram(buf_display[0] + 3, display_ram);
 407   1      
 408   1              //buf_display[0][5] = CODE[decoder_num / 10];
 409   1              //buf_display[0][4] = CODE[decoder_num % 10];
 410   1      }
 411          
 412          void mcuram_to_displayram(unsigned char a[48], unsigned char* b)  //´ÓRAMÇøÓòÒÆµ½ÏÔ´æÇøÓò,Ë³´ø·­Òë³ÉÊýÂë¹Ü
             -ÏÔÊ¾µÄÂë
 413          {
 414   1              /*
 415   1              A// Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 416   1              B// Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 417   1              */
 418   1              *(a) = CODE[*(b + 1)];
 419   1              *(a - 1) = CODE[*(b + 2)];
 420   1              *(a - 2) = CODE[*(b + 3)];
 421   1              *(a - 3) = CODE[*(b + 4)];
 422   1      
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 8   

 423   1              switch (*(b + 5) & 0x0f)//ÏÔÊ¾ºô½ÐÀàÐÍ
 424   1              {
 425   2              case 2:
 426   2                      *(a - 3) |= 0x80;
 427   2                      *(a - 2) |= 0x80;
 428   2      
 429   2                      break;//7¼ü
 430   2              case 3:
 431   2                      *(a - 3) |= 0x80;
 432   2                      *(a - 2) |= 0x80;
 433   2                      *(a - 1) |= 0x80;
 434   2                      *(a) |= 0x80;
 435   2                      break;//78¼ü
 436   2              case 4:
 437   2                      *(a - 3) |= 0x80;
 438   2                      *(a - 2) |= 0x80;
 439   2                      *(a - 1) |= 0x80;
 440   2                      break;//6¼ü
 441   2              case 7:
 442   2                      *(a - 2) |= 0x80;
 443   2                      break;//678¼ü
 444   2              case 8:
 445   2                      *(a - 3) |= 0x80;
 446   2                      break;//5¼ü
 447   2              default:break;
 448   2              }
 449   1      
 450   1      
 451   1      }
 452          
 453          void decoder_temp_to_mcuram(unsigned char* a, unsigned char* index)//aÎªMCU»º´æÇø   indexÎª½âÂëºóÈ¡³öµÄ8×Ö
             -½ÚÁÙÊ±Êý×é
 454          {
 455   1              *(a + 0) = *(index);
 456   1              *(a + 1) = *(index + 1);
 457   1              *(a + 2) = *(index + 2);
 458   1              *(a + 3) = *(index + 3);
 459   1              *(a + 4) = *(index + 4);
 460   1              *(a + 5) = *(index + 7);//±£´æ°´¼üµÄ¼üÖµ
 461   1      }
 462          
 463          void mcuram_to_mcuram_down(unsigned char* a) //aÎªMCURAM»º´æÇøÇø   ÏòÏÂÑ¹Ò»×éÊý¾Ý
 464          {
 465   1              *(a + 8) = *(a);                //ramÇøÔªËØÏÂÒÆ6¸ö
 466   1              *(a + 9) = *(a + 1);
 467   1              *(a + 10) = *(a + 2);
 468   1              *(a + 11) = *(a + 3);
 469   1              *(a + 12) = *(a + 4);
 470   1              *(a + 13) = *(a + 5);
 471   1      
 472   1      }
 473          
 474          void mcuram_to_mcuram_up(unsigned char* a) //aÎªMCURAM»º´æÇøÇø   ÏòÉÏÑ¹Ò»×éÊý¾Ý
 475          {
 476   1              *(a) = *(a + 8);   //ramÇøÔªËØÉÏÒÆ6¸ö
 477   1              *(a + 1) = *(a + 9);
 478   1              *(a + 2) = *(a + 10);
 479   1              *(a + 3) = *(a + 11);
 480   1              *(a + 4) = *(a + 12);
 481   1              *(a + 5) = *(a + 13);
 482   1      }
 483          
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 9   

 484          void CycleProcess(void)
 485          {
 486   1              unsigned char i, index;
 487   1              unsigned char f5_xunhuan, f4_xiaohao, logout_cycle_table_temp;
 488   1              unsigned char temp[8] = { 0 };
 489   1              unsigned char Two_Menu_F6_E3_temp = 0;
 490   1              unsigned char Two_Menu_F6_E1_temp = 0;
 491   1      
 492   1              Two_Menu_F6_E3_temp = return_Two_Menu_F6_E3();
 493   1              Two_Menu_F6_E1_temp = return_Two_Menu_F6_E1();
 494   1      
 495   1              f5_xunhuan = return_Two_Menu_F5_E1();
 496   1              f4_xiaohao = return_Two_Menu_F4_E1();
 497   1              logout_cycle_table_temp = return_logout_cycle_table();
 498   1              /*Ñ­»·´¦Àíº¯Êý*/
 499   1              if ((f5_xunhuan<f4_xiaohao && logout_cycle_table_temp>f5_xunhuan && f4_xiaohao && f5_xunhuan) || (f4_xiao
             -hao == 0 && f5_xunhuan &&logout_cycle_table_temp>f5_xunhuan))
 500   1              {
 501   2                      for (i = 0; i<10; i++)
 502   2                      {
 503   3                              if (display_ram[i<<3] == 0)
 504   3                              {
 505   4                                      index = i;
 506   4                                      break;
 507   4                              }
 508   3                      }
 509   2      
 510   2                      for (i = 0; i<6; i++)
 511   2                      {
 512   3                              temp[i] = display_ram[((index - 1)<<3) + i];
 513   3                      }
 514   2      
 515   2                      for (i = index; i>1; i--)
 516   2                      {
 517   3                              mcuram_to_mcuram_down(display_ram + ((i - 2)<<3));
 518   3                      }
 519   2                      for (i = 0; i<6; i++)
 520   2                      {
 521   3                              display_ram[i] = temp[i];
 522   3                      }
 523   2                      tm1629_load();
 524   2                      display();
 525   2                      set_logout_cycle_table(0);
 526   2                      if (Two_Menu_F6_E3_temp == 1)
 527   2                      {
 528   3                                      submenuf6_1(Two_Menu_F6_E1_temp, display_ram, display_ram[0], display_ram[5] & 0x0f);
 529   3                      }
 530   2              }
 531   1      }
 532          
 533          void LogoutProcess(void)
 534          {
 535   1              unsigned char i;
 536   1              unsigned char f5_xunhuan, f4_xiaohao, logout_cycle_table_temp, Two_Menu_F3_E2_temp, Two_Menu_F3_E1_temp;
 537   1              unsigned char Two_Menu_F6_E1_temp = 0;
 538   1              unsigned char Two_Menu_F6_E2_temp = 0;
 539   1      
 540   1              f5_xunhuan = return_Two_Menu_F5_E1();
 541   1              f4_xiaohao = return_Two_Menu_F4_E1();
 542   1              logout_cycle_table_temp = return_logout_cycle_table();
 543   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 544   1              Two_Menu_F3_E1_temp = return_Two_Menu_F3_E1();
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 10  

 545   1              Two_Menu_F6_E2_temp = return_Two_Menu_F6_E2();
 546   1              /*ÏúºÅ´¦Àíº¯Êý*/
 547   1              if ((f4_xiaohao<f5_xunhuan&& logout_cycle_table_temp>f4_xiaohao && f5_xunhuan && f4_xiaohao) || (f5_xunhu
             -an == 0 && f4_xiaohao && logout_cycle_table_temp>f4_xiaohao))
 548   1              {
 549   2                      for (i = 0; i<(Two_Menu_F3_E2_temp - 1); i++)
 550   2                      {
 551   3                              mcuram_to_mcuram_up(display_ram + (i<<3));
 552   3                      }
 553   2                      for (i = ((Two_Menu_F3_E2_temp - 1)<<3); i<(Two_Menu_F3_E2_temp<<3); i++)
 554   2                      {
 555   3                              display_ram[i] = 0;
 556   3                      }
 557   2                      tm1629_load();
 558   2                      display();
 559   2                      set_logout_cycle_table(0);
 560   2                      if (display_ram[0] == 0)
 561   2                      {
 562   3                              set_func_index(MENU_STANDBY);
 563   3                      }
 564   2                      else if (Two_Menu_F3_E1_temp == 2)
 565   2                      {
 566   3                              for (i = 0; i < Two_Menu_F6_E2_temp; i++)
 567   3                              {
 568   4                                      submenuf6_1(Two_Menu_F6_E1_temp, display_ram, display_ram[0], display_ram[5] & 0x0f);
 569   4                              }
 570   3                      }
 571   2              }
 572   1      }
 573          
 574          
 575          
 576          
 577          
 578          void Logout(void)
 579          {
 580   1              unsigned int i;
 581   1              unsigned char Two_Menu_F3_E2_temp= 0;
 582   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 583   1              /*ÏúºÅ´¦Àíº¯Êý*/
 584   1              for (i = 0; i<(Two_Menu_F3_E2_temp - 1); i++)
 585   1              {
 586   2                      mcuram_to_mcuram_up(display_ram + (i<<3));
 587   2              }
 588   1              for (i = ((Two_Menu_F3_E2_temp - 1) <<3); i<(Two_Menu_F3_E2_temp<<3); i++)
 589   1              {
 590   2                      display_ram[i] = 0;
 591   2              }
 592   1              decoder_num--;
 593   1              tm1629_load();
 594   1              display();
 595   1              if (display_ram[0] == 0)
 596   1              {
 597   2                      set_func_index(MENU_STANDBY);
 598   2              }
 599   1      }
 600          
 601          void CycleUp(void)
 602          {
 603   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 604   1              unsigned char temp[6] = { 0 };
 605   1              index = return_Two_Menu_F3_E2();
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 11  

 606   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 607   1              /*Ñ­»·´¦Àíº¯Êý*/
 608   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 609   1              {
 610   2                      if (display_ram[i<<3] == 0)
 611   2                      {
 612   3                              index = i;
 613   3                              break;
 614   3                      }
 615   2              }
 616   1              for (i = 0; i<6; i++)
 617   1              {
 618   2                      temp[i] = display_ram[i];
 619   2              }
 620   1              for (i = 0; i<index; i++)
 621   1              {
 622   2                      mcuram_to_mcuram_up(display_ram + (i<<3));
 623   2              }
 624   1              for (i = 0; i<6; i++)
 625   1              {
 626   2                      display_ram[((index - 1)<<3) + i] = temp[i];
 627   2              }
 628   1              tm1629_load();
 629   1              display();
 630   1      }
 631          
 632          void CycleDown(void)
 633          {
 634   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 635   1              unsigned char temp[6] = { 0 };
 636   1              index = return_Two_Menu_F3_E2();
 637   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 638   1              /*Ñ­»·´¦Àíº¯Êý*/
 639   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 640   1              {
 641   2                      if (display_ram[i<<3] == 0)
 642   2                      {
 643   3                              index = i;
 644   3                              break;
 645   3                      }
 646   2              }
 647   1      
 648   1              for (i = 0; i<6; i++)
 649   1              {
 650   2                      temp[i] = display_ram[((index - 1)<<3) + i];
 651   2              }
 652   1      
 653   1              for (i = index; i>1; i--)
 654   1              {
 655   2                      mcuram_to_mcuram_down(display_ram + ((i - 2)<<3));
 656   2              }
 657   1              for (i = 0; i<6; i++)
 658   1              {
 659   2                      display_ram[i] = temp[i];
 660   2              }
 661   1              tm1629_load();
 662   1              display();
 663   1      }
 664          
 665          void Cancel_funtion(unsigned char* id_number, unsigned char* buff)//id_numberÎª½âÂëµÄtempÊý×é£¬buffÎªÏÔÊ¾»
             -º´æ
 666          {
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 12  

 667   1              /*
 668   1              id_number  //  ÐòºÅ¡¢½ÓÊÕºÅ*3¡¢ID*3¡¢ÇøºÅ
 669   1              buff    //                ÐòºÅ¡¢Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 670   1              */
 671   1      
 672   1              unsigned int i, index, Two_Menu_F3_E2_temp;
 673   1              unsigned char temp[6] = { 0 };
 674   1              index = return_Two_Menu_F3_E2();
 675   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 676   1      
 677   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 678   1              {
 679   2                      if (*(id_number + 1) == *(buff + (i << 3) + 1) && *(id_number + 2) == *(buff + (i << 3) + 2) && *(id_num
             -ber + 3) == *(buff + (i << 3) + 3) && *(id_number + 4) == *(buff + (i << 3) + 4))
 680   2                      {
 681   3                              decoder_num--;
 682   3                              index = i;
 683   3                              break;
 684   3                      }
 685   2              }
 686   1              if (index == 0)
 687   1              {
 688   2                      GD5800_stop_music();
 689   2              }
 690   1              for (i = index; i<Two_Menu_F3_E2_temp; i++)
 691   1              {
 692   2                      mcuram_to_mcuram_up(buff + (i << 3));
 693   2              }
 694   1              if (index != Two_Menu_F3_E2_temp)
 695   1              {
 696   2                      for (i = 0; i<6; i++)
 697   2                      {
 698   3                              *(buff + ((Two_Menu_F3_E2_temp - 1)<<3) + i) = 0;
 699   3                      }
 700   2              }
 701   1              if (*(buff) == 0)
 702   1              {
 703   2                      set_func_index(MENU_STANDBY);
 704   2              }
 705   1      }
 706          
 707          void Search_funtion(unsigned char* id_number, unsigned char* buff)//id_numberÎª½âÂëµÄtempÊý×é£¬buffÎªÏÔÊ¾»
             -º´æ
 708          {
 709   1              /*
 710   1              id_number  //  ÐòºÅ¡¢½ÓÊÕºÅ*3¡¢ID*3¡¢ÇøºÅ
 711   1              buff    //                ÐòºÅ¡¢Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 712   1              */
 713   1      
 714   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 715   1              unsigned char temp[6] = { 0 };
 716   1              index = return_Two_Menu_F3_E2();
 717   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 718   1      
 719   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 720   1              {
 721   2                      if (*(id_number + 1) == *(buff + (i << 3) + 1) && *(id_number + 2) == *(buff + (i << 3) + 2) && *(id_num
             -ber + 3) == *(buff + (i << 3) + 3) && *(id_number + 4) == *(buff + (i << 3) + 4))
 722   2                      {
 723   3                              decoder_num--;
 724   3                              index = i;
 725   3                              break;
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 13  

 726   3                      }
 727   2              }
 728   1      
 729   1              for (i = index; i<Two_Menu_F3_E2_temp; i++)
 730   1              {
 731   2                      mcuram_to_mcuram_up(buff + (i << 3));
 732   2              }
 733   1              if (index != Two_Menu_F3_E2_temp)
 734   1              {
 735   2                      for (i = 0; i<6; i++)
 736   2                      {
 737   3                              *(buff + ((Two_Menu_F3_E2_temp - 1)<<3) + i) = 0;
 738   3                      }
 739   2              }
 740   1      }
 741          
 742          
 743          
 744          void fun0(void) //´ý»úÏÔÊ¾º¯Êý
 745          {
 746   1              unsigned char temp = 0;
 747   1              temp = return_Two_Menu_FC_E1();
 748   1              decoder_num = 0;
 749   1              if (temp == 1)
 750   1              {
 751   2                      P55 = 1;
 752   2                      tm1629_await();
 753   2              }
 754   1              else
 755   1              {
 756   2                      Display_time();
 757   2              }
 758   1              if (return_Two_Menu_Fb_E1() == 1)
 759   1              {
 760   2                      tm1629_display_buff_clear();
 761   2              }
 762   1              P17 = 0;
 763   1              
 764   1      }
 765          
 766          void fun1(void) //Ò»¼¶²Ëµ¥F0
 767          {
 768   1              tm1629_f(0x00);
 769   1      }
 770          
 771          void fun2(void) //Ò»¼¶²Ëµ¥F1
 772          {
 773   1              P55 = 1;
 774   1              P17 = 0;
 775   1              tm1629_f(0x01);
 776   1              if (return_sound_table() == 1 && return_Two_Menu_F6_E6()== 1)
 777   1              {
 778   2                      GD5800_select_chapter(CUNCHUSHEZHI);
 779   2                      set_sound_table(0);
 780   2              }
 781   1      }
 782          
 783          void fun3(void) //Ò»¼¶²Ëµ¥F2
 784          {
 785   1              tm1629_f(0x02);
 786   1              if (return_sound_table() == 1 && return_Two_Menu_F6_E6() == 1)
 787   1              {
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 14  

 788   2                      GD5800_select_chapter_new(SHANGCHUSHEZHI);
 789   2                      set_sound_table(0);
 790   2              }
 791   1      }
 792          
 793          void fun4(void) //Ò»¼¶²Ëµ¥F3
 794          {
 795   1              tm1629_f(0x03);
 796   1              if (return_sound_table() == 1 && return_Two_Menu_F6_E6() == 1)
 797   1              {
 798   2                      GD5800_select_chapter_new(XIANSHISHEZHI);
 799   2                      set_sound_table(0);
 800   2              }
 801   1      }
 802          
 803          void fun5(void) //Ò»¼¶²Ëµ¥F4
 804          {
 805   1              tm1629_f(0x04);
 806   1              if (return_sound_table() == 1 && return_Two_Menu_F6_E6() == 1)
 807   1              {
 808   2                      GD5800_select_chapter_new(XIAOHAOSHEZHI);
 809   2                      set_sound_table(0);
 810   2              }
 811   1      }
 812          
 813          void fun6(void) //Ò»¼¶²Ëµ¥F5
 814          {
 815   1              tm1629_f(0x05);
 816   1              if (return_sound_table() == 1 && return_Two_Menu_F6_E6() == 1)
 817   1              {
 818   2                      GD5800_select_chapter_new(XUNHUANSHEZHI);
 819   2                      set_sound_table(0);
 820   2              }
 821   1      }
 822          
 823          void fun7(void) //Ò»¼¶²Ëµ¥F6
 824          {
 825   1              tm1629_f(0x06);
 826   1              if (return_sound_table() == 1 && return_Two_Menu_F6_E6() == 1)
 827   1              {
 828   2                      GD5800_select_chapter_new(YUYINSHEZHI);
 829   2                      set_sound_table(0);
 830   2              }
 831   1      }
 832          
 833          void fun8(void) //Ò»¼¶²Ëµ¥F7
 834          {
 835   1              tm1629_f(0x07);
 836   1              if (return_sound_table() == 1 && return_Two_Menu_F6_E6() == 1)
 837   1              {
 838   2                      GD5800_select_chapter_new(JIANPANSHEZHI);
 839   2                      set_sound_table(0);
 840   2              }
 841   1      }
 842          
 843          void fun9(void) //Ò»¼¶²Ëµ¥F8
 844          {
 845   1              tm1629_f(0x08);
 846   1              if (return_sound_table() == 1 && return_Two_Menu_F6_E6() == 1)
 847   1              {
 848   2                      GD5800_select_chapter_new(ANJIANSHEZHI);
 849   2                      set_sound_table(0);
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 15  

 850   2              }
 851   1      }
 852          
 853          void fun10(void) //Ò»¼¶²Ëµ¥F9
 854          {
 855   1              tm1629_f(0x09);
 856   1              if(return_sound_table() == 1 && return_Two_Menu_F6_E6() == 1)
 857   1              {
 858   2                      GD5800_select_chapter_new(HUIFUSHEZHI);
 859   2                      set_sound_table(0);
 860   2              }
 861   1      }
 862          
 863          void fun11(void) //Ò»¼¶²Ëµ¥FA
 864          {
 865   1              tm1629_f(0x0a);
 866   1      }
 867          
 868          void fun12(void) //Ò»¼¶²Ëµ¥Fb
 869          {
 870   1              tm1629_f(0x0b);
 871   1      }
 872          
 873          void fun13(void) //Ò»¼¶²Ëµ¥FC
 874          {
 875   1              tm1629_f(0x0c);
 876   1      }
 877          
 878          void fun14(void) //Ò»¼¶²Ëµ¥Fd
 879          {
 880   1              tm1629_f(0x0d);
 881   1              set_fd_table(0);
 882   1              P55 = 1;
 883   1      }
 884          
 885          void fun15(void) //ÉèÖÃÄê·Ý
 886          {
 887   1                      if (return_await_number_table() == 1)
 888   1                      {
 889   2                              Display_time();
 890   2                              set_await_number_table(2);
 891   2                      }
 892   1                      if (return_await_number_table() == 3)
 893   1                      {
 894   2                              if (return_Two_Menu_F6_E7() == 0)
 895   2                              {
 896   3                                      buf_display[0][7] = 0;
 897   3                                      buf_display[0][6] = 0;
 898   3                                      buf_display[0][5] = 0;
 899   3                                      buf_display[0][4] = 0;
 900   3                              }
 901   2                              else
 902   2                              {
 903   3                                      buf_display[1][3] = 0;
 904   3                                      buf_display[1][2] = 0;
 905   3                                      buf_display[1][1] = 0;
 906   3                                      buf_display[1][0] = 0;
 907   3                              }
 908   2                              display();
 909   2                              set_await_number_table(0);
 910   2                      }
 911   1                      Ds1302_Write_Time();
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 16  

 912   1      }
 913          
 914          void fun16(void) //ÉèÖÃÔÂ·Ý
 915          {
 916   1              if (return_await_number_table() == 1)
 917   1              {
 918   2                      Display_time();
 919   2                      set_await_number_table(2);
 920   2              }
 921   1              if (return_await_number_table() == 3)
 922   1              {
 923   2                      if (return_Two_Menu_F6_E7() == 0)
 924   2                      {
 925   3                              buf_display[1][1] = 0;
 926   3                              buf_display[1][0] = 0;
 927   3                      }
 928   2                      else
 929   2                      {
 930   3                              buf_display[0][7] = 0;
 931   3                              buf_display[0][6] = 0;
 932   3                      }
 933   2                      display();
 934   2                      set_await_number_table(0);
 935   2              }
 936   1              Ds1302_Write_Time();
 937   1      }
 938          
 939          void fun17(void) //ÉèÖÃÈÕÆÚ
 940          {
 941   1              if (return_await_number_table() == 1)
 942   1              {
 943   2                      Display_time();
 944   2                      set_await_number_table(2);
 945   2              }
 946   1              if (return_await_number_table() == 3)
 947   1              {
 948   2                      if (return_Two_Menu_F6_E7() == 0)
 949   2                      {
 950   3                              buf_display[1][3] = 0;
 951   3                              buf_display[1][2] = 0;
 952   3                      }
 953   2                      else
 954   2                      {
 955   3                              buf_display[0][5] = 0;
 956   3                              buf_display[0][4] = 0;
 957   3                      }
 958   2                      display();
 959   2                      set_await_number_table(0);
 960   2              }
 961   1              Ds1302_Write_Time();
 962   1      }
 963          
 964          void fun18(void) //ÉèÖÃÐÇÆÚ
 965          {
 966   1              if (return_await_number_table() == 1)
 967   1              {
 968   2                      Display_time();
 969   2                      set_await_number_table(2);
 970   2              }
 971   1              if (return_await_number_table() == 3)
 972   1              {
 973   2                      buf_display[1][4] = 0;
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 17  

 974   2                      display();
 975   2                      set_await_number_table(0);
 976   2              }
 977   1              Ds1302_Write_Time();
 978   1      }
 979          
 980          void fun19(void) //ÉèÖÃÐ¡Ê±
 981          {
 982   1              if (return_await_number_table() == 1)
 983   1              {
 984   2                      Display_time();
 985   2                      set_await_number_table(2);
 986   2              }
 987   1              if (return_await_number_table() == 3)
 988   1              {
 989   2                      buf_display[0][3] = 0;
 990   2                      buf_display[0][2] = 0;
 991   2                      display();
 992   2                      set_await_number_table(0);
 993   2              }
 994   1              Ds1302_Write_Time();
 995   1      }
 996          
 997          void fun20(void) //ÉèÖÃ·ÖÖÓ
 998          {
 999   1              unsigned char temp;
1000   1              temp = return_Two_Menu_FC_E1();
1001   1              if (temp == 1)//Èç¹ûÎª----  Ôò²»ÈÃ½øÈëF0
1002   1              {
1003   2                      set_func_index(ONE_MENU_F0);
1004   2              }
1005   1              else
1006   1              {
1007   2                      if (return_await_number_table() == 1)
1008   2                      {
1009   3                              Display_time();
1010   3                              set_await_number_table(2);
1011   3                      }
1012   2                      if (return_await_number_table() == 3)
1013   2                      {
1014   3                              buf_display[0][1] = 0;
1015   3                              buf_display[0][0] = 0;
1016   3                              display();
1017   3                              set_await_number_table(0);
1018   3                      }
1019   2                      Ds1302_Write_Time();
1020   2              }
1021   1      }
1022          
1023          void fun21(void) //¶þ¼¶²Ëµ¥F1-E1
1024          {
1025   1              tm1629_E(0x01);
1026   1              Two_Menu_F1_E1[0] = 0;
1027   1              Two_Menu_F1_E1[1] = 0;
1028   1              Two_Menu_F1_E1[2] = 0;
1029   1              Two_Menu_F1_E1[3] = 1;
1030   1      }
1031          
1032          void fun22(void) //¶þ¼¶²Ëµ¥F1-E2
1033          {
1034   1              tm1629_E(0x02);
1035   1              Two_Menu_F1_E2[0] = 0;
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 18  

1036   1              Two_Menu_F1_E2[1] = 0;
1037   1              Two_Menu_F1_E2[2] = 0;
1038   1              Two_Menu_F1_E2[3] = 1;
1039   1      }
1040          
1041          void fun23(void) //¶þ¼¶²Ëµ¥F1-E3
1042          {
1043   1              tm1629_E(0x03);
1044   1              Two_Menu_F1_E3[0] = 0;
1045   1              Two_Menu_F1_E3[1] = 0;
1046   1              Two_Menu_F1_E3[2] = 0;
1047   1              Two_Menu_F1_E3[3] = 1;
1048   1      }
1049          
1050          void fun24(void) //¶þ¼¶²Ëµ¥F1-E4
1051          {
1052   1              tm1629_E(0x04);
1053   1              Two_Menu_F1_E4[0] = 0;
1054   1              Two_Menu_F1_E4[1] = 0;
1055   1              Two_Menu_F1_E4[2] = 0;
1056   1              Two_Menu_F1_E4[3] = 1;
1057   1      }
1058          
1059          void fun25(void) //¶þ¼¶²Ëµ¥F2-E1
1060          {
1061   1              tm1629_E(0x01);
1062   1              Two_Menu_F2_E1[0] = 0;
1063   1              Two_Menu_F2_E1[1] = 0;
1064   1              Two_Menu_F2_E1[2] = 0;
1065   1              Two_Menu_F2_E1[3] = 1;
1066   1      }
1067          
1068          void fun26(void) //¶þ¼¶²Ëµ¥F2-E2
1069          {
1070   1              tm1629_E(0x02);
1071   1              Two_Menu_F2_E2[0] = 0;
1072   1              Two_Menu_F2_E2[1] = 0;
1073   1              Two_Menu_F2_E2[2] = 0;
1074   1              Two_Menu_F2_E2[3] = 1;
1075   1      }
1076          
1077          void fun27(void) //¶þ¼¶²Ëµ¥F2-E3
1078          {
1079   1              tm1629_E(0x03);
1080   1              Two_Menu_F2_E3[0] = 0;
1081   1              Two_Menu_F2_E3[1] = 0;
1082   1              Two_Menu_F2_E3[2] = 0;
1083   1              Two_Menu_F2_E3[3] = 1;
1084   1      }
1085          
1086          void fun28(void) //¶þ¼¶²Ëµ¥F2-E4
1087          {
1088   1              tm1629_E(0x04);
1089   1              Two_Menu_F2_E4[0] = 0;
1090   1              Two_Menu_F2_E4[1] = 0;
1091   1              Two_Menu_F2_E4[2] = 0;
1092   1              Two_Menu_F2_E4[3] = 1;
1093   1      }
1094          
1095          void fun29(void) //¶þ¼¶²Ëµ¥F3-E1
1096          {
1097   1              tm1629_E(0x01);
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 19  

1098   1      }
1099          
1100          void fun30(void) //¶þ¼¶²Ëµ¥F3-E2
1101          {
1102   1              tm1629_E(0x02);
1103   1      }
1104          
1105          void fun31(void) //¶þ¼¶²Ëµ¥F4
1106          {
1107   1              unsigned char temp = 0;
1108   1              temp = return_Two_Menu_F4_E1();
1109   1              Show_two_number(temp);
1110   1      }
1111          
1112          void fun32(void) //¶þ¼¶²Ëµ¥F5
1113          {
1114   1              unsigned char temp = 0;
1115   1              temp = return_Two_Menu_F5_E1();
1116   1              Show_two_number(temp);
1117   1      }
1118          
1119          void fun33(void) //¶þ¼¶²Ëµ¥F6-E1
1120          {
1121   1              tm1629_E(0x01);
1122   1      }
1123          
1124          void fun34(void) //¶þ¼¶²Ëµ¥F6-E2
1125          {
1126   1              tm1629_E(0x02);
1127   1      }
1128          
1129          void fun35(void) //¶þ¼¶²Ëµ¥F6-E3
1130          {
1131   1              tm1629_E(0x03);
1132   1      }
1133          
1134          void fun36(void) //¶þ¼¶²Ëµ¥F6-E4
1135          {
1136   1              tm1629_E(0x04);
1137   1      }
1138          
1139          void fun37(void) //¶þ¼¶²Ëµ¥F6-E5
1140          {
1141   1              tm1629_E(0x05);
1142   1      }
1143          
1144          void fun38(void) //¶þ¼¶²Ëµ¥F7-E1
1145          {
1146   1              tm1629_E(0x01);
1147   1      }
1148          
1149          void fun39(void) //¶þ¼¶²Ëµ¥F7-E2
1150          {
1151   1              tm1629_E(0x02);
1152   1      }
1153          
1154          void fun40(void) //¶þ¼¶²Ëµ¥F7-E3
1155          {
1156   1              tm1629_E(0x03);
1157   1      }
1158          
1159          void fun41(void) //¶þ¼¶²Ëµ¥F7-E4
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 20  

1160          {
1161   1              tm1629_E(0x04);
1162   1      }
1163          
1164          void fun42(void) //¶þ¼¶²Ëµ¥F8-E1
1165          {
1166   1              tm1629_E(0x01);
1167   1              Two_Menu_F8_E1_save = return_Two_Menu_F8_E1();
1168   1      }
1169          
1170          void fun43(void) //¶þ¼¶²Ëµ¥F8-E2
1171          {
1172   1              tm1629_E(0x02);
1173   1      }
1174          
1175          void fun44(void) //¶þ¼¶²Ëµ¥F9-E1
1176          {
1177   1              tm1629_E(0x01);
1178   1      }
1179          
1180          void fun45(void) //¶þ¼¶²Ëµ¥F9-E2
1181          {
1182   1              tm1629_E(0x02);
1183   1      }
1184          
1185          void fun46(void) //¶þ¼¶²Ëµ¥FA
1186          {
1187   1              unsigned int measure_sync_saved_temp = 0;
1188   1              unsigned int show_temp = 0;
1189   1      
1190   1                      measure_sync_saved_temp = return_RF_trans_count();
1191   1                      show_temp = 10000 / measure_sync_saved_temp;
1192   1                      Show_three_number(show_temp);
1193   1      
1194   1      //              uart_printf("measure_sync_saved_tempÎª %d ! \n\r", measure_sync_saved_temp);
1195   1      //              uart_printf("show_tempÎª %d ! \n\r", show_temp);
1196   1      
1197   1      }
1198          
1199          
1200          void fun47(void) //¶þ¼¶²Ëµ¥Fb
1201          {
1202   1              unsigned char temp = 0;
1203   1              temp = return_Two_Menu_Fb_E1();
1204   1              Show_one_number(temp);
1205   1      }
1206          
1207          void fun48(void) //¶þ¼¶²Ëµ¥FC
1208          {
1209   1              unsigned char temp = 0;
1210   1              temp = return_Two_Menu_FC_E1();
1211   1              Show_one_number(temp);
1212   1      }
1213          
1214          void fun49(void) //¶þ¼¶²Ëµ¥Fd
1215          {
1216   1              unsigned char temp;
1217   1              temp = return_fd_table();
1218   1              if (temp <= 20)
1219   1              {
1220   2                      if (temp < 4)
1221   2                      {
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 21  

1222   3                              display_light(0xff);
1223   3                      }
1224   2                      else if (temp <= 18)
1225   2                      {
1226   3                              display_light(INIT_CODE[temp / 2 - 2]);
1227   3                      }
1228   2                      else
1229   2                      {
1230   3                              display_light(0xff);
1231   3                      }
1232   2                      if (P24 == 1)
1233   2                      {
1234   3                              GD5800_select_chapter(YINGYUEYI);
1235   3                      }
1236   2              }
1237   1              if (temp >20)
1238   1              {
1239   2                      tm1629_clear();
1240   2                      display();
1241   2              }
1242   1              P55 = 0;
1243   1      }
1244          
1245          void fun50(void) //F1_E1 Ç§Î»ÉÁË¸
1246          {
1247   1              if (return_await_number_table() == 1)
1248   1              {
1249   2                      Show_four_number(Two_Menu_F1_E1);
1250   2                      set_await_number_table(2);
1251   2              }
1252   1              if (return_await_number_table() == 3)
1253   1              {
1254   2                      buf_display[0][3] = 0;
1255   2                      display();
1256   2                      set_await_number_table(0);
1257   2              }
1258   1      }
1259          
1260          void fun51(void) //F1_E1 °ÙÎ»ÉÁË¸
1261          {
1262   1              if (return_await_number_table() == 1)
1263   1              {
1264   2                      Show_four_number(Two_Menu_F1_E1);
1265   2                      set_await_number_table(2);
1266   2              }
1267   1              if (return_await_number_table() == 3)
1268   1              {
1269   2                      buf_display[0][2] = 0;
1270   2                      display();
1271   2                      set_await_number_table(0);
1272   2              }
1273   1      }
1274          
1275          void fun52(void)  //F1_E1 Ê®Î»ÉÁË¸
1276          {
1277   1              if (return_await_number_table() == 1)
1278   1              {
1279   2                      Show_four_number(Two_Menu_F1_E1);
1280   2                      set_await_number_table(2);
1281   2              }
1282   1              if (return_await_number_table() == 3)
1283   1              {
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 22  

1284   2                      buf_display[0][1] = 0;
1285   2                      display();
1286   2                      set_await_number_table(0);
1287   2              }
1288   1      }
1289          
1290          void fun53(void) //F1_E1 ¸öÎ»ÉÁË¸
1291          {
1292   1              if (return_await_number_table() == 1)
1293   1              {
1294   2                      Show_four_number(Two_Menu_F1_E1);
1295   2                      set_await_number_table(2);
1296   2              }
1297   1              if (return_await_number_table() == 3)
1298   1              {
1299   2                      buf_display[0][0] = 0;
1300   2                      display();
1301   2                      set_await_number_table(0);
1302   2              }
1303   1      }
1304          
1305          void fun54(void) //F1_E2 Ç§Î»ÉÁË¸
1306          {
1307   1              if (return_await_number_table() == 1)
1308   1              {
1309   2                      Show_four_number(Two_Menu_F1_E2);
1310   2                      set_await_number_table(2);
1311   2              }
1312   1              if (return_await_number_table() == 3)
1313   1              {
1314   2                      buf_display[0][3] = 0;
1315   2                      display();
1316   2                      set_await_number_table(0);
1317   2              }
1318   1      }
1319          
1320          void fun55(void) //F1_E2 °ÙÎ»ÉÁË¸
1321          {
1322   1              if (return_await_number_table() == 1)
1323   1              {
1324   2                      Show_four_number(Two_Menu_F1_E2);
1325   2                      set_await_number_table(2);
1326   2              }
1327   1              if (return_await_number_table() == 3)
1328   1              {
1329   2                      buf_display[0][2] = 0;
1330   2                      display();
1331   2                      set_await_number_table(0);
1332   2              }
1333   1      }
1334          
1335          void fun56(void) //F1_E2 Ê®Î»ÉÁË¸
1336          {
1337   1              if (return_await_number_table() == 1)
1338   1              {
1339   2                      Show_four_number(Two_Menu_F1_E2);
1340   2                      set_await_number_table(2);
1341   2              }
1342   1              if (return_await_number_table() == 3)
1343   1              {
1344   2                      buf_display[0][1] = 0;
1345   2                      display();
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 23  

1346   2                      set_await_number_table(0);
1347   2              }
1348   1      }
1349          
1350          void fun57(void) //F1_E2 ¸öÎ»ÉÁË¸
1351          {
1352   1              if (return_await_number_table() == 1)
1353   1              {
1354   2                      Show_four_number(Two_Menu_F1_E2);
1355   2                      set_await_number_table(2);
1356   2              }
1357   1              if (return_await_number_table() == 3)
1358   1              {
1359   2                      buf_display[0][0] = 0;
1360   2                      display();
1361   2                      set_await_number_table(0);
1362   2              }
1363   1      }
1364          
1365          void fun58(void) //F1_E3 Ç§Î»ÉÁË¸
1366          {
1367   1              if (return_await_number_table() == 1)
1368   1              {
1369   2                      Show_four_number(Two_Menu_F1_E3);
1370   2                      set_await_number_table(2);
1371   2              }
1372   1              if (return_await_number_table() == 3)
1373   1              {
1374   2                      buf_display[0][3] = 0;
1375   2                      display();
1376   2                      set_await_number_table(0);
1377   2              }
1378   1      }
1379          
1380          void fun59(void) //F1_E3 °ÙÎ»ÉÁË¸
1381          {
1382   1              if (return_await_number_table() == 1)
1383   1              {
1384   2                      Show_four_number(Two_Menu_F1_E3);
1385   2                      set_await_number_table(2);
1386   2              }
1387   1              if (return_await_number_table() == 3)
1388   1              {
1389   2                      buf_display[0][2] = 0;
1390   2                      display();
1391   2                      set_await_number_table(0);
1392   2              }
1393   1      }
1394          
1395          void fun60(void) //F1_E3 Ê®Î»ÉÁË¸
1396          {
1397   1              if (return_await_number_table() == 1)
1398   1              {
1399   2                      Show_four_number(Two_Menu_F1_E3);
1400   2                      set_await_number_table(2);
1401   2              }
1402   1              if (return_await_number_table() == 3)
1403   1              {
1404   2                      buf_display[0][1] = 0;
1405   2                      display();
1406   2                      set_await_number_table(0);
1407   2              }
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 24  

1408   1      }
1409          
1410          void fun61(void) //F1_E3 ¸öÎ»ÉÁË¸
1411          {
1412   1              if (return_await_number_table() == 1)
1413   1              {
1414   2                      Show_four_number(Two_Menu_F1_E3);
1415   2                      set_await_number_table(2);
1416   2              }
1417   1              if (return_await_number_table() == 3)
1418   1              {
1419   2                      buf_display[0][0] = 0;
1420   2                      display();
1421   2                      set_await_number_table(0);
1422   2              }
1423   1      }
1424          
1425          void fun62(void) //F1_E4 Ç§Î»ÉÁË¸
1426          {
1427   1              if (return_await_number_table() == 1)
1428   1              {
1429   2                      Show_four_number(Two_Menu_F1_E4);
1430   2                      set_await_number_table(2);
1431   2              }
1432   1              if (return_await_number_table() == 3)
1433   1              {
1434   2                      buf_display[0][3] = 0;
1435   2                      display();
1436   2                      set_await_number_table(0);
1437   2              }
1438   1      }
1439          
1440          void fun63(void) //F1_E4 °ÙÎ»ÉÁË¸
1441          {
1442   1              if (return_await_number_table() == 1)
1443   1              {
1444   2                      Show_four_number(Two_Menu_F1_E4);
1445   2                      set_await_number_table(2);
1446   2              }
1447   1              if (return_await_number_table() == 3)
1448   1              {
1449   2                      buf_display[0][2] = 0;
1450   2                      display();
1451   2                      set_await_number_table(0);
1452   2              }
1453   1      }
1454          
1455          void fun64(void) //F1_E4 Ê®Î»ÉÁË¸
1456          {
1457   1              if (return_await_number_table() == 1)
1458   1              {
1459   2                      Show_four_number(Two_Menu_F1_E4);
1460   2                      set_await_number_table(2);
1461   2              }
1462   1              if (return_await_number_table() == 3)
1463   1              {
1464   2                      buf_display[0][1] = 0;
1465   2                      display();
1466   2                      set_await_number_table(0);
1467   2              }
1468   1      }
1469          
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 25  

1470          void fun65(void) //F1_E4 ¸öÎ»ÉÁË¸
1471          {
1472   1              if (return_await_number_table() == 1)
1473   1              {
1474   2                      Show_four_number(Two_Menu_F1_E4);
1475   2                      set_await_number_table(2);
1476   2              }
1477   1              if (return_await_number_table() == 3)
1478   1              {
1479   2                      buf_display[0][0] = 0;
1480   2                      display();
1481   2                      set_await_number_table(0);
1482   2              }
1483   1      }
1484          
1485          void fun66(void) //F2_E1 Ç§Î»ÉÁË¸
1486          {
1487   1              if (return_await_number_table() == 1)
1488   1              {
1489   2                      Show_four_number(Two_Menu_F2_E1);
1490   2                      set_await_number_table(2);
1491   2              }
1492   1              if (return_await_number_table() == 3)
1493   1              {
1494   2                      buf_display[0][3] = 0;
1495   2                      display();
1496   2                      set_await_number_table(0);
1497   2              }
1498   1      }
1499          
1500          void fun67(void) //F2_E1 °ÙÎ»ÉÁË¸
1501          {
1502   1              if (return_await_number_table() == 1)
1503   1              {
1504   2                      Show_four_number(Two_Menu_F2_E1);
1505   2                      set_await_number_table(2);
1506   2              }
1507   1              if (return_await_number_table() == 3)
1508   1              {
1509   2                      buf_display[0][2] = 0;
1510   2                      display();
1511   2                      set_await_number_table(0);
1512   2              }
1513   1      }
1514          
1515          void fun68(void) //F2_E1 Ê®Î»ÉÁË¸
1516          {
1517   1              if (return_await_number_table() == 1)
1518   1              {
1519   2                      Show_four_number(Two_Menu_F2_E1);
1520   2                      set_await_number_table(2);
1521   2              }
1522   1              if (return_await_number_table() == 3)
1523   1              {
1524   2                      buf_display[0][1] = 0;
1525   2                      display();
1526   2                      set_await_number_table(0);
1527   2              }
1528   1      }
1529          
1530          void fun69(void) //F2_E1 ¸öÎ»ÉÁË¸
1531          {
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 26  

1532   1              if (return_await_number_table() == 1)
1533   1              {
1534   2                      Show_four_number(Two_Menu_F2_E1);
1535   2                      set_await_number_table(2);
1536   2              }
1537   1              if (return_await_number_table() == 3)
1538   1              {
1539   2                      buf_display[0][0] = 0;
1540   2                      display();
1541   2                      set_await_number_table(0);
1542   2              }
1543   1      }
1544          
1545          void fun70(void) //F2_E2 Ç§Î»ÉÁË¸
1546          {
1547   1              if (return_await_number_table() == 1)
1548   1              {
1549   2                      Show_four_number(Two_Menu_F2_E2);
1550   2                      set_await_number_table(2);
1551   2              }
1552   1              if (return_await_number_table() == 3)
1553   1              {
1554   2                      buf_display[0][3] = 0;
1555   2                      display();
1556   2                      set_await_number_table(0);
1557   2              }
1558   1      }
1559          
1560          void fun71(void) //F2_E2 °ÙÎ»ÉÁË¸
1561          {
1562   1              if (return_await_number_table() == 1)
1563   1              {
1564   2                      Show_four_number(Two_Menu_F2_E2);
1565   2                      set_await_number_table(2);
1566   2              }
1567   1              if (return_await_number_table() == 3)
1568   1              {
1569   2                      buf_display[0][2] = 0;
1570   2                      display();
1571   2                      set_await_number_table(0);
1572   2              }
1573   1      }
1574          
1575          void fun72(void) //F2_E2 Ê®Î»ÉÁË¸
1576          {
1577   1              if (return_await_number_table() == 1)
1578   1              {
1579   2                      Show_four_number(Two_Menu_F2_E2);
1580   2                      set_await_number_table(2);
1581   2              }
1582   1              if (return_await_number_table() == 3)
1583   1              {
1584   2                      buf_display[0][1] = 0;
1585   2                      display();
1586   2                      set_await_number_table(0);
1587   2              }
1588   1      }
1589          
1590          void fun73(void) //F2_E2 ¸öÎ»ÉÁË¸
1591          {
1592   1              if (return_await_number_table() == 1)
1593   1              {
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 27  

1594   2                      Show_four_number(Two_Menu_F2_E2);
1595   2                      set_await_number_table(2);
1596   2              }
1597   1              if (return_await_number_table() == 3)
1598   1              {
1599   2                      buf_display[0][0] = 0;
1600   2                      display();
1601   2                      set_await_number_table(0);
1602   2              }
1603   1      }
1604          
1605          void fun74(void) //F2_E3 Ç§Î»ÉÁË¸
1606          {
1607   1              if (return_await_number_table() == 1)
1608   1              {
1609   2                      Show_four_number(Two_Menu_F2_E3);
1610   2                      set_await_number_table(2);
1611   2              }
1612   1              if (return_await_number_table() == 3)
1613   1              {
1614   2                      buf_display[0][3] = 0;
1615   2                      display();
1616   2                      set_await_number_table(0);
1617   2              }
1618   1      }
1619          
1620          void fun75(void) //F2_E3 °ÙÎ»ÉÁË¸
1621          {
1622   1              if (return_await_number_table() == 1)
1623   1              {
1624   2                      Show_four_number(Two_Menu_F2_E3);
1625   2                      set_await_number_table(2);
1626   2              }
1627   1              if (return_await_number_table() == 3)
1628   1              {
1629   2                      buf_display[0][2] = 0;
1630   2                      display();
1631   2                      set_await_number_table(0);
1632   2              }
1633   1      }
1634          
1635          void fun76(void) //F2_E3 Ê®Î»ÉÁË¸
1636          {
1637   1              if (return_await_number_table() == 1)
1638   1              {
1639   2                      Show_four_number(Two_Menu_F2_E3);
1640   2                      set_await_number_table(2);
1641   2              }
1642   1              if (return_await_number_table() == 3)
1643   1              {
1644   2                      buf_display[0][1] = 0;
1645   2                      display();
1646   2                      set_await_number_table(0);
1647   2              }
1648   1      }
1649          
1650          void fun77(void) //F2_E3 ¸öÎ»ÉÁË¸
1651          {
1652   1              if (return_await_number_table() == 1)
1653   1              {
1654   2                      Show_four_number(Two_Menu_F2_E3);
1655   2                      set_await_number_table(2);
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 28  

1656   2              }
1657   1              if (return_await_number_table() == 3)
1658   1              {
1659   2                      buf_display[0][0] = 0;
1660   2                      display();
1661   2                      set_await_number_table(0);
1662   2              }
1663   1      }
1664          
1665          void fun78(void) //F2_E4 Ç§Î»ÉÁË¸
1666          {
1667   1              if (return_await_number_table() == 1)
1668   1              {
1669   2                      Show_four_number(Two_Menu_F2_E4);
1670   2                      set_await_number_table(2);
1671   2              }
1672   1              if (return_await_number_table() == 3)
1673   1              {
1674   2                      buf_display[0][3] = 0;
1675   2                      display();
1676   2                      set_await_number_table(0);
1677   2              }
1678   1      }
1679          
1680          void fun79(void) //F2_E4 °ÙÎ»ÉÁË¸
1681          {
1682   1              if (return_await_number_table() == 1)
1683   1              {
1684   2                      Show_four_number(Two_Menu_F2_E4);
1685   2                      set_await_number_table(2);
1686   2              }
1687   1              if (return_await_number_table() == 3)
1688   1              {
1689   2                      buf_display[0][2] = 0;
1690   2                      display();
1691   2                      set_await_number_table(0);
1692   2              }
1693   1      }
1694          
1695          void fun80(void) //F2_E4 Ê®Î»ÉÁË¸
1696          {
1697   1              if (return_await_number_table() == 1)
1698   1              {
1699   2                      Show_four_number(Two_Menu_F2_E4);
1700   2                      set_await_number_table(2);
1701   2              }
1702   1              if (return_await_number_table() == 3)
1703   1              {
1704   2                      buf_display[0][1] = 0;
1705   2                      display();
1706   2                      set_await_number_table(0);
1707   2              }
1708   1      }
1709          
1710          void fun81(void) //F2_E4 ¸öÎ»ÉÁË¸
1711          {
1712   1              if (return_await_number_table() == 1)
1713   1              {
1714   2                      Show_four_number(Two_Menu_F2_E4);
1715   2                      set_await_number_table(2);
1716   2              }
1717   1              if (return_await_number_table() == 3)
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 29  

1718   1              {
1719   2                      buf_display[0][0] = 0;
1720   2                      display();
1721   2                      set_await_number_table(0);
1722   2              }
1723   1      }
1724          
1725          void fun82(void) //ÏÔÊ¾¼´Ê±ÏÔÊ¾ »¹ÊÇÑ­»·ÏÔÊ¾
1726          {
1727   1              unsigned char temp=0;
1728   1              temp = return_Two_Menu_F3_E1();
1729   1              Show_one_number(temp);
1730   1      }
1731          
1732          void fun83(void) //¶ÓÁÐ´æ´¢¸öÊý
1733          {
1734   1              unsigned char temp = 0;
1735   1              temp = return_Two_Menu_F3_E2();
1736   1              Show_two_number(temp);
1737   1      }
1738          
1739          void fun84(void) //F6_E1ÓïÒôÑ¡Ôñ
1740          {
1741   1              unsigned char temp = 0;
1742   1              temp = return_Two_Menu_F6_E1();
1743   1              Show_one_number(temp);
1744   1      }
1745          
1746          void fun85(void) //F6_E2ÓïÒô±¨¶Á´ÎÊý
1747          {
1748   1              unsigned char temp = 0;
1749   1              temp = return_Two_Menu_F6_E2();
1750   1              Show_one_number(temp);
1751   1      }
1752          
1753          void fun86(void) //F6_E3Ñ­»·Ê±ºòÊÇ·ñ±¨¶Á
1754          {
1755   1              unsigned char temp = 0;
1756   1              temp = return_Two_Menu_F6_E3();
1757   1              Show_one_number(temp);
1758   1      }
1759          
1760          void fun87(void) //F6_E4ÒôÁ¿´óÐ¡µ÷Õû
1761          {
1762   1              unsigned char temp = 0;
1763   1              temp = return_Two_Menu_F6_E4();
1764   1              GD5800_sound_volume(temp * 3);
1765   1              Show_one_number(temp);
1766   1      }
1767          
1768          void fun88(void) //F6_E5ÆÁÄ»ÁÁ¶Èµ÷Õû
1769          {
1770   1              unsigned char temp = 0;
1771   1              temp = return_Two_Menu_F6_E5();
1772   1              Show_one_number(temp);
1773   1      }
1774          
1775          void fun89(void) //F7_E1 999*9
1776          {
1777   1              unsigned char temp = 0;
1778   1              temp = return_Two_Menu_F7_E1();
1779   1              if (temp < 10)
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 30  

1780   1              {
1781   2                      Show_one_number(temp);
1782   2              }
1783   1              else
1784   1              {
1785   2                      Show_off();
1786   2              }
1787   1      }
1788          
1789          void fun90(void) //F7_E2 9999*9
1790          {
1791   1              unsigned char temp = 0;
1792   1              temp = return_Two_Menu_F7_E2();
1793   1              Show_one_number(temp);
1794   1      }
1795          
1796          void fun91(void) //F7_E3 999*99
1797          {
1798   1              unsigned char temp = 0;
1799   1              temp = return_Two_Menu_F7_E3();
1800   1              Show_one_number(temp);
1801   1      }
1802          
1803          void fun92(void) //F7_E4 9999*99
1804          {
1805   1              unsigned char temp = 0;
1806   1              temp = return_Two_Menu_F7_E4();
1807   1              Show_one_number(temp);
1808   1      }
1809          
1810          void fun93(void) //F8_E1µ¥¼üÎ»¸ú¶à¼üÎ»ÇÐ»»
1811          {
1812   1              unsigned char temp = 0;
1813   1              temp = return_Two_Menu_F8_E1();
1814   1              Show_one_number(temp);
1815   1              if (temp != Two_Menu_F8_E1_save)
1816   1              {
1817   2                      Delete_all_data();
1818   2                      Two_Menu_F8_E1_save = temp;
1819   2                      if (return_sound_table() == 1)
1820   2                      {
1821   3                              GD5800_select_chapter(CHENGGONG);
1822   3      
1823   3                              set_sound_table(0);
1824   3                      }
1825   2              }
1826   1      }
1827          
1828          void fun94(void) //F8_E2¼üÎ»ÉèÖÃ
1829          {
1830   1              unsigned char temp = 0;
1831   1              temp = return_Two_Menu_F8_E2();
1832   1              Show_two_number(temp);
1833   1              if (return_sound_table() == 1 )
1834   1              {
1835   2                      GD5800_select_chapter_new(temp + QUXIAO);
1836   2              }
1837   1              if (return_Two_menu_set_success() == 1)
1838   1              {
1839   2                      GD5800_select_chapter_new(CHENGGONG);
1840   2                      set_Two_menu_set_success(0);
1841   2              }
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 31  

1842   1      }
1843          
1844          void fun95(void) //½âÂë²Ëµ¥
1845          {
1846   1              unsigned char Two_Menu_F6_E1_temp = 0;
1847   1              unsigned char Two_Menu_F6_E8_temp = 0;
1848   1              Two_Menu_F6_E1_temp = return_Two_Menu_F6_E1();
1849   1              Two_Menu_F6_E8_temp = return_Two_Menu_F6_E8();
1850   1              //tm1629_load();
1851   1              //display();
1852   1      
1853   1              if (  display_ram[0] == BAOJING_1)
1854   1              {
1855   2                      if (P24 == 1)
1856   2                      {
1857   3                              GD5800_select_chapter(BAOJING);
1858   3                      }       
1859   2              }
1860   1              P55 = 1;//ÃëÕëÃð
1861   1              if (Two_Menu_F6_E8_temp == 0)
1862   1              {
1863   2                      P17 = 1;
1864   2              }
1865   1              else
1866   1              {
1867   2                      if (return_await_number_table() == 1)
1868   2                      {
1869   3                              P17 = 1;
1870   3                              set_await_number_table(2);
1871   3                      }
1872   2                      if (return_await_number_table() == 3)
1873   2                      {
1874   3                              P17 = 0;
1875   3                              set_await_number_table(0);
1876   3                      }
1877   2              }
1878   1              
1879   1              
1880   1      }
1881          
1882          void fun96(void) //¶þ¼¶²Ëµ¥F6-E6
1883          {
1884   1              tm1629_E(0x06);
1885   1      }
1886          
1887          void fun97(void) //¶þ¼¶²Ëµ¥F6-E6
1888          {
1889   1              unsigned char temp = 0;
1890   1              temp = return_Two_Menu_F6_E6();
1891   1              Show_one_number(temp);
1892   1      }
1893          
1894          void fun98(void) //¶þ¼¶²Ëµ¥F6-E7
1895          {
1896   1              tm1629_E(0x07);
1897   1      }
1898          
1899          void fun99(void) //¶þ¼¶²Ëµ¥F6-E7
1900          {
1901   1              unsigned char temp = 0;
1902   1              temp = return_Two_Menu_F6_E7();
1903   1              Show_one_number(temp);
C51 COMPILER V9.00   TM1629                                                                11/20/2015 15:15:19 PAGE 32  

1904   1      }
1905          
1906          void fun100(void) //¶þ¼¶²Ëµ¥F6-E8
1907          {
1908   1              tm1629_E(0x08);
1909   1      }
1910          
1911          void fun101(void) //¶þ¼¶²Ëµ¥F6-E8
1912          {
1913   1              unsigned char temp = 0;
1914   1              temp = return_Two_Menu_F6_E8();
1915   1              Show_one_number(temp);
1916   1      }
1917          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   7375    ----
   CONSTANT SIZE    =     32    ----
   XDATA SIZE       =    913      88
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
