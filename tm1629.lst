C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE TM1629
OBJECT MODULE PLACED IN tm1629.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Receiver\tm1629.c LARGE BROWSE INCDIR(.\Receiver) DEBUG OBJECTEXTEND PRINT(
                    -.\tm1629.lst) OBJECT(tm1629.obj)

line level    source

   1          #include "tm1629.h"
   2          #include "timer.h"
   3          #include "usart.h"
   4          #include "ds1302.h"
   5          #include "key.h"
   6          #include "menu.h"
   7          #include "gd5800.h"
   8          
   9          unsigned char const CODE[] = { 0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07, 0x7F, 0x6F, 0x77, 0x7C, 0x3
             -9, 0x5E, 0x79, 0x71, 0x76, 0x38, 0x5c, 0x73, 0x3e };//0-9 abcdef ÏÔÊ¾Æ÷ÂëÊý×é
  10          unsigned char const INIT_CODE[] = { 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80 };//Öð¶ÎµãÁÁÊýÂë¹ÜÊý×é
  11          unsigned char const SHANGSHUO[] = { 0x40, 0x00 }; // µãÁÁÊýÂë¹ÜÖÐ¼ä¶ÎÒÔ¼°Ãð
  12          unsigned char buf_display[6][8] = { 0 }; //3¸öTM1629ÏÔ´æÊý×é
  13          unsigned char display_ram[240] = { 0 }; //³ÌÐòÔËÐÐÊ±¼ÇÂ¼ÏÔÊ¾Êý¾ÝµÄÄÚ´æ 
  14          unsigned char await_time_table= 0 ;//ÓÃÓÚ¼ÇÂ¼´ý»úÏÔÊ¾ºá¸ÜÊýÂë¹Ü´ÎÊý 
  15          
  16          unsigned char single_key[16]   = { 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
             - 0x01, 0x01, 0x01, 0x01 };//µ¥¼üÎ»ÉèÖÃ´æ´¢Êý×é
  17          unsigned char multiple_key[16] = { 0x01, QUXIAO-QUXIAO, JIEZHANG-QUXIAO, 0x01, JIUSHUI-QUXIAO, 0X01, 0x01,
             - 0x01, HUJIAO - QUXIAO, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01 };//¶à¼üÎ»ÉèÖÃ´æ´¢Êý×é
  18          
  19          void writeDataTo1629(unsigned char p) //Ð´Êý¾Ý¸øµÚÒ»¸öTM1629
  20          {
  21   1              unsigned int i;
  22   1              TM1629_STB = 0;
  23   1              for (i = 0; i<8; i++)
  24   1              {
  25   2                      TM1629_CLK = 0;
  26   2                      if (p & 0x01)
  27   2                              TM1629_DIO = 1;
  28   2                      else
  29   2                              TM1629_DIO = 0;
  30   2                      _nop_();
  31   2                      _nop_();
  32   2                      _nop_();
  33   2                      _nop_();
  34   2                      TM1629_CLK = 1;
  35   2                      p = p >> 1;
  36   2              }
  37   1              TM1629_CLK = 0;
  38   1              TM1629_DIO = 0;
  39   1      }
  40          
  41          void writeDataTo1629_2(unsigned char p) //Ð´Êý¾Ý¸øµÚ¶þ¸öTM1629
  42          {
  43   1              unsigned int i;
  44   1              TM1629_STB2 = 0;
  45   1              for (i = 0; i<8; i++)
  46   1              {
  47   2                      TM1629_CLK = 0;
  48   2                      if (p & 0x01)
  49   2                              TM1629_DIO = 1;
  50   2                      else
  51   2                              TM1629_DIO = 0;
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 2   

  52   2                      _nop_();
  53   2                      _nop_();
  54   2                      _nop_();
  55   2                      _nop_();
  56   2                      TM1629_CLK = 1;
  57   2                      p = p >> 1;
  58   2              }
  59   1              TM1629_CLK = 0;
  60   1              TM1629_DIO = 0;
  61   1      }
  62          
  63          void writeDataTo1629_3(unsigned char p) //Ð´Êý¾Ý¸øµÚÈý¸öTM1629
  64          {
  65   1              unsigned int i;
  66   1              TM1629_STB3 = 0;
  67   1              for (i = 0; i<8; i++)
  68   1              {
  69   2                      TM1629_CLK = 0;
  70   2                      if (p & 0x01)
  71   2                              TM1629_DIO = 1;
  72   2                      else
  73   2                              TM1629_DIO = 0;
  74   2                      _nop_();
  75   2                      _nop_();
  76   2                      _nop_();
  77   2                      _nop_();
  78   2                      TM1629_CLK = 1;
  79   2                      p = p >> 1;
  80   2              }
  81   1              TM1629_CLK = 0;
  82   1              TM1629_DIO = 0;
  83   1      }
  84          
  85          void send_command(unsigned char word) //Ð´ÃüÁî¸øµÚÒ»¸öTM1629
  86          {
  87   1              TM1629_STB = 1;
  88   1              nop;
  89   1              TM1629_STB = 0;
  90   1              writeDataTo1629(word);
  91   1      }
  92          
  93          void send_command_2(unsigned char word) //Ð´ÃüÁî¸øµÚ¶þ¸öTM1629
  94          {
  95   1              TM1629_STB2 = 1;
  96   1              nop;
  97   1              TM1629_STB2 = 0;
  98   1              writeDataTo1629_2(word);
  99   1      }
 100          
 101          void send_command_3(unsigned char word) //Ð´ÃüÁî¸øµÚÈý¸öTM1629
 102          {
 103   1              TM1629_STB3 = 1;
 104   1              nop;
 105   1              TM1629_STB3 = 0;
 106   1              writeDataTo1629_3(word);
 107   1      }
 108          
 109          void display(void) //3¸öTM1629ÏÔÊ¾º¯Êý
 110          {
 111   1              unsigned char i,temp;
 112   1              temp = return_Two_Menu_F6_E5();
 113   1              send_command(0x40);     //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 3   

 114   1              send_command(0xc0);     //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 115   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 116   1              {
 117   2                      writeDataTo1629(buf_display[0][i]);
 118   2                      writeDataTo1629(buf_display[1][i]);
 119   2              }
 120   1              send_command(0x88 + temp);      //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 121   1              TM1629_STB = 1;
 122   1      
 123   1              send_command_2(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 124   1              send_command_2(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 125   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 126   1              {
 127   2                      writeDataTo1629_2(buf_display[2][i]);
 128   2                      writeDataTo1629_2(buf_display[3][i]);
 129   2              }
 130   1              send_command_2(0x88 + temp);    //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 131   1              TM1629_STB2 = 1;
 132   1      
 133   1              send_command_3(0x40);   //ÉèÖÃÊý¾ÝÃüÁî:ÆÕÍ¨Ä£Ê½¡¢µØÖ·×ÔÔö1£¬Ð´Êý¾Ýµ½ÏÔ´æ
 134   1              send_command_3(0xc0);   //ÉèÖÃÏÔÊ¾µØÖ·ÃüÁî£º´Ó00H¿ªÊ¼
 135   1              for (i = 0; i<8; i++)   //·¢ËÍ16×Ö½ÚµÄÏÔ´æÊý¾Ý
 136   1              {
 137   2                      writeDataTo1629_3(buf_display[4][i]);
 138   2                      writeDataTo1629_3(buf_display[5][i]);
 139   2              }
 140   1              send_command_3(0x88 + temp);    //ÉèÖÃÏÔÊ¾¿ØÖÆÃüÁî£º´ò¿ªÏÔÊ¾£¬²¢ÉèÖÃÎª11/16.
 141   1              TM1629_STB3 = 1;
 142   1      }
 143          
 144          
 145          void tm1629_init(void) //TM1629¿ª»ú³õÊ¼»¯º¯Êý
 146          {
 147   1              unsigned char i, j, k;          //k¿ØÖÆÏÔÊ¾µÄ¾ßÌåÊý×Ö£¬iºÍj¿ØÖÆbuf_displayµÄË¢ÐÂ
 148   1              for (k = 0; k<8; k++)
 149   1              {
 150   2                      for (i = 0; i<6; i++)
 151   2                      {
 152   3                              for (j = 0; j<8; j++)
 153   3                              {
 154   4                                      buf_display[i][j] = INIT_CODE[k];
 155   4                              }
 156   3                      }
 157   2                      display();
 158   2                      Tm1629_delay(30);
 159   2              }
 160   1      }
 161          
 162          
 163          void Tm1629_delay(unsigned char k) //ÑÓÊ±º¯Êý
 164          {
 165   1              unsigned char i, j;
 166   1              for (; k>0; k--)
 167   1              {
 168   2                      for (i = 255; i>0; i--)
 169   2                      {
 170   3                              for (j = 255; j>0; j--)
 171   3                              {
 172   4                                      ;
 173   4      
 174   4                              }
 175   3                      }
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 4   

 176   2              }
 177   1      }
 178          
 179          void tm1629_clear(void)//È«²¿¹éÁã
 180          {
 181   1              unsigned char i, j;
 182   1              for (i = 0; i<6; i++)
 183   1              {
 184   2                      for (j = 0; j<8; j++)
 185   2                      {
 186   3                              buf_display[i][j] = 0x00;
 187   3                      }
 188   2              }
 189   1      }
 190          
 191          void tm1629_display_buff_clear(void)//Çå³ý¶ÓÁÐ»º´æ
 192          {
 193   1              unsigned char i;
 194   1              for (i = 0; i<120; i++)
 195   1                      display_ram[i] = 0;
 196   1      }
 197          
 198          void tm1629_await(void)
 199          {
 200   1              unsigned char i;        //k¿ØÖÆÏÔÊ¾µÄ¾ßÌåÊý×Ö£¬iºÍj¿ØÖÆbuf_displayµÄË¢ÐÂ
 201   1              unsigned char await_number_table_temp = 0;
 202   1              await_number_table_temp = return_await_number_table();
 203   1              if (await_number_table_temp == 1)
 204   1              {
 205   2                      //GD5800_select_chapter(0x0008) ;
 206   2                      tm1629_clear();
 207   2                      i = await_time_table & 0x03;
 208   2                      buf_display[0][i] = 0x40;
 209   2                      display();
 210   2                      set_await_number_table(0);
 211   2                      await_time_table++;
 212   2                      if (await_time_table == 4)
 213   2                              await_time_table = 0;
 214   2              }
 215   1      }
 216          
 217          void Display_time(void)
 218          {
 219   1              tm1629_clear();
 220   1              Ds1302_Read_Time(); 
 221   1              buf_display[1][7] = CODE[2];                            //Äê
 222   1              buf_display[1][6] = CODE[0];
 223   1              buf_display[1][5] = CODE[time_buf1[1] / 10];
 224   1              buf_display[1][4] = CODE[time_buf1[1] % 10];
 225   1      
 226   1              buf_display[1][3] = 0x40;                                        // -
 227   1              
 228   1              buf_display[1][2] = CODE[time_buf1[2] / 10]; //ÔÂ
 229   1              buf_display[1][1] = CODE[time_buf1[2] % 10];
 230   1      
 231   1              buf_display[1][0] = 0x40;                                        // -
 232   1      
 233   1              buf_display[0][7] = CODE[time_buf1[3] / 10];
 234   1              buf_display[0][6] = CODE[time_buf1[3] % 10];//ÈÕ
 235   1      
 236   1              buf_display[0][5] = CODE[time_buf1[7]];         //ÐÇÆÚ
 237   1      
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 5   

 238   1              buf_display[0][3] = CODE[time_buf1[4] / 10]; //Ð¡Ê±
 239   1              buf_display[0][2] = CODE[time_buf1[4] % 10];
 240   1              buf_display[0][1] = CODE[time_buf1[5] / 10]; //Ð¡Ê±
 241   1              buf_display[0][0] = CODE[time_buf1[5] % 10];
 242   1      
 243   1              display();
 244   1      
 245   1      }
 246          
 247          void tm1629_f(unsigned char f_number) //µÚÒ»ÐÐµ¹Êý¶þ¸öÏÔÊ¾F,µ¹ÊýµÚÒ»¸öÏÔÊ¾f_number
 248          {
 249   1              tm1629_clear();
 250   1              buf_display[0][1] = CODE[0x0f];
 251   1              buf_display[0][0] = CODE[f_number];
 252   1              display();
 253   1      }
 254          
 255          void tm1629_E(unsigned char f_number) //µÚÒ»ÐÐµ¹Êý¶þ¸öÏÔÊ¾F,µ¹ÊýµÚÒ»¸öÏÔÊ¾f_number
 256          {
 257   1              tm1629_clear();
 258   1              buf_display[0][1] = CODE[0x0E];
 259   1              buf_display[0][0] = CODE[f_number];
 260   1              display();
 261   1      }
 262          
 263          void Show_one_number(unsigned char f_number) //ÏÔÊ¾Ò»¸öÊý×Ö
 264          {
 265   1              tm1629_clear();
 266   1              //buf_display[0][1] = CODE[0x0E];
 267   1              buf_display[0][0] = CODE[f_number];
 268   1              display();
 269   1      }
 270          
 271          void Show_two_number(unsigned char f_number) //ÏÔÊ¾Á½¸öÊý×Ö
 272          {
 273   1              tm1629_clear();
 274   1              buf_display[0][1] = CODE[f_number / 10];
 275   1              buf_display[0][0] = CODE[f_number % 10];
 276   1              display();
 277   1      }
 278          
 279          void Show_four_number(unsigned char* temp)
 280          {
 281   1              tm1629_clear();
 282   1              buf_display[0][3] = CODE[*(temp)];
 283   1              buf_display[0][2] = CODE[*(temp+1)];
 284   1              buf_display[0][1] = CODE[*(temp+2)];
 285   1              buf_display[0][0] = CODE[*(temp+3)];
 286   1              display();
 287   1      }
 288          
 289          void tm1629_load(void)
 290          {
 291   1              tm1629_clear();
 292   1              if (*(display_ram + 66) != 0)
 293   1                      mcuram_to_displayram(buf_display[5] + 7, display_ram + 66);
 294   1              if (*(display_ram + 60) != 0)
 295   1                      mcuram_to_displayram(buf_display[5] + 3, display_ram + 60);
 296   1              if (*(display_ram + 54) != 0)
 297   1                      mcuram_to_displayram(buf_display[4] + 7, display_ram + 54);
 298   1              if (*(display_ram + 48) != 0)
 299   1                      mcuram_to_displayram(buf_display[4] + 3, display_ram + 48);
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 6   

 300   1              if (*(display_ram + 42) != 0)
 301   1                      mcuram_to_displayram(buf_display[3] + 7, display_ram + 42);
 302   1              if (*(display_ram + 36) != 0)
 303   1                      mcuram_to_displayram(buf_display[3] + 3, display_ram + 36);
 304   1              if (*(display_ram + 30) != 0)
 305   1                      mcuram_to_displayram(buf_display[2] + 7, display_ram + 30);
 306   1              if (*(display_ram + 24) != 0)
 307   1                      mcuram_to_displayram(buf_display[2] + 3, display_ram + 24);
 308   1              if (*(display_ram + 18) != 0)
 309   1                      mcuram_to_displayram(buf_display[1] + 7, display_ram + 18);
 310   1              if (*(display_ram + 12) != 0)
 311   1                      mcuram_to_displayram(buf_display[1] + 3, display_ram + 12);
 312   1              if (*(display_ram + 6) != 0)
 313   1                      mcuram_to_displayram(buf_display[0] + 7, display_ram + 6);
 314   1              if (*(display_ram + 0) != 0)
 315   1                      mcuram_to_displayram(buf_display[0] + 3, display_ram);
 316   1      }
 317          
 318          void mcuram_to_displayram(unsigned char a[48], unsigned char* b)  //´ÓRAMÇøÓòÒÆµ½ÏÔ´æÇøÓò,Ë³´ø·­Òë³ÉÊýÂë¹Ü
             -ÏÔÊ¾µÄÂë
 319          {
 320   1              /*
 321   1              A// Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 322   1              B// Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 323   1              */
 324   1              *(a) = CODE[*(b + 1)];
 325   1              *(a - 1) = CODE[*(b + 2)];
 326   1              *(a - 2) = CODE[*(b + 3)];
 327   1              *(a - 3) = CODE[*(b + 4)];
 328   1      }
 329          
 330          void decoder_temp_to_mcuram(unsigned char* a, unsigned char* index)//aÎªMCU»º´æÇø   indexÎª½âÂëºóÈ¡³öµÄ8×Ö
             -½ÚÁÙÊ±Êý×é
 331          {
 332   1              *(a + 0) = *(index);
 333   1              *(a + 1) = *(index + 1);
 334   1              *(a + 2) = *(index + 2);
 335   1              *(a + 3) = *(index + 3);
 336   1              *(a + 4) = *(index + 4);
 337   1              *(a + 5) = *(index + 5);
 338   1      }
 339          
 340          void mcuram_to_mcuram_down(unsigned char* a) //aÎªMCURAM»º´æÇøÇø   ÏòÏÂÑ¹Ò»×éÊý¾Ý
 341          {
 342   1              *(a + 6) = *(a);                //ramÇøÔªËØÏÂÒÆ6¸ö
 343   1              *(a + 7) = *(a + 1);
 344   1              *(a + 8) = *(a + 2);
 345   1              *(a + 9) = *(a + 3);
 346   1              *(a + 10) = *(a + 4);
 347   1              *(a + 11) = *(a + 5);
 348   1      
 349   1      }
 350          
 351          void mcuram_to_mcuram_up(unsigned char* a) //aÎªMCURAM»º´æÇøÇø   ÏòÉÏÑ¹Ò»×éÊý¾Ý
 352          {
 353   1              *(a) = *(a + 6);   //ramÇøÔªËØÉÏÒÆ6¸ö
 354   1              *(a + 1) = *(a + 7);
 355   1              *(a + 2) = *(a + 8);
 356   1              *(a + 3) = *(a + 9);
 357   1              *(a + 4) = *(a + 10);
 358   1              *(a + 5) = *(a + 11);
 359   1      }
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 7   

 360          
 361          void CycleProcess(void)
 362          {
 363   1              unsigned char i, index;
 364   1              unsigned char f5_xunhuan, f4_xiaohao, logout_cycle_table_temp;
 365   1              unsigned char temp[6] = { 0 };
 366   1              f5_xunhuan = return_Two_Menu_F5_E1();
 367   1              f4_xiaohao = return_Two_Menu_F4_E1();
 368   1              logout_cycle_table_temp = return_logout_cycle_table();
 369   1              /*Ñ­»·´¦Àíº¯Êý*/
 370   1              if ((f5_xunhuan<f4_xiaohao && logout_cycle_table_temp>f5_xunhuan && f4_xiaohao && f5_xunhuan) || (f4_xiao
             -hao == 0 && f5_xunhuan &&logout_cycle_table_temp>f5_xunhuan))
 371   1              {
 372   2                      for (i = 0; i<10; i++)
 373   2                      {
 374   3                              if (display_ram[i * 6 ] == 0)
 375   3                              {
 376   4                                      index = i;
 377   4                                      break;
 378   4                              }
 379   3                      }
 380   2      
 381   2                      for (i = 0; i<6; i++)
 382   2                      {
 383   3                              temp[i] = display_ram[(index - 1) * 6 + i];
 384   3                      }
 385   2      
 386   2                      for (i = index; i>1; i--)
 387   2                      {
 388   3                              mcuram_to_mcuram_down(display_ram + (i - 2) * 6);
 389   3                      }
 390   2                      for (i = 0; i<6; i++)
 391   2                      {
 392   3                              display_ram[i] = temp[i];
 393   3                      }
 394   2                      tm1629_load();
 395   2                      display();
 396   2                      set_logout_cycle_table(0);
 397   2              }
 398   1      }
 399          
 400          void LogoutProcess(void)
 401          {
 402   1              unsigned char i;
 403   1              unsigned char f5_xunhuan, f4_xiaohao, logout_cycle_table_temp, Two_Menu_F3_E2_temp;
 404   1              f5_xunhuan = return_Two_Menu_F5_E1();
 405   1              f4_xiaohao = return_Two_Menu_F4_E1();
 406   1              logout_cycle_table_temp = return_logout_cycle_table();
 407   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 408   1              /*ÏúºÅ´¦Àíº¯Êý*/
 409   1              if ((f4_xiaohao<f5_xunhuan&& logout_cycle_table_temp>f4_xiaohao && f5_xunhuan && f4_xiaohao) || (f5_xunhu
             -an == 0 && f4_xiaohao && logout_cycle_table_temp>f4_xiaohao))
 410   1              {
 411   2                      for (i = 0; i<(Two_Menu_F3_E2_temp - 1); i++)
 412   2                      {
 413   3                              mcuram_to_mcuram_up(display_ram + i * 6);
 414   3                      }
 415   2                      for (i = (Two_Menu_F3_E2_temp - 1) * 6; i<Two_Menu_F3_E2_temp * 6; i++)
 416   2                      {
 417   3                              display_ram[i] = 0;
 418   3                      }
 419   2                      tm1629_load();
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 8   

 420   2                      display();
 421   2                      set_logout_cycle_table(0);
 422   2                      if (display_ram[0] == 0)
 423   2                      {
 424   3                              set_func_index(MENU_STANDBY);
 425   3                      }
 426   2              }
 427   1      }
 428          
 429          
 430          
 431          
 432          
 433          void Logout(void)
 434          {
 435   1              unsigned char i;
 436   1              unsigned char Two_Menu_F3_E2_temp= 0;
 437   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 438   1              /*ÏúºÅ´¦Àíº¯Êý*/
 439   1              for (i = 0; i<(Two_Menu_F3_E2_temp - 1); i++)
 440   1              {
 441   2                      mcuram_to_mcuram_up(display_ram + i * 6);
 442   2              }
 443   1              for (i = (Two_Menu_F3_E2_temp - 1) * 6; i<Two_Menu_F3_E2_temp * 6; i++)
 444   1              {
 445   2                      display_ram[i] = 0;
 446   2              }
 447   1              tm1629_load();
 448   1              display();
 449   1              if (display_ram[0] == 0)
 450   1              {
 451   2                      set_func_index(MENU_STANDBY);
 452   2              }
 453   1      }
 454          
 455          void CycleUp(void)
 456          {
 457   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 458   1              unsigned char temp[6] = { 0 };
 459   1              index = return_Two_Menu_F3_E2();
 460   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 461   1              /*Ñ­»·´¦Àíº¯Êý*/
 462   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 463   1              {
 464   2                      if (display_ram[i * 6 ] == 0)
 465   2                      {
 466   3                              index = i;
 467   3                              break;
 468   3                      }
 469   2              }
 470   1              for (i = 0; i<6; i++)
 471   1              {
 472   2                      temp[i] = display_ram[i];
 473   2              }
 474   1              for (i = 0; i<index; i++)
 475   1              {
 476   2                      mcuram_to_mcuram_up(display_ram + i * 6);
 477   2              }
 478   1              for (i = 0; i<6; i++)
 479   1              {
 480   2                      display_ram[(index - 1) * 6 + i] = temp[i];
 481   2              }
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 9   

 482   1              tm1629_load();
 483   1              display();
 484   1      }
 485          
 486          void CycleDown(void)
 487          {
 488   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 489   1              unsigned char temp[6] = { 0 };
 490   1              index = return_Two_Menu_F3_E2();
 491   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 492   1              /*Ñ­»·´¦Àíº¯Êý*/
 493   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 494   1              {
 495   2                      if (display_ram[i * 6 ] == 0)
 496   2                      {
 497   3                              index = i;
 498   3                              break;
 499   3                      }
 500   2              }
 501   1      
 502   1              for (i = 0; i<6; i++)
 503   1              {
 504   2                      temp[i] = display_ram[(index - 1) * 6 + i];
 505   2              }
 506   1      
 507   1              for (i = index; i>1; i--)
 508   1              {
 509   2                      mcuram_to_mcuram_down(display_ram + (i - 2) * 6);
 510   2              }
 511   1              for (i = 0; i<6; i++)
 512   1              {
 513   2                      display_ram[i] = temp[i];
 514   2              }
 515   1              tm1629_load();
 516   1              display();
 517   1      }
 518          
 519          void Cancel_funtion(unsigned char* id_number, unsigned char* buff)//id_numberÎª½âÂëµÄtempÊý×é£¬buffÎªÏÔÊ¾»
             -º´æ
 520          {
 521   1              /*
 522   1              id_number  //  ÐòºÅ¡¢½ÓÊÕºÅ*3¡¢ID*3¡¢ÇøºÅ
 523   1              buff    //                ÐòºÅ¡¢Àà±ð¡¢ÇøºÅ¡¢½ÓÊÕºÅ
 524   1              */
 525   1      
 526   1              unsigned char i, index, Two_Menu_F3_E2_temp;
 527   1              unsigned char temp[6] = { 0 };
 528   1              index = return_Two_Menu_F3_E2();
 529   1              Two_Menu_F3_E2_temp = return_Two_Menu_F3_E2();
 530   1      
 531   1              for (i = 0; i<Two_Menu_F3_E2_temp; i++)
 532   1              {
 533   2                      if (*(id_number + 1) == *(buff + i * 6 + 1) && *(id_number + 2) == *(buff + i * 6 + 2) && *(id_number + 
             -3) == *(buff + i * 6 + 3) && *(id_number + 4) == *(buff + i * 6 + 4))
 534   2                      {
 535   3                              index = i;
 536   3                              break;
 537   3                      }
 538   2              }
 539   1              for (i = index; i<Two_Menu_F3_E2_temp; i++)
 540   1              {
 541   2                      mcuram_to_mcuram_up(buff + i * 6);
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 10  

 542   2              }
 543   1              if (index != Two_Menu_F3_E2_temp)
 544   1              {
 545   2                      for (i = 0; i<6; i++)
 546   2                      {
 547   3                              *(buff + (Two_Menu_F3_E2_temp - 1) * 6 + i) = 0;
 548   3                      }
 549   2              }
 550   1              if (*(buff) == 0)
 551   1              {
 552   2                      set_func_index(MENU_STANDBY);
 553   2              }
 554   1      }
 555          
 556          
 557          void fun0(void) //´ý»úÏÔÊ¾º¯Êý
 558          {
 559   1              unsigned char temp = 0;
 560   1              temp = return_Two_Menu_FC_E1();
 561   1              if (temp == 1)
 562   1              {
 563   2                      tm1629_await();
 564   2              }
 565   1              else
 566   1              {
 567   2                      Display_time();
 568   2              }
 569   1              tm1629_display_buff_clear();
 570   1      }
 571          
 572          void fun1(void) //Ò»¼¶²Ëµ¥F0
 573          {
 574   1              tm1629_f(0x00);
 575   1      }
 576          
 577          void fun2(void) //Ò»¼¶²Ëµ¥F1
 578          {
 579   1              tm1629_f(0x01);
 580   1      }
 581          
 582          void fun3(void) //Ò»¼¶²Ëµ¥F2
 583          {
 584   1              tm1629_f(0x02);
 585   1      }
 586          
 587          void fun4(void) //Ò»¼¶²Ëµ¥F3
 588          {
 589   1              tm1629_f(0x03);
 590   1      }
 591          
 592          void fun5(void) //Ò»¼¶²Ëµ¥F4
 593          {
 594   1              tm1629_f(0x04);
 595   1      }
 596          
 597          void fun6(void) //Ò»¼¶²Ëµ¥F5
 598          {
 599   1              tm1629_f(0x05);
 600   1      }
 601          
 602          void fun7(void) //Ò»¼¶²Ëµ¥F6
 603          {
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 11  

 604   1              tm1629_f(0x06);
 605   1      }
 606          
 607          void fun8(void) //Ò»¼¶²Ëµ¥F7
 608          {
 609   1              tm1629_f(0x07);
 610   1      }
 611          
 612          void fun9(void) //Ò»¼¶²Ëµ¥F8
 613          {
 614   1              tm1629_f(0x08);
 615   1      }
 616          
 617          void fun10(void) //Ò»¼¶²Ëµ¥F9
 618          {
 619   1              tm1629_f(0x09);
 620   1      }
 621          
 622          void fun11(void) //Ò»¼¶²Ëµ¥FA
 623          {
 624   1              tm1629_f(0x0a);
 625   1      }
 626          
 627          void fun12(void) //Ò»¼¶²Ëµ¥Fb
 628          {
 629   1              tm1629_f(0x0b);
 630   1      }
 631          
 632          void fun13(void) //Ò»¼¶²Ëµ¥FC
 633          {
 634   1              tm1629_f(0x0c);
 635   1      }
 636          
 637          void fun14(void) //Ò»¼¶²Ëµ¥Fd
 638          {
 639   1              tm1629_f(0x0d);
 640   1      }
 641          
 642          void fun15(void) //ÉèÖÃÄê·Ý
 643          {
 644   1              if (return_await_number_table() == 1)
 645   1              {
 646   2                      Display_time();
 647   2                      set_await_number_table(2);
 648   2              }
 649   1              if (return_await_number_table() == 3)
 650   1              {
 651   2                      buf_display[1][7] = 0;
 652   2                      buf_display[1][6] = 0;
 653   2                      buf_display[1][5] = 0;
 654   2                      buf_display[1][4] = 0;
 655   2                      display();
 656   2                      set_await_number_table(0);
 657   2              }
 658   1              Ds1302_Write_Time();
 659   1      }
 660          
 661          void fun16(void) //ÉèÖÃÔÂ·Ý
 662          {
 663   1              if (return_await_number_table() == 1)
 664   1              {
 665   2                      Display_time();
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 12  

 666   2                      set_await_number_table(2);
 667   2              }
 668   1              if (return_await_number_table() == 3)
 669   1              {
 670   2                      buf_display[1][2] = 0;
 671   2                      buf_display[1][1] = 0;
 672   2                      display();
 673   2                      set_await_number_table(0);
 674   2              }
 675   1              Ds1302_Write_Time();
 676   1      }
 677          
 678          void fun17(void) //ÉèÖÃÈÕÆÚ
 679          {
 680   1              if (return_await_number_table() == 1)
 681   1              {
 682   2                      Display_time();
 683   2                      set_await_number_table(2);
 684   2              }
 685   1              if (return_await_number_table() == 3)
 686   1              {
 687   2                      buf_display[0][7] = 0;
 688   2                      buf_display[0][6] = 0;
 689   2                      display();
 690   2                      set_await_number_table(0);
 691   2              }
 692   1              Ds1302_Write_Time();
 693   1      }
 694          
 695          void fun18(void) //ÉèÖÃÐÇÆÚ
 696          {
 697   1              if (return_await_number_table() == 1)
 698   1              {
 699   2                      Display_time();
 700   2                      set_await_number_table(2);
 701   2              }
 702   1              if (return_await_number_table() == 3)
 703   1              {
 704   2                      buf_display[0][5] = 0;
 705   2                      display();
 706   2                      set_await_number_table(0);
 707   2              }
 708   1              Ds1302_Write_Time();
 709   1      }
 710          
 711          void fun19(void) //ÉèÖÃÐ¡Ê±
 712          {
 713   1              if (return_await_number_table() == 1)
 714   1              {
 715   2                      Display_time();
 716   2                      set_await_number_table(2);
 717   2              }
 718   1              if (return_await_number_table() == 3)
 719   1              {
 720   2                      buf_display[0][3] = 0;
 721   2                      buf_display[0][2] = 0;
 722   2                      display();
 723   2                      set_await_number_table(0);
 724   2              }
 725   1              Ds1302_Write_Time();
 726   1      }
 727          
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 13  

 728          void fun20(void) //ÉèÖÃ·ÖÖÓ
 729          {
 730   1              if (return_await_number_table() == 1)
 731   1              {
 732   2                      Display_time();
 733   2                      set_await_number_table(2);
 734   2              }
 735   1              if (return_await_number_table() == 3)
 736   1              {
 737   2                      buf_display[0][1] = 0;
 738   2                      buf_display[0][0] = 0;
 739   2                      display();
 740   2                      set_await_number_table(0);
 741   2              }
 742   1              Ds1302_Write_Time();
 743   1      }
 744          
 745          void fun21(void) //¶þ¼¶²Ëµ¥F1-E1
 746          {
 747   1              tm1629_E(0x01);
 748   1              Two_Menu_F1_E1[0] = 0;
 749   1              Two_Menu_F1_E1[1] = 0;
 750   1              Two_Menu_F1_E1[2] = 0;
 751   1              Two_Menu_F1_E1[3] = 1;
 752   1      }
 753          
 754          void fun22(void) //¶þ¼¶²Ëµ¥F1-E2
 755          {
 756   1              tm1629_E(0x02);
 757   1              Two_Menu_F1_E2[0] = 0;
 758   1              Two_Menu_F1_E2[1] = 0;
 759   1              Two_Menu_F1_E2[2] = 0;
 760   1              Two_Menu_F1_E2[3] = 1;
 761   1      }
 762          
 763          void fun23(void) //¶þ¼¶²Ëµ¥F1-E3
 764          {
 765   1              tm1629_E(0x03);
 766   1              Two_Menu_F1_E3[0] = 0;
 767   1              Two_Menu_F1_E3[1] = 0;
 768   1              Two_Menu_F1_E3[2] = 0;
 769   1              Two_Menu_F1_E3[3] = 1;
 770   1      }
 771          
 772          void fun24(void) //¶þ¼¶²Ëµ¥F1-E4
 773          {
 774   1              tm1629_E(0x04);
 775   1              Two_Menu_F1_E4[0] = 0;
 776   1              Two_Menu_F1_E4[1] = 0;
 777   1              Two_Menu_F1_E4[2] = 0;
 778   1              Two_Menu_F1_E4[3] = 1;
 779   1      }
 780          
 781          void fun25(void) //¶þ¼¶²Ëµ¥F2-E1
 782          {
 783   1              tm1629_E(0x01);
 784   1              Two_Menu_F2_E1[0] = 0;
 785   1              Two_Menu_F2_E1[1] = 0;
 786   1              Two_Menu_F2_E1[2] = 0;
 787   1              Two_Menu_F2_E1[3] = 1;
 788   1      }
 789          
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 14  

 790          void fun26(void) //¶þ¼¶²Ëµ¥F2-E2
 791          {
 792   1              tm1629_E(0x02);
 793   1              Two_Menu_F2_E2[0] = 0;
 794   1              Two_Menu_F2_E2[1] = 0;
 795   1              Two_Menu_F2_E2[2] = 0;
 796   1              Two_Menu_F2_E2[3] = 1;
 797   1      }
 798          
 799          void fun27(void) //¶þ¼¶²Ëµ¥F2-E3
 800          {
 801   1              tm1629_E(0x03);
 802   1              Two_Menu_F2_E3[0] = 0;
 803   1              Two_Menu_F2_E3[1] = 0;
 804   1              Two_Menu_F2_E3[2] = 0;
 805   1              Two_Menu_F2_E3[3] = 1;
 806   1      }
 807          
 808          void fun28(void) //¶þ¼¶²Ëµ¥F2-E4
 809          {
 810   1              tm1629_E(0x04);
 811   1              Two_Menu_F2_E4[0] = 0;
 812   1              Two_Menu_F2_E4[1] = 0;
 813   1              Two_Menu_F2_E4[2] = 0;
 814   1              Two_Menu_F2_E4[3] = 1;
 815   1      }
 816          
 817          void fun29(void) //¶þ¼¶²Ëµ¥F3-E1
 818          {
 819   1              tm1629_E(0x01);
 820   1      }
 821          
 822          void fun30(void) //¶þ¼¶²Ëµ¥F3-E2
 823          {
 824   1              tm1629_E(0x02);
 825   1      }
 826          
 827          void fun31(void) //¶þ¼¶²Ëµ¥F4
 828          {
 829   1              unsigned char temp = 0;
 830   1              temp = return_Two_Menu_F4_E1();
 831   1              Show_two_number(temp);
 832   1      }
 833          
 834          void fun32(void) //¶þ¼¶²Ëµ¥F5
 835          {
 836   1              unsigned char temp = 0;
 837   1              temp = return_Two_Menu_F5_E1();
 838   1              Show_two_number(temp);
 839   1      }
 840          
 841          void fun33(void) //¶þ¼¶²Ëµ¥F6-E1
 842          {
 843   1              tm1629_E(0x01);
 844   1      }
 845          
 846          void fun34(void) //¶þ¼¶²Ëµ¥F6-E2
 847          {
 848   1              tm1629_E(0x02);
 849   1      }
 850          
 851          void fun35(void) //¶þ¼¶²Ëµ¥F6-E3
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 15  

 852          {
 853   1              tm1629_E(0x03);
 854   1      }
 855          
 856          void fun36(void) //¶þ¼¶²Ëµ¥F6-E4
 857          {
 858   1              tm1629_E(0x04);
 859   1      }
 860          
 861          void fun37(void) //¶þ¼¶²Ëµ¥F6-E5
 862          {
 863   1              tm1629_E(0x05);
 864   1      }
 865          
 866          void fun38(void) //¶þ¼¶²Ëµ¥F7-E1
 867          {
 868   1              tm1629_E(0x01);
 869   1      }
 870          
 871          void fun39(void) //¶þ¼¶²Ëµ¥F7-E2
 872          {
 873   1              tm1629_E(0x02);
 874   1      }
 875          
 876          void fun40(void) //¶þ¼¶²Ëµ¥F7-E3
 877          {
 878   1              tm1629_E(0x03);
 879   1      }
 880          
 881          void fun41(void) //¶þ¼¶²Ëµ¥F7-E4
 882          {
 883   1              tm1629_E(0x04);
 884   1      }
 885          
 886          void fun42(void) //¶þ¼¶²Ëµ¥F8-E1
 887          {
 888   1              tm1629_E(0x01);
 889   1      }
 890          
 891          void fun43(void) //¶þ¼¶²Ëµ¥F8-E2
 892          {
 893   1              tm1629_E(0x02);
 894   1      }
 895          
 896          void fun44(void) //¶þ¼¶²Ëµ¥F9-E1
 897          {
 898   1              tm1629_E(0x01);
 899   1      }
 900          
 901          void fun45(void) //¶þ¼¶²Ëµ¥F9-E2
 902          {
 903   1              tm1629_E(0x02);
 904   1      }
 905          
 906          void fun46(void) //¶þ¼¶²Ëµ¥FA
 907          {
 908   1              tm1629_f(0x0f);
 909   1      }
 910          
 911          
 912          void fun47(void) //¶þ¼¶²Ëµ¥Fb
 913          {
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 16  

 914   1              tm1629_f(0x0f);
 915   1      }
 916          
 917          void fun48(void) //¶þ¼¶²Ëµ¥FC
 918          {
 919   1              unsigned char temp = 0;
 920   1              temp = return_Two_Menu_FC_E1();
 921   1              tm1629_f(temp);
 922   1      }
 923          
 924          void fun49(void) //¶þ¼¶²Ëµ¥Fd
 925          {
 926   1              tm1629_f(0x0f);
 927   1      }
 928          
 929          void fun50(void) //F1_E1 Ç§Î»ÉÁË¸
 930          {
 931   1              if (return_await_number_table() == 1)
 932   1              {
 933   2                      Show_four_number(Two_Menu_F1_E1);
 934   2                      set_await_number_table(2);
 935   2              }
 936   1              if (return_await_number_table() == 3)
 937   1              {
 938   2                      buf_display[0][3] = 0;
 939   2                      display();
 940   2                      set_await_number_table(0);
 941   2              }
 942   1      }
 943          
 944          void fun51(void) //F1_E1 °ÙÎ»ÉÁË¸
 945          {
 946   1              if (return_await_number_table() == 1)
 947   1              {
 948   2                      Show_four_number(Two_Menu_F1_E1);
 949   2                      set_await_number_table(2);
 950   2              }
 951   1              if (return_await_number_table() == 3)
 952   1              {
 953   2                      buf_display[0][2] = 0;
 954   2                      display();
 955   2                      set_await_number_table(0);
 956   2              }
 957   1      }
 958          
 959          void fun52(void)  //F1_E1 Ê®Î»ÉÁË¸
 960          {
 961   1              if (return_await_number_table() == 1)
 962   1              {
 963   2                      Show_four_number(Two_Menu_F1_E1);
 964   2                      set_await_number_table(2);
 965   2              }
 966   1              if (return_await_number_table() == 3)
 967   1              {
 968   2                      buf_display[0][1] = 0;
 969   2                      display();
 970   2                      set_await_number_table(0);
 971   2              }
 972   1      }
 973          
 974          void fun53(void) //F1_E1 ¸öÎ»ÉÁË¸
 975          {
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 17  

 976   1              if (return_await_number_table() == 1)
 977   1              {
 978   2                      Show_four_number(Two_Menu_F1_E1);
 979   2                      set_await_number_table(2);
 980   2              }
 981   1              if (return_await_number_table() == 3)
 982   1              {
 983   2                      buf_display[0][0] = 0;
 984   2                      display();
 985   2                      set_await_number_table(0);
 986   2              }
 987   1      }
 988          
 989          void fun54(void) //F1_E2 Ç§Î»ÉÁË¸
 990          {
 991   1              if (return_await_number_table() == 1)
 992   1              {
 993   2                      Show_four_number(Two_Menu_F1_E2);
 994   2                      set_await_number_table(2);
 995   2              }
 996   1              if (return_await_number_table() == 3)
 997   1              {
 998   2                      buf_display[0][3] = 0;
 999   2                      display();
1000   2                      set_await_number_table(0);
1001   2              }
1002   1      }
1003          
1004          void fun55(void) //F1_E2 °ÙÎ»ÉÁË¸
1005          {
1006   1              if (return_await_number_table() == 1)
1007   1              {
1008   2                      Show_four_number(Two_Menu_F1_E2);
1009   2                      set_await_number_table(2);
1010   2              }
1011   1              if (return_await_number_table() == 3)
1012   1              {
1013   2                      buf_display[0][2] = 0;
1014   2                      display();
1015   2                      set_await_number_table(0);
1016   2              }
1017   1      }
1018          
1019          void fun56(void) //F1_E2 Ê®Î»ÉÁË¸
1020          {
1021   1              if (return_await_number_table() == 1)
1022   1              {
1023   2                      Show_four_number(Two_Menu_F1_E2);
1024   2                      set_await_number_table(2);
1025   2              }
1026   1              if (return_await_number_table() == 3)
1027   1              {
1028   2                      buf_display[0][1] = 0;
1029   2                      display();
1030   2                      set_await_number_table(0);
1031   2              }
1032   1      }
1033          
1034          void fun57(void) //F1_E2 ¸öÎ»ÉÁË¸
1035          {
1036   1              if (return_await_number_table() == 1)
1037   1              {
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 18  

1038   2                      Show_four_number(Two_Menu_F1_E2);
1039   2                      set_await_number_table(2);
1040   2              }
1041   1              if (return_await_number_table() == 3)
1042   1              {
1043   2                      buf_display[0][0] = 0;
1044   2                      display();
1045   2                      set_await_number_table(0);
1046   2              }
1047   1      }
1048          
1049          void fun58(void) //F1_E3 Ç§Î»ÉÁË¸
1050          {
1051   1              if (return_await_number_table() == 1)
1052   1              {
1053   2                      Show_four_number(Two_Menu_F1_E3);
1054   2                      set_await_number_table(2);
1055   2              }
1056   1              if (return_await_number_table() == 3)
1057   1              {
1058   2                      buf_display[0][3] = 0;
1059   2                      display();
1060   2                      set_await_number_table(0);
1061   2              }
1062   1      }
1063          
1064          void fun59(void) //F1_E3 °ÙÎ»ÉÁË¸
1065          {
1066   1              if (return_await_number_table() == 1)
1067   1              {
1068   2                      Show_four_number(Two_Menu_F1_E3);
1069   2                      set_await_number_table(2);
1070   2              }
1071   1              if (return_await_number_table() == 3)
1072   1              {
1073   2                      buf_display[0][2] = 0;
1074   2                      display();
1075   2                      set_await_number_table(0);
1076   2              }
1077   1      }
1078          
1079          void fun60(void) //F1_E3 Ê®Î»ÉÁË¸
1080          {
1081   1              if (return_await_number_table() == 1)
1082   1              {
1083   2                      Show_four_number(Two_Menu_F1_E3);
1084   2                      set_await_number_table(2);
1085   2              }
1086   1              if (return_await_number_table() == 3)
1087   1              {
1088   2                      buf_display[0][1] = 0;
1089   2                      display();
1090   2                      set_await_number_table(0);
1091   2              }
1092   1      }
1093          
1094          void fun61(void) //F1_E3 ¸öÎ»ÉÁË¸
1095          {
1096   1              if (return_await_number_table() == 1)
1097   1              {
1098   2                      Show_four_number(Two_Menu_F1_E3);
1099   2                      set_await_number_table(2);
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 19  

1100   2              }
1101   1              if (return_await_number_table() == 3)
1102   1              {
1103   2                      buf_display[0][0] = 0;
1104   2                      display();
1105   2                      set_await_number_table(0);
1106   2              }
1107   1      }
1108          
1109          void fun62(void) //F1_E4 Ç§Î»ÉÁË¸
1110          {
1111   1              if (return_await_number_table() == 1)
1112   1              {
1113   2                      Show_four_number(Two_Menu_F1_E4);
1114   2                      set_await_number_table(2);
1115   2              }
1116   1              if (return_await_number_table() == 3)
1117   1              {
1118   2                      buf_display[0][3] = 0;
1119   2                      display();
1120   2                      set_await_number_table(0);
1121   2              }
1122   1      }
1123          
1124          void fun63(void) //F1_E4 °ÙÎ»ÉÁË¸
1125          {
1126   1              if (return_await_number_table() == 1)
1127   1              {
1128   2                      Show_four_number(Two_Menu_F1_E4);
1129   2                      set_await_number_table(2);
1130   2              }
1131   1              if (return_await_number_table() == 3)
1132   1              {
1133   2                      buf_display[0][2] = 0;
1134   2                      display();
1135   2                      set_await_number_table(0);
1136   2              }
1137   1      }
1138          
1139          void fun64(void) //F1_E4 Ê®Î»ÉÁË¸
1140          {
1141   1              if (return_await_number_table() == 1)
1142   1              {
1143   2                      Show_four_number(Two_Menu_F1_E4);
1144   2                      set_await_number_table(2);
1145   2              }
1146   1              if (return_await_number_table() == 3)
1147   1              {
1148   2                      buf_display[0][1] = 0;
1149   2                      display();
1150   2                      set_await_number_table(0);
1151   2              }
1152   1      }
1153          
1154          void fun65(void) //F1_E4 ¸öÎ»ÉÁË¸
1155          {
1156   1              if (return_await_number_table() == 1)
1157   1              {
1158   2                      Show_four_number(Two_Menu_F1_E4);
1159   2                      set_await_number_table(2);
1160   2              }
1161   1              if (return_await_number_table() == 3)
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 20  

1162   1              {
1163   2                      buf_display[0][0] = 0;
1164   2                      display();
1165   2                      set_await_number_table(0);
1166   2              }
1167   1      }
1168          
1169          void fun66(void) //F2_E1 Ç§Î»ÉÁË¸
1170          {
1171   1              if (return_await_number_table() == 1)
1172   1              {
1173   2                      Show_four_number(Two_Menu_F2_E1);
1174   2                      set_await_number_table(2);
1175   2              }
1176   1              if (return_await_number_table() == 3)
1177   1              {
1178   2                      buf_display[0][3] = 0;
1179   2                      display();
1180   2                      set_await_number_table(0);
1181   2              }
1182   1      }
1183          
1184          void fun67(void) //F2_E1 °ÙÎ»ÉÁË¸
1185          {
1186   1              if (return_await_number_table() == 1)
1187   1              {
1188   2                      Show_four_number(Two_Menu_F2_E1);
1189   2                      set_await_number_table(2);
1190   2              }
1191   1              if (return_await_number_table() == 3)
1192   1              {
1193   2                      buf_display[0][2] = 0;
1194   2                      display();
1195   2                      set_await_number_table(0);
1196   2              }
1197   1      }
1198          
1199          void fun68(void) //F2_E1 Ê®Î»ÉÁË¸
1200          {
1201   1              if (return_await_number_table() == 1)
1202   1              {
1203   2                      Show_four_number(Two_Menu_F2_E1);
1204   2                      set_await_number_table(2);
1205   2              }
1206   1              if (return_await_number_table() == 3)
1207   1              {
1208   2                      buf_display[0][1] = 0;
1209   2                      display();
1210   2                      set_await_number_table(0);
1211   2              }
1212   1      }
1213          
1214          void fun69(void) //F2_E1 ¸öÎ»ÉÁË¸
1215          {
1216   1              if (return_await_number_table() == 1)
1217   1              {
1218   2                      Show_four_number(Two_Menu_F2_E1);
1219   2                      set_await_number_table(2);
1220   2              }
1221   1              if (return_await_number_table() == 3)
1222   1              {
1223   2                      buf_display[0][0] = 0;
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 21  

1224   2                      display();
1225   2                      set_await_number_table(0);
1226   2              }
1227   1      }
1228          
1229          void fun70(void) //F2_E2 Ç§Î»ÉÁË¸
1230          {
1231   1              if (return_await_number_table() == 1)
1232   1              {
1233   2                      Show_four_number(Two_Menu_F2_E2);
1234   2                      set_await_number_table(2);
1235   2              }
1236   1              if (return_await_number_table() == 3)
1237   1              {
1238   2                      buf_display[0][3] = 0;
1239   2                      display();
1240   2                      set_await_number_table(0);
1241   2              }
1242   1      }
1243          
1244          void fun71(void) //F2_E2 °ÙÎ»ÉÁË¸
1245          {
1246   1              if (return_await_number_table() == 1)
1247   1              {
1248   2                      Show_four_number(Two_Menu_F2_E2);
1249   2                      set_await_number_table(2);
1250   2              }
1251   1              if (return_await_number_table() == 3)
1252   1              {
1253   2                      buf_display[0][2] = 0;
1254   2                      display();
1255   2                      set_await_number_table(0);
1256   2              }
1257   1      }
1258          
1259          void fun72(void) //F2_E2 Ê®Î»ÉÁË¸
1260          {
1261   1              if (return_await_number_table() == 1)
1262   1              {
1263   2                      Show_four_number(Two_Menu_F2_E2);
1264   2                      set_await_number_table(2);
1265   2              }
1266   1              if (return_await_number_table() == 3)
1267   1              {
1268   2                      buf_display[0][1] = 0;
1269   2                      display();
1270   2                      set_await_number_table(0);
1271   2              }
1272   1      }
1273          
1274          void fun73(void) //F2_E2 ¸öÎ»ÉÁË¸
1275          {
1276   1              if (return_await_number_table() == 1)
1277   1              {
1278   2                      Show_four_number(Two_Menu_F2_E2);
1279   2                      set_await_number_table(2);
1280   2              }
1281   1              if (return_await_number_table() == 3)
1282   1              {
1283   2                      buf_display[0][0] = 0;
1284   2                      display();
1285   2                      set_await_number_table(0);
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 22  

1286   2              }
1287   1      }
1288          
1289          void fun74(void) //F2_E3 Ç§Î»ÉÁË¸
1290          {
1291   1              if (return_await_number_table() == 1)
1292   1              {
1293   2                      Show_four_number(Two_Menu_F2_E3);
1294   2                      set_await_number_table(2);
1295   2              }
1296   1              if (return_await_number_table() == 3)
1297   1              {
1298   2                      buf_display[0][3] = 0;
1299   2                      display();
1300   2                      set_await_number_table(0);
1301   2              }
1302   1      }
1303          
1304          void fun75(void) //F2_E3 °ÙÎ»ÉÁË¸
1305          {
1306   1              if (return_await_number_table() == 1)
1307   1              {
1308   2                      Show_four_number(Two_Menu_F2_E3);
1309   2                      set_await_number_table(2);
1310   2              }
1311   1              if (return_await_number_table() == 3)
1312   1              {
1313   2                      buf_display[0][2] = 0;
1314   2                      display();
1315   2                      set_await_number_table(0);
1316   2              }
1317   1      }
1318          
1319          void fun76(void) //F2_E3 Ê®Î»ÉÁË¸
1320          {
1321   1              if (return_await_number_table() == 1)
1322   1              {
1323   2                      Show_four_number(Two_Menu_F2_E3);
1324   2                      set_await_number_table(2);
1325   2              }
1326   1              if (return_await_number_table() == 3)
1327   1              {
1328   2                      buf_display[0][1] = 0;
1329   2                      display();
1330   2                      set_await_number_table(0);
1331   2              }
1332   1      }
1333          
1334          void fun77(void) //F2_E3 ¸öÎ»ÉÁË¸
1335          {
1336   1              if (return_await_number_table() == 1)
1337   1              {
1338   2                      Show_four_number(Two_Menu_F2_E3);
1339   2                      set_await_number_table(2);
1340   2              }
1341   1              if (return_await_number_table() == 3)
1342   1              {
1343   2                      buf_display[0][0] = 0;
1344   2                      display();
1345   2                      set_await_number_table(0);
1346   2              }
1347   1      }
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 23  

1348          
1349          void fun78(void) //F2_E4 Ç§Î»ÉÁË¸
1350          {
1351   1              if (return_await_number_table() == 1)
1352   1              {
1353   2                      Show_four_number(Two_Menu_F2_E4);
1354   2                      set_await_number_table(2);
1355   2              }
1356   1              if (return_await_number_table() == 3)
1357   1              {
1358   2                      buf_display[0][3] = 0;
1359   2                      display();
1360   2                      set_await_number_table(0);
1361   2              }
1362   1      }
1363          
1364          void fun79(void) //F2_E4 °ÙÎ»ÉÁË¸
1365          {
1366   1              if (return_await_number_table() == 1)
1367   1              {
1368   2                      Show_four_number(Two_Menu_F2_E4);
1369   2                      set_await_number_table(2);
1370   2              }
1371   1              if (return_await_number_table() == 3)
1372   1              {
1373   2                      buf_display[0][2] = 0;
1374   2                      display();
1375   2                      set_await_number_table(0);
1376   2              }
1377   1      }
1378          
1379          void fun80(void) //F2_E4 Ê®Î»ÉÁË¸
1380          {
1381   1              if (return_await_number_table() == 1)
1382   1              {
1383   2                      Show_four_number(Two_Menu_F2_E4);
1384   2                      set_await_number_table(2);
1385   2              }
1386   1              if (return_await_number_table() == 3)
1387   1              {
1388   2                      buf_display[0][1] = 0;
1389   2                      display();
1390   2                      set_await_number_table(0);
1391   2              }
1392   1      }
1393          
1394          void fun81(void) //F2_E4 ¸öÎ»ÉÁË¸
1395          {
1396   1              if (return_await_number_table() == 1)
1397   1              {
1398   2                      Show_four_number(Two_Menu_F2_E4);
1399   2                      set_await_number_table(2);
1400   2              }
1401   1              if (return_await_number_table() == 3)
1402   1              {
1403   2                      buf_display[0][0] = 0;
1404   2                      display();
1405   2                      set_await_number_table(0);
1406   2              }
1407   1      }
1408          
1409          void fun82(void) //ÏÔÊ¾¼´Ê±ÏÔÊ¾ »¹ÊÇÑ­»·ÏÔÊ¾
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 24  

1410          {
1411   1              unsigned char temp=0;
1412   1              temp = return_Two_Menu_F3_E1();
1413   1              Show_one_number(temp);
1414   1      }
1415          
1416          void fun83(void) //¶ÓÁÐ´æ´¢¸öÊý
1417          {
1418   1              unsigned char temp = 0;
1419   1              temp = return_Two_Menu_F3_E2();
1420   1              Show_two_number(temp);
1421   1      }
1422          
1423          void fun84(void) //F6_E1ÓïÒôÑ¡Ôñ
1424          {
1425   1              unsigned char temp = 0;
1426   1              temp = return_Two_Menu_F6_E1();
1427   1              Show_one_number(temp);
1428   1      }
1429          
1430          void fun85(void) //F6_E2ÓïÒô±¨¶Á´ÎÊý
1431          {
1432   1              unsigned char temp = 0;
1433   1              temp = return_Two_Menu_F6_E2();
1434   1              Show_one_number(temp);
1435   1      }
1436          
1437          void fun86(void) //F6_E3Ñ­»·Ê±ºòÊÇ·ñ±¨¶Á
1438          {
1439   1              unsigned char temp = 0;
1440   1              temp = return_Two_Menu_F6_E3();
1441   1              Show_one_number(temp);
1442   1      }
1443          
1444          void fun87(void) //F6_E4ÒôÁ¿´óÐ¡µ÷Õû
1445          {
1446   1              unsigned char temp = 0;
1447   1              temp = return_Two_Menu_F6_E4();
1448   1              GD5800_sound_volume(temp * 3);
1449   1              Show_one_number(temp);
1450   1      }
1451          
1452          void fun88(void) //F6_E5ÆÁÄ»ÁÁ¶Èµ÷Õû
1453          {
1454   1              unsigned char temp = 0;
1455   1              temp = return_Two_Menu_F6_E5();
1456   1              Show_one_number(temp);
1457   1      }
1458          
1459          void fun89(void) //F7_E1 999*9
1460          {
1461   1              unsigned char temp = 0;
1462   1              temp = return_Two_Menu_F7_E1();
1463   1              Show_one_number(temp);
1464   1      }
1465          
1466          void fun90(void) //F7_E2 9999*9
1467          {
1468   1              unsigned char temp = 0;
1469   1              temp = return_Two_Menu_F7_E2();
1470   1              Show_one_number(temp);
1471   1      }
C51 COMPILER V9.00   TM1629                                                                10/05/2015 14:44:15 PAGE 25  

1472          
1473          void fun91(void) //F7_E3 999*99
1474          {
1475   1              unsigned char temp = 0;
1476   1              temp = return_Two_Menu_F7_E3();
1477   1              Show_one_number(temp);
1478   1      }
1479          
1480          void fun92(void) //F7_E4 9999*99
1481          {
1482   1              unsigned char temp = 0;
1483   1              temp = return_Two_Menu_F7_E4();
1484   1              Show_one_number(temp);
1485   1      }
1486          
1487          void fun93(void) //F8_E1µ¥¼üÎ»¸ú¶à¼üÎ»ÇÐ»»
1488          {
1489   1              unsigned char temp = 0;
1490   1              temp = return_Two_Menu_F8_E1();
1491   1              Show_one_number(temp);
1492   1      }
1493          
1494          void fun94(void) //F8_E2¼üÎ»ÉèÖÃ
1495          {
1496   1              unsigned char temp = 0;
1497   1              temp = return_Two_Menu_F8_E2();
1498   1              Show_two_number(temp);
1499   1              if (return_sound_table() == 1)
1500   1              {
1501   2                      delay10ms();
1502   2                      GD5800_stop_music();
1503   2                      delay10ms();
1504   2                      GD5800_select_chapter(temp + QUXIAO);
1505   2                      delay10ms();
1506   2                      //GD5800_play_music();
1507   2                      set_sound_table(0);
1508   2              }
1509   1      }
1510          
1511          void fun95(void) //½âÂë²Ëµ¥
1512          {
1513   1              tm1629_load();
1514   1              display();;
1515   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   5399    ----
   CONSTANT SIZE    =     24    ----
   XDATA SIZE       =    352      63
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
